(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".material-design-icon[data-v-38a6f3e5]{display:flex;align-self:center;justify-self:center;align-items:center;justify-content:center}.checkbox-content[data-v-38a6f3e5]{display:flex;align-items:center;flex-direction:row;gap:var(--default-grid-baseline);-webkit-user-select:none;user-select:none;min-height:var(--default-clickable-area);border-radius:var(--checkbox-radio-switch--border-radius);padding:var(--default-grid-baseline) calc((var(--default-clickable-area) - var(--icon-height)) / 2);width:100%;max-width:fit-content}.checkbox-content__text[data-v-38a6f3e5]{flex:1 0}.checkbox-content__text[data-v-38a6f3e5]:empty{display:none}.checkbox-content__icon>*[data-v-38a6f3e5]{width:var(--icon-size);height:var(--icon-size);color:var(--color-primary-element)}.checkbox-content--button-variant .checkbox-content__icon:not(.checkbox-content__icon--checked)>*[data-v-38a6f3e5]{color:var(--color-primary-element)}.checkbox-content--button-variant .checkbox-content__icon--checked>*[data-v-38a6f3e5]{color:var(--color-primary-element-text)}.checkbox-content--has-text[data-v-38a6f3e5]{padding-right:calc((var(--default-clickable-area) - 16px) / 2)}.checkbox-content[data-v-38a6f3e5],.checkbox-content *[data-v-38a6f3e5]{cursor:pointer;flex-shrink:0}.material-design-icon[data-v-ff5243c5]{display:flex;align-self:center;justify-self:center;align-items:center;justify-content:center}.checkbox-radio-switch[data-v-ff5243c5]{display:flex;align-items:center;color:var(--color-main-text);background-color:transparent;font-size:var(--default-font-size);line-height:var(--default-line-height);padding:0;position:relative;--checkbox-radio-switch--border-radius: var(--border-radius-element, calc(var(--default-clickable-area) / 2));--checkbox-radio-switch--border-radius-outer: calc(var(--checkbox-radio-switch--border-radius) + 2px)}.checkbox-radio-switch__input[data-v-ff5243c5]{position:absolute;z-index:-1;opacity:0!important;width:var(--icon-size);height:var(--icon-size);margin:4px calc((var(--default-clickable-area) - 16px) / 2)}.checkbox-radio-switch__input:focus-visible+.checkbox-radio-switch__content[data-v-ff5243c5],.checkbox-radio-switch__input[data-v-ff5243c5]:focus-visible{outline:2px solid var(--color-main-text);border-color:var(--color-main-background);outline-offset:-2px}.checkbox-radio-switch--disabled .checkbox-radio-switch__content[data-v-ff5243c5]{opacity:.5}.checkbox-radio-switch--disabled .checkbox-radio-switch__content[data-v-ff5243c5] .checkbox-radio-switch__icon>*{color:var(--color-main-text)}.checkbox-radio-switch:not(.checkbox-radio-switch--disabled,.checkbox-radio-switch--checked):focus-within .checkbox-radio-switch__content[data-v-ff5243c5],.checkbox-radio-switch:not(.checkbox-radio-switch--disabled,.checkbox-radio-switch--checked) .checkbox-radio-switch__content[data-v-ff5243c5]:hover{background-color:var(--color-background-hover)}.checkbox-radio-switch--checked:not(.checkbox-radio-switch--disabled):focus-within .checkbox-radio-switch__content[data-v-ff5243c5],.checkbox-radio-switch--checked:not(.checkbox-radio-switch--disabled) .checkbox-radio-switch__content[data-v-ff5243c5]:hover{background-color:var(--color-primary-element-hover)}.checkbox-radio-switch--checked:not(.checkbox-radio-switch--button-variant):not(.checkbox-radio-switch--disabled):focus-within .checkbox-radio-switch__content[data-v-ff5243c5],.checkbox-radio-switch--checked:not(.checkbox-radio-switch--button-variant):not(.checkbox-radio-switch--disabled) .checkbox-radio-switch__content[data-v-ff5243c5]:hover{background-color:var(--color-primary-element-light-hover)}.checkbox-radio-switch-switch[data-v-ff5243c5]:not(.checkbox-radio-switch--checked) .checkbox-radio-switch__icon>*{color:var(--color-text-maxcontrast)}.checkbox-radio-switch-switch.checkbox-radio-switch--disabled.checkbox-radio-switch--checked[data-v-ff5243c5] .checkbox-radio-switch__icon>*{color:var(--color-primary-element-light)}.checkbox-radio-switch--button-variant.checkbox-radio-switch[data-v-ff5243c5]{background-color:var(--color-main-background);border:2px solid var(--color-border-maxcontrast);overflow:hidden}.checkbox-radio-switch--button-variant.checkbox-radio-switch--checked[data-v-ff5243c5]{font-weight:700}.checkbox-radio-switch--button-variant.checkbox-radio-switch--checked .checkbox-radio-switch__content[data-v-ff5243c5]{background-color:var(--color-primary-element);color:var(--color-primary-element-text)}.checkbox-radio-switch--button-variant[data-v-ff5243c5] .checkbox-radio-switch__text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.checkbox-radio-switch--button-variant[data-v-ff5243c5]:not(.checkbox-radio-switch--checked) .checkbox-radio-switch__icon>*{color:var(--color-main-text)}.checkbox-radio-switch--button-variant[data-v-ff5243c5] .checkbox-radio-switch__icon:empty{display:none}.checkbox-radio-switch--button-variant[data-v-ff5243c5]:not(.checkbox-radio-switch--button-variant-v-grouped):not(.checkbox-radio-switch--button-variant-h-grouped),.checkbox-radio-switch--button-variant .checkbox-radio-switch__content[data-v-ff5243c5]{border-radius:var(--checkbox-radio-switch--border-radius)}.checkbox-radio-switch--button-variant-v-grouped .checkbox-radio-switch__content[data-v-ff5243c5]{flex-basis:100%;max-width:unset}.checkbox-radio-switch--button-variant-v-grouped[data-v-ff5243c5]:first-of-type{border-top-left-radius:var(--checkbox-radio-switch--border-radius-outer);border-top-right-radius:var(--checkbox-radio-switch--border-radius-outer)}.checkbox-radio-switch--button-variant-v-grouped[data-v-ff5243c5]:last-of-type{border-bottom-left-radius:var(--checkbox-radio-switch--border-radius-outer);border-bottom-right-radius:var(--checkbox-radio-switch--border-radius-outer)}.checkbox-radio-switch--button-variant-v-grouped[data-v-ff5243c5]:not(:last-of-type){border-bottom:0!important}.checkbox-radio-switch--button-variant-v-grouped:not(:last-of-type) .checkbox-radio-switch__content[data-v-ff5243c5]{margin-bottom:2px}.checkbox-radio-switch--button-variant-v-grouped[data-v-ff5243c5]:not(:first-of-type){border-top:0!important}.checkbox-radio-switch--button-variant-h-grouped[data-v-ff5243c5]:first-of-type{border-top-left-radius:var(--checkbox-radio-switch--border-radius-outer);border-bottom-left-radius:var(--checkbox-radio-switch--border-radius-outer)}.checkbox-radio-switch--button-variant-h-grouped[data-v-ff5243c5]:last-of-type{border-top-right-radius:var(--checkbox-radio-switch--border-radius-outer);border-bottom-right-radius:var(--checkbox-radio-switch--border-radius-outer)}.checkbox-radio-switch--button-variant-h-grouped[data-v-ff5243c5]:not(:last-of-type){border-right:0!important}.checkbox-radio-switch--button-variant-h-grouped:not(:last-of-type) .checkbox-radio-switch__content[data-v-ff5243c5]{margin-right:2px}.checkbox-radio-switch--button-variant-h-grouped[data-v-ff5243c5]:not(:first-of-type){border-left:0!important}.checkbox-radio-switch--button-variant-h-grouped[data-v-ff5243c5] .checkbox-radio-switch__text{text-align:center;display:flex;align-items:center}.checkbox-radio-switch--button-variant-h-grouped .checkbox-radio-switch__content[data-v-ff5243c5]{flex-direction:column;justify-content:center;width:100%;margin:0;gap:0}.notecard[data-v-44f7d340]{color:var(--color-text-light)!important;background-color:var(--note-background)!important;border:1px solid var(--color-border);border-left:4px solid var(--note-theme);border-radius:var(--border-radius);box-shadow:#2b2a330d 0 1px 2px;margin:1rem 0;padding:1rem!important}.notecard.warning[data-v-44f7d340]{--note-background: rgba(var(--color-warning-rgb), .2);--note-theme: var(--color-warning)}li[data-v-44f7d340]{list-style-type:initial;margin-left:1rem;padding:.25rem 0}.margin-bottom[data-v-44f7d340]{margin-bottom:.75rem}.modal-container[data-v-44f7d340]{padding:16px}.modal-container button[data-v-44f7d340]{margin-top:16px;margin-left:8px}.button-row[data-v-44f7d340]{display:flex;justify-content:end}")),document.head.appendChild(t)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();
import{r as p,n as a,G as h,t as y,w as _,x as m,s as f,N as g,l as b,D as k,e as c,v as d,y as v,z as C,V as u,m as x,A as w}from"./_plugin-vue2_normalizer-CM8922Se.chunk.mjs";import{N as A}from"./NcSettingsSection-B7SqDXbX-MTu35bcx.chunk.mjs";import{u as S}from"./useModelMigration-EhAWvqDD-D3MpQ3L_.chunk.mjs";import{l as B}from"./logger-D1aKQjHF.chunk.mjs";p();const z={name:"CheckboxBlankOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var N=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon checkbox-blank-outline-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},V=[],T=a(z,N,V,!1,null,null);const E=T.exports,$={name:"MinusBoxIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var M=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon minus-box-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M17,13H7V11H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},I=[],D=a($,M,I,!1,null,null);const R=D.exports,H={name:"CheckboxMarkedIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var L=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon checkbox-marked-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},O=[],W=a(H,L,O,!1,null,null);const K=W.exports,P={name:"RadioboxMarkedIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var F=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon radiobox-marked-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},Z=[],j=a(P,F,Z,!1,null,null);const G=j.exports,q={name:"RadioboxBlankIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Y=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon radiobox-blank-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},U=[],J=a(q,Y,U,!1,null,null);const Q=J.exports,X={name:"ToggleSwitchOffIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ee=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon toggle-switch-off-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M17,7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7M7,15A3,3 0 0,1 4,12A3,3 0 0,1 7,9A3,3 0 0,1 10,12A3,3 0 0,1 7,15Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},te=[],ne=a(X,ee,te,!1,null,null);const ie=ne.exports,ae={name:"ToggleSwitchIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var se=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon toggle-switch-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M17,7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7M17,15A3,3 0 0,1 14,12A3,3 0 0,1 17,9A3,3 0 0,1 20,12A3,3 0 0,1 17,15Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},re=[],oe=a(ae,se,re,!1,null,null);const le=oe.exports,r="checkbox",o="radio",s="switch",l="button",ce={name:"NcCheckboxContent",components:{NcLoadingIcon:m},props:{id:{type:String,default:null},iconClass:{type:[String,Object],default:null},textClass:{type:[String,Object],default:null},type:{type:String,default:"checkbox",validator:e=>[r,o,s,l].includes(e)},buttonVariant:{type:Boolean,default:!1},isChecked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:Number,default:24}},computed:{isButtonType(){return this.type===l},checkboxRadioIconElement(){return this.type===o?this.isChecked?G:Q:this.type===s?this.isChecked?le:ie:this.indeterminate?R:this.isChecked?K:E}}};var de=function(){var e=this,n=e._self._c;return n("span",{staticClass:"checkbox-content",class:{["checkbox-content-"+e.type]:!0,"checkbox-content--button-variant":e.buttonVariant,"checkbox-content--has-text":!!e.$slots.default},attrs:{id:e.isButtonType?void 0:"".concat(e.id,"-label")}},[n("span",{class:{"checkbox-content__icon":!0,"checkbox-content__icon--checked":e.isChecked,[e.iconClass]:!0},attrs:{"aria-hidden":!0,inert:""}},[e._t("icon",function(){return[e.loading?n("NcLoadingIcon"):e.buttonVariant?e._e():n(e.checkboxRadioIconElement,{tag:"component",attrs:{size:e.size}})]},{checked:e.isChecked,loading:e.loading})],2),e.$slots.default?n("span",{class:["checkbox-content__text",e.textClass]},[e._t("default")],2):e._e()])},ue=[],pe=a(ce,de,ue,!1,null,"38a6f3e5");const he=pe.exports,ye={name:"NcCheckboxRadioSwitch",components:{NcCheckboxContent:he},inheritAttrs:!1,model:{prop:"modelValue",event:"update:modelValue"},props:{id:{type:String,default:()=>"checkbox-radio-switch-"+h(),validator:e=>e.trim()!==""},wrapperId:{type:String,default:null},name:{type:String,default:null},ariaLabel:{type:String,default:""},type:{type:String,default:"checkbox",validator:e=>[r,o,s,l].includes(e)},buttonVariant:{type:Boolean,default:!1},buttonVariantGrouped:{type:String,default:"no",validator:e=>["no","vertical","horizontal"].includes(e)},checked:{type:[Boolean,Array,String],default:void 0},modelValue:{type:[Boolean,Array,String],default:!1},value:{type:String,default:null},disabled:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},required:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},wrapperElement:{type:String,default:null}},emits:["update:checked","update:modelValue","update:model-value"],setup(){return{model:S("checked","update:checked")}},computed:{dataAttrs(){return Object.fromEntries(Object.entries(this.$attrs).filter(([e])=>e.startsWith("data-")))},nonDataAttrs(){return Object.fromEntries(Object.entries(this.$attrs).filter(([e])=>!e.startsWith("data-")))},isButtonType(){return this.type===l},computedWrapperElement(){return this.isButtonType?"button":this.wrapperElement!==null?this.wrapperElement:"span"},listeners(){return this.isButtonType?{click:this.onToggle}:{change:this.onToggle}},size(){return this.type===s?36:24},cssVars(){return{"--icon-size":this.size+"px","--icon-height":(this.type===s?16:this.size)+"px"}},inputType(){return[r,o,l].includes(this.type)?this.type:r},isChecked(){return this.value!==null?Array.isArray(this.model)?[...this.model].indexOf(this.value)>-1:this.model===this.value:this.model===!0},hasIndeterminate(){return[r,o].includes(this.inputType)}},mounted(){if(this.name&&this.type===r&&!Array.isArray(this.model))throw new Error("When using groups of checkboxes, the updated value will be an array.");if(this.name&&this.type===s)throw new Error("Switches are not made to be used for data sets. Please use checkboxes instead.");if(typeof this.model!="boolean"&&this.type===s)throw new Error("Switches can only be used with boolean as checked prop.")},methods:{t:y,n:_,onToggle(e){if(this.disabled||e.target.tagName.toLowerCase()==="a")return;if(this.type===o){this.model=this.value;return}if(this.type===s){this.model=!this.isChecked;return}if(typeof this.model=="boolean"){this.model=!this.model;return}const n=this.getInputsSet().filter(i=>i.checked).map(i=>i.value);n.includes(this.value)?this.model=n.filter(i=>i!==this.value):this.model=[...n,this.value]},getInputsSet(){return[...document.getElementsByName(this.name)]}}};var _e=function(){var e=this,n=e._self._c;return n(e.computedWrapperElement,e._g(e._b({tag:"component",staticClass:"checkbox-radio-switch",class:{["checkbox-radio-switch-"+e.type]:e.type,"checkbox-radio-switch--checked":e.isChecked,"checkbox-radio-switch--disabled":e.disabled,"checkbox-radio-switch--indeterminate":e.hasIndeterminate?e.indeterminate:!1,"checkbox-radio-switch--button-variant":e.buttonVariant,"checkbox-radio-switch--button-variant-v-grouped":e.buttonVariant&&e.buttonVariantGrouped==="vertical","checkbox-radio-switch--button-variant-h-grouped":e.buttonVariant&&e.buttonVariantGrouped==="horizontal","button-vue":e.isButtonType},style:e.cssVars,attrs:{id:e.wrapperId,"aria-label":e.isButtonType&&e.ariaLabel?e.ariaLabel:void 0,type:e.isButtonType?"button":null}},"component",e.isButtonType?e.$attrs:e.dataAttrs,!1),e.isButtonType?e.listeners:null),[e.isButtonType?e._e():n("input",e._g(e._b({staticClass:"checkbox-radio-switch__input",attrs:{id:e.id,"aria-labelledby":!e.isButtonType&&!e.ariaLabel?"".concat(e.id,"-label"):null,"aria-label":e.ariaLabel||void 0,disabled:e.disabled,type:e.inputType,required:e.required,name:e.name},domProps:{value:e.value,checked:e.isChecked,indeterminate:e.hasIndeterminate?e.indeterminate:null}},"input",e.nonDataAttrs,!1),e.listeners)),n("NcCheckboxContent",{staticClass:"checkbox-radio-switch__content",attrs:{id:e.id,"icon-class":"checkbox-radio-switch__icon","text-class":"checkbox-radio-switch__text",type:e.type,indeterminate:e.hasIndeterminate?e.indeterminate:!1,"button-variant":e.buttonVariant,"is-checked":e.isChecked,loading:e.loading,size:e.size},nativeOn:{click:function(i){return e.onToggle.apply(null,arguments)}},scopedSlots:e._u([{key:"icon",fn:function(){return[e._t("icon")]},proxy:!0}],null,!0)},[e._t("default")],2)],1)},me=[],fe=a(ye,_e,me,!1,null,"ff5243c5");const ge=fe.exports,be={name:"SecuritySection",components:{NcSettingsSection:A,NcButton:g,NcCheckboxRadioSwitch:ge},data(){return{hasKey:b("end_to_end_encryption","hasKey"),shouldDisplayWarning:!1,deleteEncryptedFiles:!1}},computed:{confirmationDialog(){return new k().setName(t("end_to_end_encryption","Confirm resetting keys")).setText(t("end_to_end_encryption","This is the final warning: Do you really want to reset your keys?")).addButton({label:t("end_to_end_encryption","Cancel"),type:"tertiary",callback:()=>{this.deleteEncryptedFiles=!1,this.shouldDisplayWarning=!1}}).addButton({label:t("end_to_end_encryption","Reset keys"),type:"error",callback:this.resetEncryption.bind(this)}).build()},encryptionState(){return this.hasKey?t("end_to_end_encryption","End-to-end encryption is currently enabled and correctly setup."):t("end_to_end_encryption","End-to-end encryption is currently disabled. You can set it up with the {productName} clients.",{productName:OCA.Theming?OCA.Theming.name:"Nextcloud"})}},methods:{showDialog(){this.confirmationDialog.show()},startResetProcess(){this.shouldDisplayWarning=!0},async deletePrivateKey(){var n,i;const{data:e}=await c.delete(d("/apps/end_to_end_encryption/api/v1/private-key"));return this.handleResponse({status:(i=(n=e.ocs)==null?void 0:n.meta)==null?void 0:i.status,error:null})},async deletePublicKey(){var n,i;const{data:e}=await c.delete(d("/apps/end_to_end_encryption/api/v1/public-key"));return this.handleResponse({status:(i=(n=e.ocs)==null?void 0:n.meta)==null?void 0:i.status,error:null})},async deleteFiles(){var e,n;if(this.deleteEncryptedFiles){const{data:i}=await c.delete(d("/apps/end_to_end_encryption/api/v1/encrypted-files"));return this.handleResponse({status:(n=(e=i.ocs)==null?void 0:e.meta)==null?void 0:n.status,error:null})}return!0},async resetEncryption(){try{let e=!0;e=e&&await this.deletePrivateKey(),e=e&&await this.deletePublicKey(),e=e&&await this.deleteFiles(),e&&v(t("end_to_end_encryption","End-to-end encryption keys reset"))}catch(e){this.handleResponse({errorMessage:t("end_to_end_encryption","Unable to reset end-to-end encryption"),error:e})}finally{this.shouldDisplayWarning=!1,this.hasKey=!1}},async handleResponse({status:e,errorMessage:n,error:i}){return e!=="ok"?(C(n),B.error(n,{error:i}),!1):!0}}};var ke=function(){var e=this,n=e._self._c;return n("NcSettingsSection",{attrs:{name:e.t("end_to_end_encryption","End-to-end encryption"),description:e.encryptionState}},[n("NcButton",{attrs:{disabled:!e.hasKey||e.shouldDisplayWarning,type:e.hasKey&&!e.shouldDisplayWarning?"error":"secondary"},on:{click:function(i){return e.startResetProcess()}}},[e._v(" "+e._s(e.t("end_to_end_encryption","Reset end-to-end encryption"))+" ")]),e.shouldDisplayWarning&&e.hasKey?n("div",{staticClass:"notecard warning",attrs:{role:"alert"}},[n("p",[n("strong",[e._v(e._s(e.t("end_to_end_encryption","Please read carefully before resetting your end-to-end encryption keys")))])]),n("ul",[n("li",[e._v(e._s(e.t("end_to_end_encryption","Once your end-to-end encryption keys are reset, all files stored in your encrypted folder will be inaccessible.")))]),n("li",[e._v(e._s(e.t("end_to_end_encryption","You should only reset your end-to-end encryption keys if you lost your secure key words (mnemonic).")))]),n("li",[e._v(e._s(e.t("end_to_end_encryption","Check on all connected devices if you can retrieve your mnemonic.")))]),n("li",[e._v(e._s(e.t("end_to_end_encryption","Any still connected device might cause problems after deleting the keys, so it is better to disconnect and reconnect the devices again.")))])]),n("NcCheckboxRadioSwitch",{staticClass:"margin-bottom",attrs:{checked:e.deleteEncryptedFiles,type:"switch"},on:{"update:checked":function(i){e.deleteEncryptedFiles=i}}},[e._v(" "+e._s(e.t("end_to_end_encryption","Delete existing encrypted files"))+" ")]),n("NcButton",{attrs:{type:"error"},on:{click:e.showDialog}},[e._v(" "+e._s(e.t("end_to_end_encryption","Confirm and reset end-to-end encryption"))+" ")])],1):e._e()],1)},ve=[],Ce=f(be,ke,ve,!1,null,"44f7d340");const xe=Ce.exports;u.prototype.t=x,u.prototype.n=w;const we=u.extend(xe);new we({}).$mount("#security-end-to-end");
