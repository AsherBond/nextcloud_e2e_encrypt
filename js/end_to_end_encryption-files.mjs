(function(){"use strict";try{if(typeof document<"u"){var i=document.createElement("style");i.appendChild(document.createTextNode("/*!\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */.toastify.dialogs{min-width:200px;background:none;background-color:var(--color-main-background);color:var(--color-main-text);box-shadow:0 0 6px 0 var(--color-box-shadow);padding:0 12px;margin-top:45px;position:fixed;z-index:10100;border-radius:var(--border-radius);display:flex;align-items:center}.toastify.dialogs .toast-undo-container{display:flex;align-items:center}.toastify.dialogs .toast-undo-button,.toastify.dialogs .toast-close{position:static;overflow:hidden;box-sizing:border-box;min-width:44px;height:100%;padding:12px;white-space:nowrap;background-repeat:no-repeat;background-position:center;background-color:transparent;min-height:0}.toastify.dialogs .toast-undo-button.toast-close,.toastify.dialogs .toast-close.toast-close{text-indent:0;opacity:.4;border:none;min-height:44px;margin-left:10px;font-size:0}.toastify.dialogs .toast-undo-button.toast-close:before,.toastify.dialogs .toast-close.toast-close:before{background-image:url(\"data:image/svg+xml,%3csvg%20viewBox='0%200%2016%2016'%20height='16'%20width='16'%20xmlns='http://www.w3.org/2000/svg'%20xml:space='preserve'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2'%3e%3cpath%20d='M6.4%2019%205%2017.6l5.6-5.6L5%206.4%206.4%205l5.6%205.6L17.6%205%2019%206.4%2013.4%2012l5.6%205.6-1.4%201.4-5.6-5.6L6.4%2019Z'%20style='fill-rule:nonzero'%20transform='matrix(.85714%200%200%20.85714%20-2.286%20-2.286)'/%3e%3c/svg%3e\");content:\" \";filter:var(--background-invert-if-dark);display:inline-block;width:16px;height:16px}.toastify.dialogs .toast-undo-button.toast-undo-button,.toastify.dialogs .toast-close.toast-undo-button{height:calc(100% - 6px);margin:3px 3px 3px 12px}.toastify.dialogs .toast-undo-button:hover,.toastify.dialogs .toast-undo-button:focus,.toastify.dialogs .toast-undo-button:active,.toastify.dialogs .toast-close:hover,.toastify.dialogs .toast-close:focus,.toastify.dialogs .toast-close:active{cursor:pointer;opacity:1}.toastify.dialogs.toastify-top{right:10px}.toastify.dialogs.toast-with-click{cursor:pointer}.toastify.dialogs.toast-error{border-left:3px solid var(--color-error)}.toastify.dialogs.toast-info{border-left:3px solid var(--color-primary)}.toastify.dialogs.toast-warning{border-left:3px solid var(--color-warning)}.toastify.dialogs.toast-success,.toastify.dialogs.toast-undo{border-left:3px solid var(--color-success)}.theme--dark .toastify.dialogs .toast-close.toast-close:before{background-image:url(\"data:image/svg+xml,%3csvg%20viewBox='0%200%2016%2016'%20height='16'%20width='16'%20xmlns='http://www.w3.org/2000/svg'%20xml:space='preserve'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2'%3e%3cpath%20d='M6.4%2019%205%2017.6l5.6-5.6L5%206.4%206.4%205l5.6%205.6L17.6%205%2019%206.4%2013.4%2012l5.6%205.6-1.4%201.4-5.6-5.6L6.4%2019Z'%20style='fill:%23fff;fill-rule:nonzero'%20transform='matrix(.85714%200%200%20.85714%20-2.286%20-2.286)'/%3e%3c/svg%3e\")}.nc-generic-dialog .dialog__actions{justify-content:space-between;min-width:calc(100% - 12px)}/*!\n * SPDX-FileCopyrightText: 2023-2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */._file-picker__file-icon_19mjt_9{width:32px;height:32px;min-width:32px;min-height:32px;background-repeat:no-repeat;background-size:contain;display:flex;justify-content:center}tr.file-picker__row[data-v-15187afc]{height:var(--row-height, 50px)}tr.file-picker__row td[data-v-15187afc]{cursor:pointer;overflow:hidden;text-overflow:ellipsis;border-bottom:none}tr.file-picker__row td.row-checkbox[data-v-15187afc]{padding:0 2px}tr.file-picker__row td[data-v-15187afc]:not(.row-checkbox){padding-inline:14px 0}tr.file-picker__row td.row-size[data-v-15187afc]{text-align:end;padding-inline:0 14px}tr.file-picker__row td.row-name[data-v-15187afc]{padding-inline:2px 0}@keyframes gradient-15187afc{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.loading-row .row-checkbox[data-v-15187afc]{text-align:center!important}.loading-row span[data-v-15187afc]{display:inline-block;height:24px;background:linear-gradient(to right,var(--color-background-darker),var(--color-text-maxcontrast),var(--color-background-darker));background-size:600px 100%;border-radius:var(--border-radius);animation:gradient-15187afc 12s ease infinite}.loading-row .row-wrapper[data-v-15187afc]{display:inline-flex;align-items:center}.loading-row .row-checkbox span[data-v-15187afc]{width:24px}.loading-row .row-name span[data-v-15187afc]:last-of-type{margin-inline-start:6px;width:130px}.loading-row .row-size span[data-v-15187afc]{width:80px}.loading-row .row-modified span[data-v-15187afc]{width:90px}/*!\n* SPDX-FileCopyrightText: 2023-2024 Nextcloud GmbH and Nextcloud contributors\n* SPDX-License-Identifier: AGPL-3.0-or-later\n*/tr.file-picker__row[data-v-cb12dccb]{height:var(--row-height, 50px)}tr.file-picker__row td[data-v-cb12dccb]{cursor:pointer;overflow:hidden;text-overflow:ellipsis;border-bottom:none}tr.file-picker__row td.row-checkbox[data-v-cb12dccb]{padding:0 2px}tr.file-picker__row td[data-v-cb12dccb]:not(.row-checkbox){padding-inline:14px 0}tr.file-picker__row td.row-size[data-v-cb12dccb]{text-align:end;padding-inline:0 14px}tr.file-picker__row td.row-name[data-v-cb12dccb]{padding-inline:2px 0}.file-picker__row--selected[data-v-cb12dccb]{background-color:var(--color-background-dark)}.file-picker__row[data-v-cb12dccb]:hover{background-color:var(--color-background-hover)}.file-picker__name-container[data-v-cb12dccb]{display:flex;justify-content:start;align-items:center;height:100%}.file-picker__file-name[data-v-cb12dccb]{padding-inline-start:6px;min-width:0;overflow:hidden;text-overflow:ellipsis}.file-picker__file-extension[data-v-cb12dccb]{color:var(--color-text-maxcontrast);min-width:fit-content}.file-picker__header-preview[data-v-006fdbd0]{width:22px;height:32px;flex:0 0 auto}.file-picker__files[data-v-006fdbd0]{margin:2px;margin-inline-start:12px;overflow:scroll auto}.file-picker__files table[data-v-006fdbd0]{width:100%;max-height:100%;table-layout:fixed}.file-picker__files th[data-v-006fdbd0]{position:-webkit-sticky;position:sticky;z-index:1;top:0;background-color:var(--color-main-background);padding:2px}.file-picker__files th .header-wrapper[data-v-006fdbd0]{display:flex}.file-picker__files th.row-checkbox[data-v-006fdbd0]{width:44px}.file-picker__files th.row-name[data-v-006fdbd0]{width:230px}.file-picker__files th.row-size[data-v-006fdbd0]{width:100px}.file-picker__files th.row-modified[data-v-006fdbd0]{width:120px}.file-picker__files th[data-v-006fdbd0]:not(.row-size) .button-vue__wrapper{justify-content:start;flex-direction:row-reverse}.file-picker__files th[data-v-006fdbd0]:not(.row-size) .button-vue{padding-inline:16px 4px}.file-picker__files th.row-size[data-v-006fdbd0] .button-vue__wrapper{justify-content:end}.file-picker__files th[data-v-006fdbd0] .button-vue__wrapper{color:var(--color-text-maxcontrast)}.file-picker__files th[data-v-006fdbd0] .button-vue__wrapper .button-vue__text{font-weight:400}.file-picker__breadcrumbs[data-v-b357227a]{flex-grow:0!important}.file-picker__side[data-v-b42054b8]{display:flex;flex-direction:column;align-items:stretch;gap:.5rem;min-width:200px;padding:2px;margin-block-start:7px;overflow:auto}.file-picker__side[data-v-b42054b8] .button-vue__wrapper{justify-content:start}.file-picker__filter-input[data-v-b42054b8]{margin-block:7px;max-width:260px}@media (max-width: 736px){.file-picker__side[data-v-b42054b8]{flex-direction:row;min-width:unset}}@media (max-width: 512px){.file-picker__side[data-v-b42054b8]{flex-direction:row;min-width:unset}.file-picker__filter-input[data-v-b42054b8]{max-width:unset}}.file-picker__navigation{padding-inline:8px 2px}.file-picker__navigation,.file-picker__navigation *{box-sizing:border-box}.file-picker__navigation .v-select.select{min-width:220px}@media (min-width: 513px) and (max-width: 736px){.file-picker__navigation{gap:11px}}@media (max-width: 512px){.file-picker__navigation{flex-direction:column-reverse!important}}.file-picker__view[data-v-20b719ba]{height:50px;display:flex;justify-content:start;align-items:center}.file-picker__view h3[data-v-20b719ba]{font-weight:700;height:fit-content;margin:0}.file-picker__main[data-v-20b719ba]{box-sizing:border-box;width:100%;display:flex;flex-direction:column;min-height:0;flex:1;padding-inline:2px}.file-picker__main *[data-v-20b719ba]{box-sizing:border-box}[data-v-20b719ba] .file-picker{height:min(80vh,800px)!important}@media (max-width: 512px){[data-v-20b719ba] .file-picker{height:calc(100% - 16px - var(--default-clickable-area))!important}}[data-v-20b719ba] .file-picker__content{display:flex;flex-direction:column;overflow:hidden}.material-design-icon[data-v-e4fac465]{display:flex;align-self:center;justify-self:center;align-items:center;justify-content:center}.input-field[data-v-e4fac465]{--input-border-radius: var(--border-radius-element, var(--border-radius-large));--input-padding-start: var(--border-radius-large);--input-padding-end: var(--border-radius-large);position:relative;width:100%;margin-block-start:6px}.input-field--disabled[data-v-e4fac465]{opacity:.4;filter:saturate(.4)}.input-field--label-outside[data-v-e4fac465]{margin-block-start:0}.input-field--leading-icon[data-v-e4fac465]{--input-padding-start: calc(var(--default-clickable-area) - var(--default-grid-baseline))}.input-field--trailing-icon[data-v-e4fac465]{--input-padding-end: calc(var(--default-clickable-area) - var(--default-grid-baseline))}.input-field--pill[data-v-e4fac465]{--input-border-radius: var(--border-radius-pill)}.input-field__main-wrapper[data-v-e4fac465]{height:var(--default-clickable-area);position:relative}.input-field__input[data-v-e4fac465]{--input-border-width-offset: calc(var(--border-width-input-focused, 2px) - var(--border-width-input, 2px));background-color:var(--color-main-background);color:var(--color-main-text);border:var(--border-width-input, 2px) solid var(--color-border-maxcontrast);border-radius:var(--input-border-radius);cursor:pointer;-webkit-appearance:textfield!important;-moz-appearance:textfield!important;appearance:textfield!important;font-size:var(--default-font-size);text-overflow:ellipsis;height:calc(var(--default-clickable-area) - 2 * var(--input-border-width-offset))!important;width:100%;padding-inline:calc(var(--input-padding-start) + var(--input-border-width-offset)) calc(var(--input-padding-end) + var(--input-border-width-offset));padding-block:var(--input-border-width-offset)}.input-field__input[data-v-e4fac465]::placeholder{color:var(--color-text-maxcontrast)}.input-field__input[data-v-e4fac465]:active:not([disabled]),.input-field__input[data-v-e4fac465]:hover:not([disabled]),.input-field__input[data-v-e4fac465]:focus:not([disabled]){border-color:var(--color-main-text);border-width:var(--border-width-input-focused, 2px);box-shadow:0 0 0 2px var(--color-main-background)!important;--input-border-width-offset: 0px}.input-field__input:focus+.input-field__label[data-v-e4fac465],.input-field__input:hover:not(:placeholder-shown)+.input-field__label[data-v-e4fac465]{color:var(--color-main-text)}.input-field__input[data-v-e4fac465]:focus{cursor:text}.input-field__input[data-v-e4fac465]:disabled{cursor:default}.input-field__input[data-v-e4fac465]:focus-visible{box-shadow:unset!important}.input-field__input--success[data-v-e4fac465]{border-color:var(--color-success)!important}.input-field__input--success[data-v-e4fac465]:focus-visible{box-shadow:#f8fafc 0 0 0 2px,var(--color-primary-element) 0 0 0 4px,#0000000d 0 1px 2px}.input-field__input--error[data-v-e4fac465],.input-field__input[data-v-e4fac465]:invalid{border-color:var(--color-error)!important}.input-field__input--error[data-v-e4fac465]:focus-visible,.input-field__input[data-v-e4fac465]:invalid:focus-visible{box-shadow:#f8fafc 0 0 0 2px,var(--color-primary-element) 0 0 0 4px,#0000000d 0 1px 2px}.input-field:not(.input-field--label-outside) .input-field__input[data-v-e4fac465]:not(:focus)::placeholder{opacity:0}.input-field__label[data-v-e4fac465]{--input-label-font-size: var(--default-font-size);position:absolute;margin-inline:var(--input-padding-start) var(--input-padding-end);max-width:fit-content;font-size:var(--input-label-font-size);inset-block-start:calc((var(--default-clickable-area) - 1lh) / 2);inset-inline:var(--border-width-input-focused, 2px);color:var(--color-text-maxcontrast);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;pointer-events:none;transition:height var(--animation-quick),inset-block-start var(--animation-quick),font-size var(--animation-quick),color var(--animation-quick),background-color var(--animation-quick) var(--animation-slow)}.input-field__input:focus+.input-field__label[data-v-e4fac465],.input-field__input:not(:placeholder-shown)+.input-field__label[data-v-e4fac465]{--input-label-font-size: 13px;line-height:1.5;inset-block-start:calc(-1.5 * var(--input-label-font-size) / 2);font-weight:500;border-radius:var(--default-grid-baseline) var(--default-grid-baseline) 0 0;background-color:var(--color-main-background);padding-inline:var(--default-grid-baseline);margin-inline:calc(var(--input-padding-start) - var(--default-grid-baseline)) calc(var(--input-padding-end) - var(--default-grid-baseline));transition:height var(--animation-quick),inset-block-start var(--animation-quick),font-size var(--animation-quick),color var(--animation-quick)}.input-field__icon[data-v-e4fac465]{position:absolute;height:var(--default-clickable-area);width:var(--default-clickable-area);display:flex;align-items:center;justify-content:center;opacity:.7;inset-block-end:0}.input-field__icon--leading[data-v-e4fac465]{inset-inline-start:0px}.input-field__icon--trailing[data-v-e4fac465]{inset-inline-end:0px}.input-field__trailing-button[data-v-e4fac465]{--button-size: calc(var(--default-clickable-area) - 2 * var(--border-width-input-focused, 2px)) !important;--button-radius: calc(var(--input-border-radius) - var(--border-width-input-focused, 2px))}.input-field__trailing-button.button-vue[data-v-e4fac465]{position:absolute;top:var(--border-width-input-focused, 2px);inset-inline-end:var(--border-width-input-focused, 2px)}.input-field__trailing-button.button-vue[data-v-e4fac465]:focus-visible{box-shadow:none!important}.input-field__helper-text-message[data-v-e4fac465]{padding-block:4px;padding-inline:var(--border-radius-large);display:flex;align-items:center;color:var(--color-text-maxcontrast)}.input-field__helper-text-message__icon[data-v-e4fac465]{margin-inline-end:8px}.input-field__helper-text-message--error[data-v-e4fac465]{color:var(--color-error-text)}.input-field__helper-text-message--success[data-v-e4fac465]{color:var(--color-success-text)}")),document.head.appendChild(i)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
var Lr=Object.defineProperty,jr=Object.defineProperties;var Fr=Object.getOwnPropertyDescriptors;var hn=Object.getOwnPropertySymbols;var Dr=Object.prototype.hasOwnProperty,kr=Object.prototype.propertyIsEnumerable;var pn=t=>{throw TypeError(t)};var me=(t,e,n)=>e in t?Lr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,st=(t,e)=>{for(var n in e||(e={}))Dr.call(e,n)&&me(t,n,e[n]);if(hn)for(var n of hn(e))kr.call(e,n)&&me(t,n,e[n]);return t},gt=(t,e)=>jr(t,Fr(e));var j=(t,e,n)=>me(t,typeof e!="symbol"?e+"":e,n),ve=(t,e,n)=>e.has(t)||pn("Cannot "+n);var I=(t,e,n)=>(ve(t,e,"read from private field"),n?n.call(t):e.get(t)),ot=(t,e,n)=>e.has(t)?pn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),M=(t,e,n,r)=>(ve(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),xt=(t,e,n)=>(ve(t,e,"access private method"),n);import{p as Gt,g as Zt,l as Ge,a as _e,b as he,U as Mr,o as Ur,c as Br,d as ct,e as Kn,v as Zn,n as Ht,N as Vr,G as Gr,r as zr,C as Xr,t as ye,f as Wr,h as qr,i as Hr,j as be,k as fn,m as dn,q as Kr,s as Zr,u as Yr,w as Jr}from"./_plugin-vue2_normalizer-BbbzK5di.chunk.mjs";import{u as Yn}from"./useModelMigration-EhAWvqDD-B2-KQ5K9.chunk.mjs";import{A as Qr}from"./ArrowRight-CY2b9hgN-Ce1FaD_9.chunk.mjs";import{N as ti}from"./NcCheckboxRadioSwitch-R1y0mLbC-DrImsm8Y.chunk.mjs";var Ee={},ei={2:t=>{function e(i,s,u){i instanceof RegExp&&(i=n(i,u)),s instanceof RegExp&&(s=n(s,u));var a=r(i,s,u);return a&&{start:a[0],end:a[1],pre:u.slice(0,a[0]),body:u.slice(a[0]+i.length,a[1]),post:u.slice(a[1]+s.length)}}function n(i,s){var u=s.match(i);return u?u[0]:null}function r(i,s,u){var a,c,o,l,p,h=u.indexOf(i),f=u.indexOf(s,h+1),d=h;if(h>=0&&f>0){for(a=[],o=u.length;d>=0&&!p;)d==h?(a.push(d),h=u.indexOf(i,d+1)):a.length==1?p=[a.pop(),f]:((c=a.pop())<o&&(o=c,l=f),f=u.indexOf(s,d+1)),d=h<f&&h>=0?h:f;a.length&&(p=[o,l])}return p}t.exports=e,e.range=r},101:function(t,e,n){var r;t=n.nmd(t),function(i){var s=(t&&t.exports,typeof Zt=="object"&&Zt);s.global!==s&&s.window;var u=function(p){this.message=p};(u.prototype=new Error).name="InvalidCharacterError";var a=function(p){throw new u(p)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=/[\t\n\f\r ]/g,l={encode:function(p){p=String(p),/[^\0-\xFF]/.test(p)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var h,f,d,g,v=p.length%3,E="",m=-1,y=p.length-v;++m<y;)h=p.charCodeAt(m)<<16,f=p.charCodeAt(++m)<<8,d=p.charCodeAt(++m),E+=c.charAt((g=h+f+d)>>18&63)+c.charAt(g>>12&63)+c.charAt(g>>6&63)+c.charAt(63&g);return v==2?(h=p.charCodeAt(m)<<8,f=p.charCodeAt(++m),E+=c.charAt((g=h+f)>>10)+c.charAt(g>>4&63)+c.charAt(g<<2&63)+"="):v==1&&(g=p.charCodeAt(m),E+=c.charAt(g>>2)+c.charAt(g<<4&63)+"=="),E},decode:function(p){var h=(p=String(p).replace(o,"")).length;h%4==0&&(h=(p=p.replace(/==?$/,"")).length),(h%4==1||/[^+a-zA-Z0-9/]/.test(p))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var f,d,g=0,v="",E=-1;++E<h;)d=c.indexOf(p.charAt(E)),f=g%4?64*f+d:d,g++%4&&(v+=String.fromCharCode(255&f>>(-2*g&6)));return v},version:"1.0.0"};(r=function(){return l}.call(e,n,e,t))===void 0||(t.exports=r)}()},172:(t,e)=>{e.d=function(n){if(!n)return 0;for(var r=(n=n.toString()).length,i=n.length;i--;){var s=n.charCodeAt(i);56320<=s&&s<=57343&&i--,127<s&&s<=2047?r++:2047<s&&s<=65535&&(r+=2)}return r}},526:t=>{var e={utf8:{stringToBytes:function(n){return e.bin.stringToBytes(unescape(encodeURIComponent(n)))},bytesToString:function(n){return decodeURIComponent(escape(e.bin.bytesToString(n)))}},bin:{stringToBytes:function(n){for(var r=[],i=0;i<n.length;i++)r.push(255&n.charCodeAt(i));return r},bytesToString:function(n){for(var r=[],i=0;i<n.length;i++)r.push(String.fromCharCode(n[i]));return r.join("")}}};t.exports=e},298:t=>{var e,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(r,i){return r<<i|r>>>32-i},rotr:function(r,i){return r<<32-i|r>>>i},endian:function(r){if(r.constructor==Number)return 16711935&n.rotl(r,8)|4278255360&n.rotl(r,24);for(var i=0;i<r.length;i++)r[i]=n.endian(r[i]);return r},randomBytes:function(r){for(var i=[];r>0;r--)i.push(Math.floor(256*Math.random()));return i},bytesToWords:function(r){for(var i=[],s=0,u=0;s<r.length;s++,u+=8)i[u>>>5]|=r[s]<<24-u%32;return i},wordsToBytes:function(r){for(var i=[],s=0;s<32*r.length;s+=8)i.push(r[s>>>5]>>>24-s%32&255);return i},bytesToHex:function(r){for(var i=[],s=0;s<r.length;s++)i.push((r[s]>>>4).toString(16)),i.push((15&r[s]).toString(16));return i.join("")},hexToBytes:function(r){for(var i=[],s=0;s<r.length;s+=2)i.push(parseInt(r.substr(s,2),16));return i},bytesToBase64:function(r){for(var i=[],s=0;s<r.length;s+=3)for(var u=r[s]<<16|r[s+1]<<8|r[s+2],a=0;a<4;a++)8*s+6*a<=8*r.length?i.push(e.charAt(u>>>6*(3-a)&63)):i.push("=");return i.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/gi,"");for(var i=[],s=0,u=0;s<r.length;u=++s%4)u!=0&&i.push((e.indexOf(r.charAt(s-1))&Math.pow(2,-2*u+8)-1)<<2*u|e.indexOf(r.charAt(s))>>>6-2*u);return i}},t.exports=n},635:(t,e,n)=>{const r=n(31),i=n(338),s=n(221);t.exports={XMLParser:i,XMLValidator:r,XMLBuilder:s}},705:(t,e)=>{const n=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r="["+n+"]["+n+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+r+"$");e.isExist=function(s){return s!==void 0},e.isEmptyObject=function(s){return Object.keys(s).length===0},e.merge=function(s,u,a){if(u){const c=Object.keys(u),o=c.length;for(let l=0;l<o;l++)s[c[l]]=a==="strict"?[u[c[l]]]:u[c[l]]}},e.getValue=function(s){return e.isExist(s)?s:""},e.isName=function(s){return i.exec(s)!=null},e.getAllMatches=function(s,u){const a=[];let c=u.exec(s);for(;c;){const o=[];o.startIndex=u.lastIndex-c[0].length;const l=c.length;for(let p=0;p<l;p++)o.push(c[p]);a.push(o),c=u.exec(s)}return a},e.nameRegexp=r},31:(t,e,n)=>{const r=n(705),i={allowBooleanAttributes:!1,unpairedTags:[]};function s(m){return m===" "||m==="	"||m==="\n"||m==="\r"}function u(m,y){const w=y;for(;y<m.length;y++)if(!(m[y]!="?"&&m[y]!=" ")){const b=m.substr(w,y-w);if(y>5&&b==="xml")return d("InvalidXml","XML declaration allowed only at the start of the document.",v(m,y));if(m[y]=="?"&&m[y+1]==">"){y++;break}}return y}function a(m,y){if(m.length>y+5&&m[y+1]==="-"&&m[y+2]==="-"){for(y+=3;y<m.length;y++)if(m[y]==="-"&&m[y+1]==="-"&&m[y+2]===">"){y+=2;break}}else if(m.length>y+8&&m[y+1]==="D"&&m[y+2]==="O"&&m[y+3]==="C"&&m[y+4]==="T"&&m[y+5]==="Y"&&m[y+6]==="P"&&m[y+7]==="E"){let w=1;for(y+=8;y<m.length;y++)if(m[y]==="<")w++;else if(m[y]===">"&&(w--,w===0))break}else if(m.length>y+9&&m[y+1]==="["&&m[y+2]==="C"&&m[y+3]==="D"&&m[y+4]==="A"&&m[y+5]==="T"&&m[y+6]==="A"&&m[y+7]==="["){for(y+=8;y<m.length;y++)if(m[y]==="]"&&m[y+1]==="]"&&m[y+2]===">"){y+=2;break}}return y}e.validate=function(m,y){y=Object.assign({},i,y);const w=[];let b=!1,A=!1;m[0]==="\uFEFF"&&(m=m.substr(1));for(let N=0;N<m.length;N++)if(m[N]==="<"&&m[N+1]==="?"){if(N+=2,N=u(m,N),N.err)return N}else{if(m[N]!=="<"){if(s(m[N]))continue;return d("InvalidChar","char '"+m[N]+"' is not expected.",v(m,N))}{let O=N;if(N++,m[N]==="!"){N=a(m,N);continue}{let R=!1;m[N]==="/"&&(R=!0,N++);let C="";for(;N<m.length&&m[N]!==">"&&m[N]!==" "&&m[N]!=="	"&&m[N]!=="\n"&&m[N]!=="\r";N++)C+=m[N];if(C=C.trim(),C[C.length-1]==="/"&&(C=C.substring(0,C.length-1),N--),x=C,!r.isName(x)){let _;return _=C.trim().length===0?"Invalid space after '<'.":"Tag '"+C+"' is an invalid name.",d("InvalidTag",_,v(m,N))}const P=l(m,N);if(P===!1)return d("InvalidAttr","Attributes for '"+C+"' have open quote.",v(m,N));let T=P.value;if(N=P.index,T[T.length-1]==="/"){const _=N-T.length;T=T.substring(0,T.length-1);const S=h(T,y);if(S!==!0)return d(S.err.code,S.err.msg,v(m,_+S.err.line));b=!0}else if(R){if(!P.tagClosed)return d("InvalidTag","Closing tag '"+C+"' doesn't have proper closing.",v(m,N));if(T.trim().length>0)return d("InvalidTag","Closing tag '"+C+"' can't have attributes or invalid starting.",v(m,O));if(w.length===0)return d("InvalidTag","Closing tag '"+C+"' has not been opened.",v(m,O));{const _=w.pop();if(C!==_.tagName){let S=v(m,_.tagStartPos);return d("InvalidTag","Expected closing tag '"+_.tagName+"' (opened in line "+S.line+", col "+S.col+") instead of closing tag '"+C+"'.",v(m,O))}w.length==0&&(A=!0)}}else{const _=h(T,y);if(_!==!0)return d(_.err.code,_.err.msg,v(m,N-T.length+_.err.line));if(A===!0)return d("InvalidXml","Multiple possible root nodes found.",v(m,N));y.unpairedTags.indexOf(C)!==-1||w.push({tagName:C,tagStartPos:O}),b=!0}for(N++;N<m.length;N++)if(m[N]==="<"){if(m[N+1]==="!"){N++,N=a(m,N);continue}if(m[N+1]!=="?")break;if(N=u(m,++N),N.err)return N}else if(m[N]==="&"){const _=f(m,N);if(_==-1)return d("InvalidChar","char '&' is not expected.",v(m,N));N=_}else if(A===!0&&!s(m[N]))return d("InvalidXml","Extra text at the end",v(m,N));m[N]==="<"&&N--}}}var x;return b?w.length==1?d("InvalidTag","Unclosed tag '"+w[0].tagName+"'.",v(m,w[0].tagStartPos)):!(w.length>0)||d("InvalidXml","Invalid '"+JSON.stringify(w.map(N=>N.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):d("InvalidXml","Start tag expected.",1)};const c='"',o="'";function l(m,y){let w="",b="",A=!1;for(;y<m.length;y++){if(m[y]===c||m[y]===o)b===""?b=m[y]:b!==m[y]||(b="");else if(m[y]===">"&&b===""){A=!0;break}w+=m[y]}return b===""&&{value:w,index:y,tagClosed:A}}const p=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function h(m,y){const w=r.getAllMatches(m,p),b={};for(let A=0;A<w.length;A++){if(w[A][1].length===0)return d("InvalidAttr","Attribute '"+w[A][2]+"' has no space in starting.",E(w[A]));if(w[A][3]!==void 0&&w[A][4]===void 0)return d("InvalidAttr","Attribute '"+w[A][2]+"' is without value.",E(w[A]));if(w[A][3]===void 0&&!y.allowBooleanAttributes)return d("InvalidAttr","boolean attribute '"+w[A][2]+"' is not allowed.",E(w[A]));const x=w[A][2];if(!g(x))return d("InvalidAttr","Attribute '"+x+"' is an invalid name.",E(w[A]));if(b.hasOwnProperty(x))return d("InvalidAttr","Attribute '"+x+"' is repeated.",E(w[A]));b[x]=1}return!0}function f(m,y){if(m[++y]===";")return-1;if(m[y]==="#")return function(b,A){let x=/\d/;for(b[A]==="x"&&(A++,x=/[\da-fA-F]/);A<b.length;A++){if(b[A]===";")return A;if(!b[A].match(x))break}return-1}(m,++y);let w=0;for(;y<m.length;y++,w++)if(!(m[y].match(/\w/)&&w<20)){if(m[y]===";")break;return-1}return y}function d(m,y,w){return{err:{code:m,msg:y,line:w.line||w,col:w.col}}}function g(m){return r.isName(m)}function v(m,y){const w=m.substring(0,y).split(/\r?\n/);return{line:w.length,col:w[w.length-1].length+1}}function E(m){return m.startIndex+m[1].length}},221:(t,e,n)=>{const r=n(87),i={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(o,l){return l},attributeValueProcessor:function(o,l){return l},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function s(o){this.options=Object.assign({},i,o),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=c),this.processTextOrObjNode=u,this.options.format?(this.indentate=a,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function u(o,l,p){const h=this.j2x(o,p+1);return o[this.options.textNodeName]!==void 0&&Object.keys(o).length===1?this.buildTextValNode(o[this.options.textNodeName],l,h.attrStr,p):this.buildObjectNode(h.val,l,h.attrStr,p)}function a(o){return this.options.indentBy.repeat(o)}function c(o){return!(!o.startsWith(this.options.attributeNamePrefix)||o===this.options.textNodeName)&&o.substr(this.attrPrefixLen)}s.prototype.build=function(o){return this.options.preserveOrder?r(o,this.options):(Array.isArray(o)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(o={[this.options.arrayNodeName]:o}),this.j2x(o,0).val)},s.prototype.j2x=function(o,l){let p="",h="";for(let f in o)if(Object.prototype.hasOwnProperty.call(o,f))if(o[f]===void 0)this.isAttribute(f)&&(h+="");else if(o[f]===null)this.isAttribute(f)?h+="":f[0]==="?"?h+=this.indentate(l)+"<"+f+"?"+this.tagEndChar:h+=this.indentate(l)+"<"+f+"/"+this.tagEndChar;else if(o[f]instanceof Date)h+=this.buildTextValNode(o[f],f,"",l);else if(typeof o[f]!="object"){const d=this.isAttribute(f);if(d)p+=this.buildAttrPairStr(d,""+o[f]);else if(f===this.options.textNodeName){let g=this.options.tagValueProcessor(f,""+o[f]);h+=this.replaceEntitiesValue(g)}else h+=this.buildTextValNode(o[f],f,"",l)}else if(Array.isArray(o[f])){const d=o[f].length;let g="",v="";for(let E=0;E<d;E++){const m=o[f][E];if(m!==void 0)if(m===null)f[0]==="?"?h+=this.indentate(l)+"<"+f+"?"+this.tagEndChar:h+=this.indentate(l)+"<"+f+"/"+this.tagEndChar;else if(typeof m=="object")if(this.options.oneListGroup){const y=this.j2x(m,l+1);g+=y.val,this.options.attributesGroupName&&m.hasOwnProperty(this.options.attributesGroupName)&&(v+=y.attrStr)}else g+=this.processTextOrObjNode(m,f,l);else if(this.options.oneListGroup){let y=this.options.tagValueProcessor(f,m);y=this.replaceEntitiesValue(y),g+=y}else g+=this.buildTextValNode(m,f,"",l)}this.options.oneListGroup&&(g=this.buildObjectNode(g,f,v,l)),h+=g}else if(this.options.attributesGroupName&&f===this.options.attributesGroupName){const d=Object.keys(o[f]),g=d.length;for(let v=0;v<g;v++)p+=this.buildAttrPairStr(d[v],""+o[f][d[v]])}else h+=this.processTextOrObjNode(o[f],f,l);return{attrStr:p,val:h}},s.prototype.buildAttrPairStr=function(o,l){return l=this.options.attributeValueProcessor(o,""+l),l=this.replaceEntitiesValue(l),this.options.suppressBooleanAttributes&&l==="true"?" "+o:" "+o+'="'+l+'"'},s.prototype.buildObjectNode=function(o,l,p,h){if(o==="")return l[0]==="?"?this.indentate(h)+"<"+l+p+"?"+this.tagEndChar:this.indentate(h)+"<"+l+p+this.closeTag(l)+this.tagEndChar;{let f="</"+l+this.tagEndChar,d="";return l[0]==="?"&&(d="?",f=""),!p&&p!==""||o.indexOf("<")!==-1?this.options.commentPropName!==!1&&l===this.options.commentPropName&&d.length===0?this.indentate(h)+"<!--".concat(o,"-->")+this.newLine:this.indentate(h)+"<"+l+p+d+this.tagEndChar+o+this.indentate(h)+f:this.indentate(h)+"<"+l+p+d+">"+o+f}},s.prototype.closeTag=function(o){let l="";return this.options.unpairedTags.indexOf(o)!==-1?this.options.suppressUnpairedNode||(l="/"):l=this.options.suppressEmptyNode?"/":"></".concat(o),l},s.prototype.buildTextValNode=function(o,l,p,h){if(this.options.cdataPropName!==!1&&l===this.options.cdataPropName)return this.indentate(h)+"<![CDATA[".concat(o,"]]>")+this.newLine;if(this.options.commentPropName!==!1&&l===this.options.commentPropName)return this.indentate(h)+"<!--".concat(o,"-->")+this.newLine;if(l[0]==="?")return this.indentate(h)+"<"+l+p+"?"+this.tagEndChar;{let f=this.options.tagValueProcessor(l,o);return f=this.replaceEntitiesValue(f),f===""?this.indentate(h)+"<"+l+p+this.closeTag(l)+this.tagEndChar:this.indentate(h)+"<"+l+p+">"+f+"</"+l+this.tagEndChar}},s.prototype.replaceEntitiesValue=function(o){if(o&&o.length>0&&this.options.processEntities)for(let l=0;l<this.options.entities.length;l++){const p=this.options.entities[l];o=o.replace(p.regex,p.val)}return o},t.exports=s},87:t=>{function e(u,a,c,o){let l="",p=!1;for(let h=0;h<u.length;h++){const f=u[h],d=n(f);if(d===void 0)continue;let g="";if(g=c.length===0?d:"".concat(c,".").concat(d),d===a.textNodeName){let y=f[d];i(g,a)||(y=a.tagValueProcessor(d,y),y=s(y,a)),p&&(l+=o),l+=y,p=!1;continue}if(d===a.cdataPropName){p&&(l+=o),l+="<![CDATA[".concat(f[d][0][a.textNodeName],"]]>"),p=!1;continue}if(d===a.commentPropName){l+=o+"<!--".concat(f[d][0][a.textNodeName],"-->"),p=!0;continue}if(d[0]==="?"){const y=r(f[":@"],a),w=d==="?xml"?"":o;let b=f[d][0][a.textNodeName];b=b.length!==0?" "+b:"",l+=w+"<".concat(d).concat(b).concat(y,"?>"),p=!0;continue}let v=o;v!==""&&(v+=a.indentBy);const E=o+"<".concat(d).concat(r(f[":@"],a)),m=e(f[d],a,g,v);a.unpairedTags.indexOf(d)!==-1?a.suppressUnpairedNode?l+=E+">":l+=E+"/>":m&&m.length!==0||!a.suppressEmptyNode?m&&m.endsWith(">")?l+=E+">".concat(m).concat(o,"</").concat(d,">"):(l+=E+">",m&&o!==""&&(m.includes("/>")||m.includes("</"))?l+=o+a.indentBy+m+o:l+=m,l+="</".concat(d,">")):l+=E+"/>",p=!0}return l}function n(u){const a=Object.keys(u);for(let c=0;c<a.length;c++){const o=a[c];if(u.hasOwnProperty(o)&&o!==":@")return o}}function r(u,a){let c="";if(u&&!a.ignoreAttributes)for(let o in u){if(!u.hasOwnProperty(o))continue;let l=a.attributeValueProcessor(o,u[o]);l=s(l,a),l===!0&&a.suppressBooleanAttributes?c+=" ".concat(o.substr(a.attributeNamePrefix.length)):c+=" ".concat(o.substr(a.attributeNamePrefix.length),'="').concat(l,'"')}return c}function i(u,a){let c=(u=u.substr(0,u.length-a.textNodeName.length-1)).substr(u.lastIndexOf(".")+1);for(let o in a.stopNodes)if(a.stopNodes[o]===u||a.stopNodes[o]==="*."+c)return!0;return!1}function s(u,a){if(u&&u.length>0&&a.processEntities)for(let c=0;c<a.entities.length;c++){const o=a.entities[c];u=u.replace(o.regex,o.val)}return u}t.exports=function(u,a){let c="";return a.format&&a.indentBy.length>0&&(c="\n"),e(u,a,"",c)}},193:(t,e,n)=>{const r=n(705);function i(p,h){let f="";for(;h<p.length&&p[h]!=="'"&&p[h]!=='"';h++)f+=p[h];if(f=f.trim(),f.indexOf(" ")!==-1)throw new Error("External entites are not supported");const d=p[h++];let g="";for(;h<p.length&&p[h]!==d;h++)g+=p[h];return[f,g,h]}function s(p,h){return p[h+1]==="!"&&p[h+2]==="-"&&p[h+3]==="-"}function u(p,h){return p[h+1]==="!"&&p[h+2]==="E"&&p[h+3]==="N"&&p[h+4]==="T"&&p[h+5]==="I"&&p[h+6]==="T"&&p[h+7]==="Y"}function a(p,h){return p[h+1]==="!"&&p[h+2]==="E"&&p[h+3]==="L"&&p[h+4]==="E"&&p[h+5]==="M"&&p[h+6]==="E"&&p[h+7]==="N"&&p[h+8]==="T"}function c(p,h){return p[h+1]==="!"&&p[h+2]==="A"&&p[h+3]==="T"&&p[h+4]==="T"&&p[h+5]==="L"&&p[h+6]==="I"&&p[h+7]==="S"&&p[h+8]==="T"}function o(p,h){return p[h+1]==="!"&&p[h+2]==="N"&&p[h+3]==="O"&&p[h+4]==="T"&&p[h+5]==="A"&&p[h+6]==="T"&&p[h+7]==="I"&&p[h+8]==="O"&&p[h+9]==="N"}function l(p){if(r.isName(p))return p;throw new Error("Invalid entity name ".concat(p))}t.exports=function(p,h){const f={};if(p[h+3]!=="O"||p[h+4]!=="C"||p[h+5]!=="T"||p[h+6]!=="Y"||p[h+7]!=="P"||p[h+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{h+=9;let d=1,g=!1,v=!1,E="";for(;h<p.length;h++)if(p[h]!=="<"||v)if(p[h]===">"){if(v?p[h-1]==="-"&&p[h-2]==="-"&&(v=!1,d--):d--,d===0)break}else p[h]==="["?g=!0:E+=p[h];else{if(g&&u(p,h))h+=7,[entityName,val,h]=i(p,h+1),val.indexOf("&")===-1&&(f[l(entityName)]={regx:RegExp("&".concat(entityName,";"),"g"),val});else if(g&&a(p,h))h+=8;else if(g&&c(p,h))h+=8;else if(g&&o(p,h))h+=9;else{if(!s)throw new Error("Invalid DOCTYPE");v=!0}d++,E=""}if(d!==0)throw new Error("Unclosed DOCTYPE")}return{entities:f,i:h}}},63:(t,e)=>{const n={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(r,i){return i},attributeValueProcessor:function(r,i){return i},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(r,i,s){return r}};e.buildOptions=function(r){return Object.assign({},n,r)},e.defaultOptions=n},299:(t,e,n)=>{const r=n(705),i=n(365),s=n(193),u=n(494);function a(b){const A=Object.keys(b);for(let x=0;x<A.length;x++){const N=A[x];this.lastEntities[N]={regex:new RegExp("&"+N+";","g"),val:b[N]}}}function c(b,A,x,N,O,R,C){if(b!==void 0&&(this.options.trimValues&&!N&&(b=b.trim()),b.length>0)){C||(b=this.replaceEntitiesValue(b));const P=this.options.tagValueProcessor(A,b,x,O,R);return P==null?b:typeof P!=typeof b||P!==b?P:this.options.trimValues||b.trim()===b?w(b,this.options.parseTagValue,this.options.numberParseOptions):b}}function o(b){if(this.options.removeNSPrefix){const A=b.split(":"),x=b.charAt(0)==="/"?"/":"";if(A[0]==="xmlns")return"";A.length===2&&(b=x+A[1])}return b}const l=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function p(b,A,x){if(!this.options.ignoreAttributes&&typeof b=="string"){const N=r.getAllMatches(b,l),O=N.length,R={};for(let C=0;C<O;C++){const P=this.resolveNameSpace(N[C][1]);let T=N[C][4],_=this.options.attributeNamePrefix+P;if(P.length)if(this.options.transformAttributeName&&(_=this.options.transformAttributeName(_)),_==="__proto__"&&(_="#__proto__"),T!==void 0){this.options.trimValues&&(T=T.trim()),T=this.replaceEntitiesValue(T);const S=this.options.attributeValueProcessor(P,T,A);R[_]=S==null?T:typeof S!=typeof T||S!==T?S:w(T,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(R[_]=!0)}if(!Object.keys(R).length)return;if(this.options.attributesGroupName){const C={};return C[this.options.attributesGroupName]=R,C}return R}}const h=function(b){b=b.replace(/\r\n?/g,"\n");const A=new i("!xml");let x=A,N="",O="";for(let R=0;R<b.length;R++)if(b[R]==="<")if(b[R+1]==="/"){const C=E(b,">",R,"Closing Tag is not closed.");let P=b.substring(R+2,C).trim();if(this.options.removeNSPrefix){const S=P.indexOf(":");S!==-1&&(P=P.substr(S+1))}this.options.transformTagName&&(P=this.options.transformTagName(P)),x&&(N=this.saveTextToParentTag(N,x,O));const T=O.substring(O.lastIndexOf(".")+1);if(P&&this.options.unpairedTags.indexOf(P)!==-1)throw new Error("Unpaired tag can not be used as closing tag: </".concat(P,">"));let _=0;T&&this.options.unpairedTags.indexOf(T)!==-1?(_=O.lastIndexOf(".",O.lastIndexOf(".")-1),this.tagsNodeStack.pop()):_=O.lastIndexOf("."),O=O.substring(0,_),x=this.tagsNodeStack.pop(),N="",R=C}else if(b[R+1]==="?"){let C=m(b,R,!1,"?>");if(!C)throw new Error("Pi Tag is not closed.");if(N=this.saveTextToParentTag(N,x,O),!(this.options.ignoreDeclaration&&C.tagName==="?xml"||this.options.ignorePiTags)){const P=new i(C.tagName);P.add(this.options.textNodeName,""),C.tagName!==C.tagExp&&C.attrExpPresent&&(P[":@"]=this.buildAttributesMap(C.tagExp,O,C.tagName)),this.addChild(x,P,O)}R=C.closeIndex+1}else if(b.substr(R+1,3)==="!--"){const C=E(b,"-->",R+4,"Comment is not closed.");if(this.options.commentPropName){const P=b.substring(R+4,C-2);N=this.saveTextToParentTag(N,x,O),x.add(this.options.commentPropName,[{[this.options.textNodeName]:P}])}R=C}else if(b.substr(R+1,2)==="!D"){const C=s(b,R);this.docTypeEntities=C.entities,R=C.i}else if(b.substr(R+1,2)==="!["){const C=E(b,"]]>",R,"CDATA is not closed.")-2,P=b.substring(R+9,C);N=this.saveTextToParentTag(N,x,O);let T=this.parseTextData(P,x.tagname,O,!0,!1,!0,!0);T==null&&(T=""),this.options.cdataPropName?x.add(this.options.cdataPropName,[{[this.options.textNodeName]:P}]):x.add(this.options.textNodeName,T),R=C+2}else{let C=m(b,R,this.options.removeNSPrefix),P=C.tagName;const T=C.rawTagName;let _=C.tagExp,S=C.attrExpPresent,dt=C.closeIndex;this.options.transformTagName&&(P=this.options.transformTagName(P)),x&&N&&x.tagname!=="!xml"&&(N=this.saveTextToParentTag(N,x,O,!1));const B=x;if(B&&this.options.unpairedTags.indexOf(B.tagname)!==-1&&(x=this.tagsNodeStack.pop(),O=O.substring(0,O.lastIndexOf("."))),P!==A.tagname&&(O+=O?"."+P:P),this.isItStopNode(this.options.stopNodes,O,P)){let $="";if(_.length>0&&_.lastIndexOf("/")===_.length-1)P[P.length-1]==="/"?(P=P.substr(0,P.length-1),O=O.substr(0,O.length-1),_=P):_=_.substr(0,_.length-1),R=C.closeIndex;else if(this.options.unpairedTags.indexOf(P)!==-1)R=C.closeIndex;else{const Q=this.readStopNodeData(b,T,dt+1);if(!Q)throw new Error("Unexpected end of ".concat(T));R=Q.i,$=Q.tagContent}const at=new i(P);P!==_&&S&&(at[":@"]=this.buildAttributesMap(_,O,P)),$&&($=this.parseTextData($,P,O,!0,S,!0,!0)),O=O.substr(0,O.lastIndexOf(".")),at.add(this.options.textNodeName,$),this.addChild(x,at,O)}else{if(_.length>0&&_.lastIndexOf("/")===_.length-1){P[P.length-1]==="/"?(P=P.substr(0,P.length-1),O=O.substr(0,O.length-1),_=P):_=_.substr(0,_.length-1),this.options.transformTagName&&(P=this.options.transformTagName(P));const $=new i(P);P!==_&&S&&($[":@"]=this.buildAttributesMap(_,O,P)),this.addChild(x,$,O),O=O.substr(0,O.lastIndexOf("."))}else{const $=new i(P);this.tagsNodeStack.push(x),P!==_&&S&&($[":@"]=this.buildAttributesMap(_,O,P)),this.addChild(x,$,O),x=$}N="",R=dt}}else N+=b[R];return A.child};function f(b,A,x){const N=this.options.updateTag(A.tagname,x,A[":@"]);N===!1||(typeof N=="string"&&(A.tagname=N),b.addChild(A))}const d=function(b){if(this.options.processEntities){for(let A in this.docTypeEntities){const x=this.docTypeEntities[A];b=b.replace(x.regx,x.val)}for(let A in this.lastEntities){const x=this.lastEntities[A];b=b.replace(x.regex,x.val)}if(this.options.htmlEntities)for(let A in this.htmlEntities){const x=this.htmlEntities[A];b=b.replace(x.regex,x.val)}b=b.replace(this.ampEntity.regex,this.ampEntity.val)}return b};function g(b,A,x,N){return b&&(N===void 0&&(N=Object.keys(A.child).length===0),(b=this.parseTextData(b,A.tagname,x,!1,!!A[":@"]&&Object.keys(A[":@"]).length!==0,N))!==void 0&&b!==""&&A.add(this.options.textNodeName,b),b=""),b}function v(b,A,x){const N="*."+x;for(const O in b){const R=b[O];if(N===R||A===R)return!0}return!1}function E(b,A,x,N){const O=b.indexOf(A,x);if(O===-1)throw new Error(N);return O+A.length-1}function m(b,A,x){const N=function(S,dt){let B,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:">",at="";for(let Q=dt;Q<S.length;Q++){let q=S[Q];if(B)q===B&&(B="");else if(q==='"'||q==="'")B=q;else if(q===$[0]){if(!$[1])return{data:at,index:Q};if(S[Q+1]===$[1])return{data:at,index:Q}}else q==="	"&&(q=" ");at+=q}}(b,A+1,arguments.length>3&&arguments[3]!==void 0?arguments[3]:">");if(!N)return;let O=N.data;const R=N.index,C=O.search(/\s/);let P=O,T=!0;C!==-1&&(P=O.substring(0,C),O=O.substring(C+1).trimStart());const _=P;if(x){const S=P.indexOf(":");S!==-1&&(P=P.substr(S+1),T=P!==N.data.substr(S+1))}return{tagName:P,tagExp:O,closeIndex:R,attrExpPresent:T,rawTagName:_}}function y(b,A,x){const N=x;let O=1;for(;x<b.length;x++)if(b[x]==="<")if(b[x+1]==="/"){const R=E(b,">",x,"".concat(A," is not closed"));if(b.substring(x+2,R).trim()===A&&(O--,O===0))return{tagContent:b.substring(N,x),i:R};x=R}else if(b[x+1]==="?")x=E(b,"?>",x+1,"StopNode is not closed.");else if(b.substr(x+1,3)==="!--")x=E(b,"-->",x+3,"StopNode is not closed.");else if(b.substr(x+1,2)==="![")x=E(b,"]]>",x,"StopNode is not closed.")-2;else{const R=m(b,x,">");R&&((R&&R.tagName)===A&&R.tagExp[R.tagExp.length-1]!=="/"&&O++,x=R.closeIndex)}}function w(b,A,x){if(A&&typeof b=="string"){const N=b.trim();return N==="true"||N!=="false"&&u(b,x)}return r.isExist(b)?b:""}t.exports=class{constructor(b){this.options=b,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(A,x)=>String.fromCharCode(Number.parseInt(x,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(A,x)=>String.fromCharCode(Number.parseInt(x,16))}},this.addExternalEntities=a,this.parseXml=h,this.parseTextData=c,this.resolveNameSpace=o,this.buildAttributesMap=p,this.isItStopNode=v,this.replaceEntitiesValue=d,this.readStopNodeData=y,this.saveTextToParentTag=g,this.addChild=f}}},338:(t,e,n)=>{const{buildOptions:r}=n(63),i=n(299),{prettify:s}=n(728),u=n(31);t.exports=class{constructor(a){this.externalEntities={},this.options=r(a)}parse(a,c){if(typeof a!="string"){if(!a.toString)throw new Error("XML data is accepted in String or Bytes[] form.");a=a.toString()}if(c){c===!0&&(c={});const p=u.validate(a,c);if(p!==!0)throw Error("".concat(p.err.msg,":").concat(p.err.line,":").concat(p.err.col))}const o=new i(this.options);o.addExternalEntities(this.externalEntities);const l=o.parseXml(a);return this.options.preserveOrder||l===void 0?l:s(l,this.options)}addEntity(a,c){if(c.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(a.indexOf("&")!==-1||a.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(c==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[a]=c}}},728:(t,e)=>{function n(u,a,c){let o;const l={};for(let p=0;p<u.length;p++){const h=u[p],f=r(h);let d="";if(d=c===void 0?f:c+"."+f,f===a.textNodeName)o===void 0?o=h[f]:o+=""+h[f];else{if(f===void 0)continue;if(h[f]){let g=n(h[f],a,d);const v=s(g,a);h[":@"]?i(g,h[":@"],d,a):Object.keys(g).length!==1||g[a.textNodeName]===void 0||a.alwaysCreateTextNode?Object.keys(g).length===0&&(a.alwaysCreateTextNode?g[a.textNodeName]="":g=""):g=g[a.textNodeName],l[f]!==void 0&&l.hasOwnProperty(f)?(Array.isArray(l[f])||(l[f]=[l[f]]),l[f].push(g)):a.isArray(f,d,v)?l[f]=[g]:l[f]=g}}}return typeof o=="string"?o.length>0&&(l[a.textNodeName]=o):o!==void 0&&(l[a.textNodeName]=o),l}function r(u){const a=Object.keys(u);for(let c=0;c<a.length;c++){const o=a[c];if(o!==":@")return o}}function i(u,a,c,o){if(a){const l=Object.keys(a),p=l.length;for(let h=0;h<p;h++){const f=l[h];o.isArray(f,c+"."+f,!0,!0)?u[f]=[a[f]]:u[f]=a[f]}}}function s(u,a){const{textNodeName:c}=a,o=Object.keys(u).length;return o===0||!(o!==1||!u[c]&&typeof u[c]!="boolean"&&u[c]!==0)}e.prettify=function(u,a){return n(u,a)}},365:t=>{t.exports=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,n){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:n})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}},135:t=>{function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}t.exports=function(n){return n!=null&&(e(n)||function(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&e(r.slice(0,0))}(n)||!!n._isBuffer)}},542:(t,e,n)=>{(function(){var r=n(298),i=n(526).utf8,s=n(135),u=n(526).bin,a=function(c,o){c.constructor==String?c=o&&o.encoding==="binary"?u.stringToBytes(c):i.stringToBytes(c):s(c)?c=Array.prototype.slice.call(c,0):Array.isArray(c)||c.constructor===Uint8Array||(c=c.toString());for(var l=r.bytesToWords(c),p=8*c.length,h=1732584193,f=-271733879,d=-1732584194,g=271733878,v=0;v<l.length;v++)l[v]=16711935&(l[v]<<8|l[v]>>>24)|4278255360&(l[v]<<24|l[v]>>>8);l[p>>>5]|=128<<p%32,l[14+(p+64>>>9<<4)]=p;var E=a._ff,m=a._gg,y=a._hh,w=a._ii;for(v=0;v<l.length;v+=16){var b=h,A=f,x=d,N=g;h=E(h,f,d,g,l[v+0],7,-680876936),g=E(g,h,f,d,l[v+1],12,-389564586),d=E(d,g,h,f,l[v+2],17,606105819),f=E(f,d,g,h,l[v+3],22,-1044525330),h=E(h,f,d,g,l[v+4],7,-176418897),g=E(g,h,f,d,l[v+5],12,1200080426),d=E(d,g,h,f,l[v+6],17,-1473231341),f=E(f,d,g,h,l[v+7],22,-45705983),h=E(h,f,d,g,l[v+8],7,1770035416),g=E(g,h,f,d,l[v+9],12,-1958414417),d=E(d,g,h,f,l[v+10],17,-42063),f=E(f,d,g,h,l[v+11],22,-1990404162),h=E(h,f,d,g,l[v+12],7,1804603682),g=E(g,h,f,d,l[v+13],12,-40341101),d=E(d,g,h,f,l[v+14],17,-1502002290),h=m(h,f=E(f,d,g,h,l[v+15],22,1236535329),d,g,l[v+1],5,-165796510),g=m(g,h,f,d,l[v+6],9,-1069501632),d=m(d,g,h,f,l[v+11],14,643717713),f=m(f,d,g,h,l[v+0],20,-373897302),h=m(h,f,d,g,l[v+5],5,-701558691),g=m(g,h,f,d,l[v+10],9,38016083),d=m(d,g,h,f,l[v+15],14,-660478335),f=m(f,d,g,h,l[v+4],20,-405537848),h=m(h,f,d,g,l[v+9],5,568446438),g=m(g,h,f,d,l[v+14],9,-1019803690),d=m(d,g,h,f,l[v+3],14,-187363961),f=m(f,d,g,h,l[v+8],20,1163531501),h=m(h,f,d,g,l[v+13],5,-1444681467),g=m(g,h,f,d,l[v+2],9,-51403784),d=m(d,g,h,f,l[v+7],14,1735328473),h=y(h,f=m(f,d,g,h,l[v+12],20,-1926607734),d,g,l[v+5],4,-378558),g=y(g,h,f,d,l[v+8],11,-2022574463),d=y(d,g,h,f,l[v+11],16,1839030562),f=y(f,d,g,h,l[v+14],23,-35309556),h=y(h,f,d,g,l[v+1],4,-1530992060),g=y(g,h,f,d,l[v+4],11,1272893353),d=y(d,g,h,f,l[v+7],16,-155497632),f=y(f,d,g,h,l[v+10],23,-1094730640),h=y(h,f,d,g,l[v+13],4,681279174),g=y(g,h,f,d,l[v+0],11,-358537222),d=y(d,g,h,f,l[v+3],16,-722521979),f=y(f,d,g,h,l[v+6],23,76029189),h=y(h,f,d,g,l[v+9],4,-640364487),g=y(g,h,f,d,l[v+12],11,-421815835),d=y(d,g,h,f,l[v+15],16,530742520),h=w(h,f=y(f,d,g,h,l[v+2],23,-995338651),d,g,l[v+0],6,-198630844),g=w(g,h,f,d,l[v+7],10,1126891415),d=w(d,g,h,f,l[v+14],15,-1416354905),f=w(f,d,g,h,l[v+5],21,-57434055),h=w(h,f,d,g,l[v+12],6,1700485571),g=w(g,h,f,d,l[v+3],10,-1894986606),d=w(d,g,h,f,l[v+10],15,-1051523),f=w(f,d,g,h,l[v+1],21,-2054922799),h=w(h,f,d,g,l[v+8],6,1873313359),g=w(g,h,f,d,l[v+15],10,-30611744),d=w(d,g,h,f,l[v+6],15,-1560198380),f=w(f,d,g,h,l[v+13],21,1309151649),h=w(h,f,d,g,l[v+4],6,-145523070),g=w(g,h,f,d,l[v+11],10,-1120210379),d=w(d,g,h,f,l[v+2],15,718787259),f=w(f,d,g,h,l[v+9],21,-343485551),h=h+b>>>0,f=f+A>>>0,d=d+x>>>0,g=g+N>>>0}return r.endian([h,f,d,g])};a._ff=function(c,o,l,p,h,f,d){var g=c+(o&l|~o&p)+(h>>>0)+d;return(g<<f|g>>>32-f)+o},a._gg=function(c,o,l,p,h,f,d){var g=c+(o&p|l&~p)+(h>>>0)+d;return(g<<f|g>>>32-f)+o},a._hh=function(c,o,l,p,h,f,d){var g=c+(o^l^p)+(h>>>0)+d;return(g<<f|g>>>32-f)+o},a._ii=function(c,o,l,p,h,f,d){var g=c+(l^(o|~p))+(h>>>0)+d;return(g<<f|g>>>32-f)+o},a._blocksize=16,a._digestsize=16,t.exports=function(c,o){if(c==null)throw new Error("Illegal argument "+c);var l=r.wordsToBytes(a(c,o));return o&&o.asBytes?l:o&&o.asString?u.bytesToString(l):r.bytesToHex(l)}})()},285:(t,e,n)=>{var r=n(2);t.exports=function(E){return E?(E.substr(0,2)==="{}"&&(E="\\{\\}"+E.substr(2)),v(function(m){return m.split("\\\\").join(i).split("\\{").join(s).split("\\}").join(u).split("\\,").join(a).split("\\.").join(c)}(E),!0).map(l)):[]};var i="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",u="\0CLOSE"+Math.random()+"\0",a="\0COMMA"+Math.random()+"\0",c="\0PERIOD"+Math.random()+"\0";function o(E){return parseInt(E,10)==E?parseInt(E,10):E.charCodeAt(0)}function l(E){return E.split(i).join("\\").split(s).join("{").split(u).join("}").split(a).join(",").split(c).join(".")}function p(E){if(!E)return[""];var m=[],y=r("{","}",E);if(!y)return E.split(",");var w=y.pre,b=y.body,A=y.post,x=w.split(",");x[x.length-1]+="{"+b+"}";var N=p(A);return A.length&&(x[x.length-1]+=N.shift(),x.push.apply(x,N)),m.push.apply(m,x),m}function h(E){return"{"+E+"}"}function f(E){return/^-?0\d/.test(E)}function d(E,m){return E<=m}function g(E,m){return E>=m}function v(E,m){var y=[],w=r("{","}",E);if(!w)return[E];var b=w.pre,A=w.post.length?v(w.post,!1):[""];if(/\$$/.test(w.pre))for(var x=0;x<A.length;x++){var N=b+"{"+w.body+"}"+A[x];y.push(N)}else{var O,R,C=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(w.body),P=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(w.body),T=C||P,_=w.body.indexOf(",")>=0;if(!T&&!_)return w.post.match(/,.*\}/)?v(E=w.pre+"{"+w.body+u+w.post):[E];if(T)O=w.body.split(/\.\./);else if((O=p(w.body)).length===1&&(O=v(O[0],!1).map(h)).length===1)return A.map(function($r){return w.pre+O[0]+$r});if(T){var S=o(O[0]),dt=o(O[1]),B=Math.max(O[0].length,O[1].length),$=O.length==3?Math.abs(o(O[2])):1,at=d;dt<S&&($*=-1,at=g);var Q=O.some(f);R=[];for(var q=S;at(q,dt);q+=$){var wt;if(P)(wt=String.fromCharCode(q))==="\\"&&(wt="");else if(wt=String(q),Q){var ln=B-wt.length;if(ln>0){var cn=new Array(ln+1).join("0");wt=q<0?"-"+cn+wt.slice(1):cn+wt}}R.push(wt)}}else{R=[];for(var Rt=0;Rt<O.length;Rt++)R.push.apply(R,v(O[Rt],!1))}for(Rt=0;Rt<R.length;Rt++)for(x=0;x<A.length;x++)N=b+R[Rt]+A[x],(!m||T||N)&&y.push(N)}return y}},829:t=>{function e(o){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},e(o)}function n(o){var l=typeof Map=="function"?new Map:void 0;return n=function(p){if(p===null||(h=p,Function.toString.call(h).indexOf("[native code]")===-1))return p;var h;if(typeof p!="function")throw new TypeError("Super expression must either be null or a function");if(l!==void 0){if(l.has(p))return l.get(p);l.set(p,f)}function f(){return r(p,arguments,s(this).constructor)}return f.prototype=Object.create(p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),i(f,p)},n(o)}function r(o,l,p){return r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(h){return!1}}()?Reflect.construct:function(h,f,d){var g=[null];g.push.apply(g,f);var v=new(Function.bind.apply(h,g));return d&&i(v,d.prototype),v},r.apply(null,arguments)}function i(o,l){return i=Object.setPrototypeOf||function(p,h){return p.__proto__=h,p},i(o,l)}function s(o){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},s(o)}var u=function(o){function l(p){var h;return function(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}(this,l),(h=function(f,d){return!d||e(d)!=="object"&&typeof d!="function"?function(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(f):d}(this,s(l).call(this,p))).name="ObjectPrototypeMutationError",h}return function(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),h&&i(p,h)}(l,o),l}(n(Error));function a(o,l){for(var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},h=l.split("."),f=h.length,d=function(E){var m=h[E];if(!o)return{v:void 0};if(m==="+"){if(Array.isArray(o))return{v:o.map(function(w,b){var A=h.slice(E+1);return A.length>0?a(w,A.join("."),p):p(o,b,h,E)})};var y=h.slice(0,E).join(".");throw new Error("Object at wildcard (".concat(y,") is not an array"))}o=p(o,m,h,E)},g=0;g<f;g++){var v=d(g);if(e(v)==="object")return v.v}return o}function c(o,l){return o.length===l+1}t.exports={set:function(o,l,p){if(e(o)!="object"||o===null||l===void 0)return o;if(typeof l=="number")return o[l]=p,o[l];try{return a(o,l,function(h,f,d,g){if(h===Reflect.getPrototypeOf({}))throw new u("Attempting to mutate Object.prototype");if(!h[f]){var v=Number.isInteger(Number(d[g+1])),E=d[g+1]==="+";h[f]=v||E?[]:{}}return c(d,g)&&(h[f]=p),h[f]})}catch(h){if(h instanceof u)throw h;return o}},get:function(o,l){if(e(o)!="object"||o===null||l===void 0)return o;if(typeof l=="number")return o[l];try{return a(o,l,function(p,h){return p[h]})}catch(p){return o}},has:function(o,l){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e(o)!="object"||o===null||l===void 0)return!1;if(typeof l=="number")return l in o;try{var h=!1;return a(o,l,function(f,d,g,v){if(!c(g,v))return f&&f[d];h=p.own?f.hasOwnProperty(d):d in f}),h}catch(f){return!1}},hasOwn:function(o,l,p){return this.has(o,l,p||{own:!0})},isIn:function(o,l,p){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(e(o)!="object"||o===null||l===void 0)return!1;try{var f=!1,d=!1;return a(o,l,function(g,v,E,m){return f=f||g===p||!!g&&g[v]===p,d=c(E,m)&&e(g)==="object"&&v in g,g&&g[v]}),h.validPath?f&&d:f}catch(g){return!1}},ObjectPrototypeMutationError:u}},47:(t,e,n)=>{var r=n(410),i=function(o){return typeof o=="string"};function s(o,l){for(var p=[],h=0;h<o.length;h++){var f=o[h];f&&f!=="."&&(f===".."?p.length&&p[p.length-1]!==".."?p.pop():l&&p.push(".."):p.push(f))}return p}var u=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a={};function c(o){return u.exec(o).slice(1)}a.resolve=function(){for(var o="",l=!1,p=arguments.length-1;p>=-1&&!l;p--){var h=p>=0?arguments[p]:Gt.cwd();if(!i(h))throw new TypeError("Arguments to path.resolve must be strings");h&&(o=h+"/"+o,l=h.charAt(0)==="/")}return(l?"/":"")+(o=s(o.split("/"),!l).join("/"))||"."},a.normalize=function(o){var l=a.isAbsolute(o),p=o.substr(-1)==="/";return(o=s(o.split("/"),!l).join("/"))||l||(o="."),o&&p&&(o+="/"),(l?"/":"")+o},a.isAbsolute=function(o){return o.charAt(0)==="/"},a.join=function(){for(var o="",l=0;l<arguments.length;l++){var p=arguments[l];if(!i(p))throw new TypeError("Arguments to path.join must be strings");p&&(o+=o?"/"+p:p)}return a.normalize(o)},a.relative=function(o,l){function p(m){for(var y=0;y<m.length&&m[y]==="";y++);for(var w=m.length-1;w>=0&&m[w]==="";w--);return y>w?[]:m.slice(y,w+1)}o=a.resolve(o).substr(1),l=a.resolve(l).substr(1);for(var h=p(o.split("/")),f=p(l.split("/")),d=Math.min(h.length,f.length),g=d,v=0;v<d;v++)if(h[v]!==f[v]){g=v;break}var E=[];for(v=g;v<h.length;v++)E.push("..");return(E=E.concat(f.slice(g))).join("/")},a._makeLong=function(o){return o},a.dirname=function(o){var l=c(o),p=l[0],h=l[1];return p||h?(h&&(h=h.substr(0,h.length-1)),p+h):"."},a.basename=function(o,l){var p=c(o)[2];return l&&p.substr(-1*l.length)===l&&(p=p.substr(0,p.length-l.length)),p},a.extname=function(o){return c(o)[3]},a.format=function(o){if(!r.isObject(o))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof o);var l=o.root||"";if(!i(l))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof o.root);return(o.dir?o.dir+a.sep:"")+(o.base||"")},a.parse=function(o){if(!i(o))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof o);var l=c(o);if(!l||l.length!==4)throw new TypeError("Invalid path '"+o+"'");return l[1]=l[1]||"",l[2]=l[2]||"",l[3]=l[3]||"",{root:l[0],dir:l[0]+l[1].slice(0,l[1].length-1),base:l[2],ext:l[3],name:l[2].slice(0,l[2].length-l[3].length)}},a.sep="/",a.delimiter=":",t.exports=a},647:(t,e)=>{var n=Object.prototype.hasOwnProperty;function r(s){try{return decodeURIComponent(s.replace(/\+/g," "))}catch(u){return null}}function i(s){try{return encodeURIComponent(s)}catch(u){return null}}e.stringify=function(s,u){u=u||"";var a,c,o=[];for(c in typeof u!="string"&&(u="?"),s)if(n.call(s,c)){if((a=s[c])||a!=null&&!isNaN(a)||(a=""),c=i(c),a=i(a),c===null||a===null)continue;o.push(c+"="+a)}return o.length?u+o.join("&"):""},e.parse=function(s){for(var u,a=/([^=?#&]+)=?([^&]*)/g,c={};u=a.exec(s);){var o=r(u[1]),l=r(u[2]);o===null||l===null||o in c||(c[o]=l)}return c}},670:t=>{t.exports=function(e,n){if(n=n.split(":")[0],!(e=+e))return!1;switch(n){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}},494:t=>{const e=/^[-+]?0x[a-fA-F0-9]+$/,n=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const r={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};t.exports=function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s=Object.assign({},r,s),!i||typeof i!="string")return i;let u=i.trim();if(s.skipLike!==void 0&&s.skipLike.test(u))return i;if(s.hex&&e.test(u))return Number.parseInt(u,16);{const c=n.exec(u);if(c){const o=c[1],l=c[2];let p=((a=c[3])&&a.indexOf(".")!==-1&&((a=a.replace(/0+$/,""))==="."?a="0":a[0]==="."?a="0"+a:a[a.length-1]==="."&&(a=a.substr(0,a.length-1))),a);const h=c[4]||c[6];if(!s.leadingZeros&&l.length>0&&o&&u[2]!=="."||!s.leadingZeros&&l.length>0&&!o&&u[1]!==".")return i;{const f=Number(u),d=""+f;return d.search(/[eE]/)!==-1||h?s.eNotation?f:i:u.indexOf(".")!==-1?d==="0"&&p===""||d===p||o&&d==="-"+p?f:i:l?p===d||o+p===d?f:i:u===d||u===o+d?f:i}}return i}var a}},737:(t,e,n)=>{var r=n(670),i=n(647),s=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,u=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,l=/^[a-zA-Z]:/;function p(m){return(m||"").toString().replace(s,"")}var h=[["#","hash"],["?","query"],function(m,y){return g(y.protocol)?m.replace(/\\/g,"/"):m},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function d(m){var y,w=(typeof window<"u"?window:typeof Zt<"u"?Zt:typeof self<"u"?self:{}).location||{},b={},A=typeof(m=m||w);if(m.protocol==="blob:")b=new E(unescape(m.pathname),{});else if(A==="string")for(y in b=new E(m,{}),f)delete b[y];else if(A==="object"){for(y in m)y in f||(b[y]=m[y]);b.slashes===void 0&&(b.slashes=a.test(m.href))}return b}function g(m){return m==="file:"||m==="ftp:"||m==="http:"||m==="https:"||m==="ws:"||m==="wss:"}function v(m,y){m=(m=p(m)).replace(u,""),y=y||{};var w,b=o.exec(m),A=b[1]?b[1].toLowerCase():"",x=!!b[2],N=!!b[3],O=0;return x?N?(w=b[2]+b[3]+b[4],O=b[2].length+b[3].length):(w=b[2]+b[4],O=b[2].length):N?(w=b[3]+b[4],O=b[3].length):w=b[4],A==="file:"?O>=2&&(w=w.slice(2)):g(A)?w=b[4]:A?x&&(w=w.slice(2)):O>=2&&g(y.protocol)&&(w=b[4]),{protocol:A,slashes:x||g(A),slashesCount:O,rest:w}}function E(m,y,w){if(m=(m=p(m)).replace(u,""),!(this instanceof E))return new E(m,y,w);var b,A,x,N,O,R,C=h.slice(),P=typeof y,T=this,_=0;for(P!=="object"&&P!=="string"&&(w=y,y=null),w&&typeof w!="function"&&(w=i.parse),b=!(A=v(m||"",y=d(y))).protocol&&!A.slashes,T.slashes=A.slashes||b&&y.slashes,T.protocol=A.protocol||y.protocol||"",m=A.rest,(A.protocol==="file:"&&(A.slashesCount!==2||l.test(m))||!A.slashes&&(A.protocol||A.slashesCount<2||!g(T.protocol)))&&(C[3]=[/(.*)/,"pathname"]);_<C.length;_++)typeof(N=C[_])!="function"?(x=N[0],R=N[1],x!=x?T[R]=m:typeof x=="string"?~(O=x==="@"?m.lastIndexOf(x):m.indexOf(x))&&(typeof N[2]=="number"?(T[R]=m.slice(0,O),m=m.slice(O+N[2])):(T[R]=m.slice(O),m=m.slice(0,O))):(O=x.exec(m))&&(T[R]=O[1],m=m.slice(0,O.index)),T[R]=T[R]||b&&N[3]&&y[R]||"",N[4]&&(T[R]=T[R].toLowerCase())):m=N(m,T);w&&(T.query=w(T.query)),b&&y.slashes&&T.pathname.charAt(0)!=="/"&&(T.pathname!==""||y.pathname!=="")&&(T.pathname=function(S,dt){if(S==="")return dt;for(var B=(dt||"/").split("/").slice(0,-1).concat(S.split("/")),$=B.length,at=B[$-1],Q=!1,q=0;$--;)B[$]==="."?B.splice($,1):B[$]===".."?(B.splice($,1),q++):q&&($===0&&(Q=!0),B.splice($,1),q--);return Q&&B.unshift(""),at!=="."&&at!==".."||B.push(""),B.join("/")}(T.pathname,y.pathname)),T.pathname.charAt(0)!=="/"&&g(T.protocol)&&(T.pathname="/"+T.pathname),r(T.port,T.protocol)||(T.host=T.hostname,T.port=""),T.username=T.password="",T.auth&&(~(O=T.auth.indexOf(":"))?(T.username=T.auth.slice(0,O),T.username=encodeURIComponent(decodeURIComponent(T.username)),T.password=T.auth.slice(O+1),T.password=encodeURIComponent(decodeURIComponent(T.password))):T.username=encodeURIComponent(decodeURIComponent(T.auth)),T.auth=T.password?T.username+":"+T.password:T.username),T.origin=T.protocol!=="file:"&&g(T.protocol)&&T.host?T.protocol+"//"+T.host:"null",T.href=T.toString()}E.prototype={set:function(m,y,w){var b=this;switch(m){case"query":typeof y=="string"&&y.length&&(y=(w||i.parse)(y)),b[m]=y;break;case"port":b[m]=y,r(y,b.protocol)?y&&(b.host=b.hostname+":"+y):(b.host=b.hostname,b[m]="");break;case"hostname":b[m]=y,b.port&&(y+=":"+b.port),b.host=y;break;case"host":b[m]=y,c.test(y)?(y=y.split(":"),b.port=y.pop(),b.hostname=y.join(":")):(b.hostname=y,b.port="");break;case"protocol":b.protocol=y.toLowerCase(),b.slashes=!w;break;case"pathname":case"hash":if(y){var A=m==="pathname"?"/":"#";b[m]=y.charAt(0)!==A?A+y:y}else b[m]=y;break;case"username":case"password":b[m]=encodeURIComponent(y);break;case"auth":var x=y.indexOf(":");~x?(b.username=y.slice(0,x),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=y.slice(x+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(y))}for(var N=0;N<h.length;N++){var O=h[N];O[4]&&(b[O[1]]=b[O[1]].toLowerCase())}return b.auth=b.password?b.username+":"+b.password:b.username,b.origin=b.protocol!=="file:"&&g(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString(),b},toString:function(m){m&&typeof m=="function"||(m=i.stringify);var y,w=this,b=w.host,A=w.protocol;A&&A.charAt(A.length-1)!==":"&&(A+=":");var x=A+(w.protocol&&w.slashes||g(w.protocol)?"//":"");return w.username?(x+=w.username,w.password&&(x+=":"+w.password),x+="@"):w.password?(x+=":"+w.password,x+="@"):w.protocol!=="file:"&&g(w.protocol)&&!b&&w.pathname!=="/"&&(x+="@"),(b[b.length-1]===":"||c.test(w.hostname)&&!w.port)&&(b+=":"),x+=b+w.pathname,(y=typeof w.query=="object"?m(w.query):w.query)&&(x+=y.charAt(0)!=="?"?"?"+y:y),w.hash&&(x+=w.hash),x}},E.extractProtocol=v,E.location=d,E.trimLeft=p,E.qs=i,t.exports=E},410:()=>{},388:()=>{},805:()=>{},345:()=>{},800:()=>{}},gn={};function L(t){var e=gn[t];if(e!==void 0)return e.exports;var n=gn[t]={id:t,loaded:!1,exports:{}};return ei[t].call(n.exports,n,n.exports,L),n.loaded=!0,n.exports}L.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return L.d(e,{a:e}),e},L.d=(t,e)=>{for(var n in e)L.o(e,n)&&!L.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},L.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),L.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var ht={};L.d(ht,{hT:()=>nt,O4:()=>Et,Kd:()=>ci,YK:()=>hi,UU:()=>vs,Gu:()=>er,ky:()=>pr,h4:()=>Kt,ch:()=>pe,hq:()=>Lt,i5:()=>fr});var ni=L(737),ri=L.n(ni);function we(t){if(!Se(t))throw new Error("Parameter was not an error")}function Se(t){return!!t&&typeof t=="object"&&(e=t,Object.prototype.toString.call(e)==="[object Error]")||t instanceof Error;var e}class it extends Error{constructor(e,n){const r=[...arguments],{options:i,shortMessage:s}=function(a){let c,o="";if(a.length===0)c={};else if(Se(a[0]))c={cause:a[0]},o=a.slice(1).join(" ")||"";else if(a[0]&&typeof a[0]=="object")c=Object.assign({},a[0]),o=a.slice(1).join(" ")||"";else{if(typeof a[0]!="string")throw new Error("Invalid arguments passed to Layerr");c={},o=o=a.join(" ")||""}return{options:c,shortMessage:o}}(r);let u=s;if(i.cause&&(u="".concat(u,": ").concat(i.cause.message)),super(u),this.message=u,i.name&&typeof i.name=="string"?this.name=i.name:this.name="Layerr",i.cause&&Object.defineProperty(this,"_cause",{value:i.cause}),Object.defineProperty(this,"_info",{value:{}}),i.info&&typeof i.info=="object"&&Object.assign(this._info,i.info),Error.captureStackTrace){const a=i.constructorOpt||this.constructor;Error.captureStackTrace(this,a)}}static cause(e){return we(e),e._cause&&Se(e._cause)?e._cause:null}static fullStack(e){var r;we(e);const n=it.cause(e);return n?"".concat(e.stack,"\ncaused by: ").concat(it.fullStack(n)):(r=e.stack)!=null?r:""}static info(e){we(e);const n={},r=it.cause(e);return r&&Object.assign(n,it.info(r)),e._info&&Object.assign(n,e._info),n}toString(){let e=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e="".concat(e,": ").concat(this.message)),e}}var ii=L(47),re=L.n(ii);const mn="__PATH_SEPARATOR_POSIX__",vn="__PATH_SEPARATOR_WINDOWS__";function D(t){try{const e=t.replace(/\//g,mn).replace(/\\\\/g,vn);return encodeURIComponent(e).split(vn).join("\\\\").split(mn).join("/")}catch(e){throw new it(e,"Failed encoding path")}}function yn(t){return t.startsWith("/")?t:"/"+t}function Xt(t){let e=t;return e[0]!=="/"&&(e="/"+e),/^.+\/$/.test(e)&&(e=e.substr(0,e.length-1)),e}function si(t){let e=new(ri())(t).pathname;return e.length<=0&&(e="/"),Xt(e)}function k(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){return function(r){var i=[];if(r.length===0)return"";if(typeof r[0]!="string")throw new TypeError("Url must be a string. Received "+r[0]);if(r[0].match(/^[^/:]+:\/*$/)&&r.length>1){var s=r.shift();r[0]=s+r[0]}r[0].match(/^file:\/\/\//)?r[0]=r[0].replace(/^([^/:]+):\/*/,"$1:///"):r[0]=r[0].replace(/^([^/:]+):\/*/,"$1://");for(var u=0;u<r.length;u++){var a=r[u];if(typeof a!="string")throw new TypeError("Url must be a string. Received "+a);a!==""&&(u>0&&(a=a.replace(/^[\/]+/,"")),a=u<r.length-1?a.replace(/[\/]+$/,""):a.replace(/[\/]+$/,"/"),i.push(a))}var c=i.join("/"),o=(c=c.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return o.shift()+(o.length>0?"?":"")+o.join("&")}(typeof arguments[0]=="object"?arguments[0]:[].slice.call(arguments))}(e.reduce((r,i,s)=>((s===0||i!=="/"||i==="/"&&r[r.length-1]!=="/")&&r.push(i),r),[]))}var oi=L(542),Dt=L.n(oi);const ai="abcdef0123456789";function bn(t,e){const n=t.url.replace("//",""),r=n.indexOf("/")==-1?"/":n.slice(n.indexOf("/")),i=t.method?t.method.toUpperCase():"GET",s=!!/(^|,)\s*auth\s*($|,)/.test(e.qop)&&"auth",u="00000000".concat(e.nc).slice(-8),a=function(h,f,d,g,v,E,m){const y=m||Dt()("".concat(f,":").concat(d,":").concat(g));return h&&h.toLowerCase()==="md5-sess"?Dt()("".concat(y,":").concat(v,":").concat(E)):y}(e.algorithm,e.username,e.realm,e.password,e.nonce,e.cnonce,e.ha1),c=Dt()("".concat(i,":").concat(r)),o=s?Dt()("".concat(a,":").concat(e.nonce,":").concat(u,":").concat(e.cnonce,":").concat(s,":").concat(c)):Dt()("".concat(a,":").concat(e.nonce,":").concat(c)),l={username:e.username,realm:e.realm,nonce:e.nonce,uri:r,qop:s,response:o,nc:u,cnonce:e.cnonce,algorithm:e.algorithm,opaque:e.opaque},p=[];for(const h in l)l[h]&&(h==="qop"||h==="nc"||h==="algorithm"?p.push("".concat(h,"=").concat(l[h])):p.push("".concat(h,'="').concat(l[h],'"')));return"Digest ".concat(p.join(", "))}function Jn(t){return(t.headers&&t.headers.get("www-authenticate")||"").split(/\s/)[0].toLowerCase()==="digest"}var ui=L(101),Qn=L.n(ui);function En(t){return Qn().decode(t)}function wn(t,e){var n;return"Basic ".concat((n="".concat(t,":").concat(e),Qn().encode(n)))}const ie=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:typeof window<"u"?window:globalThis,li=ie.fetch.bind(ie),ci=ie.Request,hi=ie.Response;let nt=function(t){return t.Auto="auto",t.Digest="digest",t.None="none",t.Password="password",t.Token="token",t}({}),Et=function(t){return t.DataTypeNoLength="data-type-no-length",t.InvalidAuthType="invalid-auth-type",t.InvalidOutputFormat="invalid-output-format",t.LinkUnsupportedAuthType="link-unsupported-auth",t.InvalidUpdateRange="invalid-update-range",t.NotSupported="not-supported",t}({});function tr(t,e,n,r,i){switch(t.authType){case nt.Auto:e&&n&&(t.headers.Authorization=wn(e,n));break;case nt.Digest:t.digest=function(u,a,c){return{username:u,password:a,ha1:c,nc:0,algorithm:"md5",hasDigestAuth:!1}}(e,n,i);break;case nt.None:break;case nt.Password:t.headers.Authorization=wn(e,n);break;case nt.Token:t.headers.Authorization="".concat((s=r).token_type," ").concat(s.access_token);break;default:throw new it({info:{code:Et.InvalidAuthType}},"Invalid auth type: ".concat(t.authType))}var s}L(345),L(800);const xn="@@HOTPATCHER",pi=()=>{};function xe(t){return{original:t,methods:[t],final:!1}}class fi{constructor(){this._configuration={registry:{},getEmptyAction:"null"},this.__type__=xn}get configuration(){return this._configuration}get getEmptyAction(){return this.configuration.getEmptyAction}set getEmptyAction(e){this.configuration.getEmptyAction=e}control(e){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!e||e.__type__!==xn)throw new Error("Failed taking control of target HotPatcher instance: Invalid type or object");return Object.keys(e.configuration.registry).forEach(r=>{this.configuration.registry.hasOwnProperty(r)?n&&(this.configuration.registry[r]=Object.assign({},e.configuration.registry[r])):this.configuration.registry[r]=Object.assign({},e.configuration.registry[r])}),e._configuration=this.configuration,this}execute(e){const n=this.get(e)||pi;for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return n(...i)}get(e){const n=this.configuration.registry[e];if(!n)switch(this.getEmptyAction){case"null":return null;case"throw":throw new Error("Failed handling method request: No method provided for override: ".concat(e));default:throw new Error("Failed handling request which resulted in an empty method: Invalid empty-action specified: ".concat(this.getEmptyAction))}return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];if(i.length===0)throw new Error("Failed creating sequence: No functions provided");return function(){for(var u=arguments.length,a=new Array(u),c=0;c<u;c++)a[c]=arguments[c];let o=a;const l=this;for(;i.length>0;)o=[i.shift().apply(l,o)];return o[0]}}(...n.methods)}isPatched(e){return!!this.configuration.registry[e]}patch(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{chain:i=!1}=r;if(this.configuration.registry[e]&&this.configuration.registry[e].final)throw new Error("Failed patching '".concat(e,"': Method marked as being final"));if(typeof n!="function")throw new Error("Failed patching '".concat(e,"': Provided method is not a function"));if(i)this.configuration.registry[e]?this.configuration.registry[e].methods.push(n):this.configuration.registry[e]=xe(n);else if(this.isPatched(e)){const{original:s}=this.configuration.registry[e];this.configuration.registry[e]=Object.assign(xe(n),{original:s})}else this.configuration.registry[e]=xe(n);return this}patchInline(e,n){this.isPatched(e)||this.patch(e,n);for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this.execute(e,...i)}plugin(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(s=>{this.patch(e,s,{chain:!0})}),this}restore(e){if(!this.isPatched(e))throw new Error("Failed restoring method: No method present for key: ".concat(e));if(typeof this.configuration.registry[e].original!="function")throw new Error("Failed restoring method: Original method not found or of invalid type for key: ".concat(e));return this.configuration.registry[e].methods=[this.configuration.registry[e].original],this}setFinal(e){if(!this.configuration.registry.hasOwnProperty(e))throw new Error("Failed marking '".concat(e,"' as final: No method found for key"));return this.configuration.registry[e].final=!0,this}}let Ne=null;function er(){return Ne||(Ne=new fi),Ne}function se(t){return function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}(t)?Object.assign({},t):Object.setPrototypeOf(Object.assign({},t),Object.getPrototypeOf(t))}function Nn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let r=null,i=[...e];for(;i.length>0;){const s=i.shift();r=r?nr(r,s):se(s)}return r}function nr(t,e){const n=se(t);return Object.keys(e).forEach(r=>{n.hasOwnProperty(r)?Array.isArray(e[r])?n[r]=Array.isArray(n[r])?[...n[r],...e[r]]:[...e[r]]:typeof e[r]=="object"&&e[r]?n[r]=typeof n[r]=="object"&&n[r]?nr(n[r],e[r]):se(e[r]):n[r]=e[r]:n[r]=e[r]}),n}function di(t){const e={};for(const n of t.keys())e[n]=t.get(n);return e}function $e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length===0)return{};const r={};return e.reduce((i,s)=>(Object.keys(s).forEach(u=>{const a=u.toLowerCase();r.hasOwnProperty(a)?i[r[a]]=s[u]:(r[a]=u,i[u]=s[u])}),i),{})}L(805);const gi=typeof ArrayBuffer=="function",{toString:mi}=Object.prototype;function rr(t){return gi&&(t instanceof ArrayBuffer||mi.call(t)==="[object ArrayBuffer]")}function ir(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function ze(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}function Le(t,e,n){return t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t}const sr=ze(function(t){const e=t._digest;return delete t._digest,e.hasDigestAuth&&(t=Nn(t,{headers:{Authorization:bn(t,e)}})),Le(oe(t),function(n){let r=!1;return i=function(u){return r?u:n},(s=function(){if(n.status==401)return e.hasDigestAuth=function(u,a){if(!Jn(u))return!1;const c=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;for(;;){const o=u.headers&&u.headers.get("www-authenticate")||"",l=c.exec(o);if(!l)break;a[l[1]]=l[2]||l[3]}return a.nc+=1,a.cnonce=function(){let o="";for(let l=0;l<32;++l)o="".concat(o).concat(ai[Math.floor(16*Math.random())]);return o}(),!0}(n,e),function(){if(e.hasDigestAuth)return Le(oe(t=Nn(t,{headers:{Authorization:bn(t,e)}})),function(u){return u.status==401?e.hasDigestAuth=!1:e.nc++,r=!0,u})}();e.nc++}())&&s.then?s.then(i):i(s);var i,s})}),vi=ze(function(t,e){return Le(oe(t),function(n){return n.ok?(e.authType=nt.Password,n):n.status==401&&Jn(n)?(e.authType=nt.Digest,tr(e,e.username,e.password,void 0,void 0),t._digest=e.digest,sr(t)):n})}),z=ze(function(t,e){return e.authType===nt.Auto?vi(t,e):t._digest?sr(t):oe(t)});function X(t,e,n){const r=se(t);return r.headers=$e(e.headers,r.headers||{},n.headers||{}),n.data!==void 0&&(r.data=n.data),n.signal&&(r.signal=n.signal),e.httpAgent&&(r.httpAgent=e.httpAgent),e.httpsAgent&&(r.httpsAgent=e.httpsAgent),e.digest&&(r._digest=e.digest),typeof e.withCredentials=="boolean"&&(r.withCredentials=e.withCredentials),r}function oe(t){const e=er();return e.patchInline("request",n=>e.patchInline("fetch",li,n.url,function(r){let i={};const s={method:r.method};if(r.headers&&(i=$e(i,r.headers)),r.data!==void 0){const[u,a]=function(c){if(typeof c=="string")return[c,{}];if(ir(c))return[c,{}];if(rr(c))return[c,{}];if(c&&typeof c=="object")return[JSON.stringify(c),{"content-type":"application/json"}];throw new Error("Unable to convert request body: Unexpected body type: "+typeof c)}(r.data);s.body=u,i=$e(i,a)}return r.signal&&(s.signal=r.signal),r.withCredentials&&(s.credentials="include"),s.headers=i,s}(n)),t)}var yi=L(285);const ae=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},bi={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},kt=t=>t.replace(/[[\]\\-]/g,"\\$&"),An=t=>t.join(""),Ei=(t,e)=>{const n=e;if(t.charAt(n)!=="[")throw new Error("not in a brace expression");const r=[],i=[];let s=n+1,u=!1,a=!1,c=!1,o=!1,l=n,p="";t:for(;s<t.length;){const g=t.charAt(s);if(g!=="!"&&g!=="^"||s!==n+1){if(g==="]"&&u&&!c){l=s+1;break}if(u=!0,g!=="\\"||c){if(g==="["&&!c){for(const[v,[E,m,y]]of Object.entries(bi))if(t.startsWith(v,s)){if(p)return["$.",!1,t.length-n,!0];s+=v.length,y?i.push(E):r.push(E),a=a||m;continue t}}c=!1,p?(g>p?r.push(kt(p)+"-"+kt(g)):g===p&&r.push(kt(g)),p="",s++):t.startsWith("-]",s+1)?(r.push(kt(g+"-")),s+=2):t.startsWith("-",s+1)?(p=g,s+=2):(r.push(kt(g)),s++)}else c=!0,s++}else o=!0,s++}if(l<s)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,t.length-n,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!o)return[(h=r[0].length===2?r[0].slice(-1):r[0],h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),!1,l-n,!1];var h;const f="["+(o?"^":"")+An(r)+"]",d="["+(o?"":"^")+An(i)+"]";return[r.length&&i.length?"("+f+"|"+d+")":r.length?f:d,a,l-n,!0]},Vt=function(t){let{windowsPathsNoEscape:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")},wi=new Set(["!","?","+","*","@"]),On=t=>wi.has(t),Ae="(?!\\.)",xi=new Set(["[","."]),Ni=new Set(["..","."]),Ai=new Set("().*{}+?[]^$\\!"),Xe="[^/]",Tn=Xe+"*?",In=Xe+"+?";var G,H,yt,F,V,Ot,_t,Tt,mt,St,qt,$t,or,Pt,te,je,ar;const et=class et{constructor(e,n){ot(this,$t);j(this,"type");ot(this,G);ot(this,H);ot(this,yt,!1);ot(this,F,[]);ot(this,V);ot(this,Ot);ot(this,_t);ot(this,Tt,!1);ot(this,mt);ot(this,St);ot(this,qt,!1);let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.type=e,e&&M(this,H,!0),M(this,V,n),M(this,G,I(this,V)?I(I(this,V),G):this),M(this,mt,I(this,G)===this?r:I(I(this,G),mt)),M(this,_t,I(this,G)===this?[]:I(I(this,G),_t)),e!=="!"||I(I(this,G),Tt)||I(this,_t).push(this),M(this,Ot,I(this,V)?I(I(this,V),F).length:0)}get hasMagic(){if(I(this,H)!==void 0)return I(this,H);for(const e of I(this,F))if(typeof e!="string"&&(e.type||e.hasMagic))return M(this,H,!0);return I(this,H)}toString(){return I(this,St)!==void 0?I(this,St):this.type?M(this,St,this.type+"("+I(this,F).map(e=>String(e)).join("|")+")"):M(this,St,I(this,F).map(e=>String(e)).join(""))}push(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n)if(i!==""){if(typeof i!="string"&&!(i instanceof et&&I(i,V)===this))throw new Error("invalid part: "+i);I(this,F).push(i)}}toJSON(){var n;const e=this.type===null?I(this,F).slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...I(this,F).map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===I(this,G)||I(I(this,G),Tt)&&((n=I(this,V))==null?void 0:n.type)==="!")&&e.push({}),e}isStart(){var n;if(I(this,G)===this)return!0;if(!((n=I(this,V))!=null&&n.isStart()))return!1;if(I(this,Ot)===0)return!0;const e=I(this,V);for(let r=0;r<I(this,Ot);r++){const i=I(e,F)[r];if(!(i instanceof et&&i.type==="!"))return!1}return!0}isEnd(){var n,r,i;if(I(this,G)===this||((n=I(this,V))==null?void 0:n.type)==="!")return!0;if(!((r=I(this,V))!=null&&r.isEnd()))return!1;if(!this.type)return(i=I(this,V))==null?void 0:i.isEnd();const e=I(this,V)?I(I(this,V),F).length:0;return I(this,Ot)===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){const n=new et(this.type,e);for(const r of I(this,F))n.copyIn(r);return n}static fromGlob(e){var i;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=new et(null,void 0,n);return xt(i=et,Pt,te).call(i,e,r,0,n),r}toMMPattern(){if(this!==I(this,G))return I(this,G).toMMPattern();const e=this.toString(),[n,r,i,s]=this.toRegExpSource();if(!(i||I(this,H)||I(this,mt).nocase&&!I(this,mt).nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;const u=(I(this,mt).nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp("^".concat(n,"$"),u),{_src:n,_glob:e})}get options(){return I(this,mt)}toRegExpSource(e){var c;const n=e!=null?e:!!I(this,mt).dot;if(I(this,G)===this&&xt(this,$t,or).call(this),!this.type){const o=this.isStart()&&this.isEnd(),l=I(this,F).map(f=>{var m;const[d,g,v,E]=typeof f=="string"?xt(m=et,Pt,ar).call(m,f,I(this,H),o):f.toRegExpSource(e);return M(this,H,I(this,H)||v),M(this,yt,I(this,yt)||E),d}).join("");let p="";if(this.isStart()&&typeof I(this,F)[0]=="string"&&(I(this,F).length!==1||!Ni.has(I(this,F)[0]))){const f=xi,d=n&&f.has(l.charAt(0))||l.startsWith("\\.")&&f.has(l.charAt(2))||l.startsWith("\\.\\.")&&f.has(l.charAt(4)),g=!n&&!e&&f.has(l.charAt(0));p=d?"(?!(?:^|/)\\.\\.?(?:$|/))":g?Ae:""}let h="";return this.isEnd()&&I(I(this,G),Tt)&&((c=I(this,V))==null?void 0:c.type)==="!"&&(h="(?:$|\\/)"),[p+l+h,Vt(l),M(this,H,!!I(this,H)),I(this,yt)]}const r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:";let s=xt(this,$t,je).call(this,n);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){const o=this.toString();return M(this,F,[o]),this.type=null,M(this,H,void 0),[o,Vt(this.toString()),!1,!1]}let u=!r||e||n?"":xt(this,$t,je).call(this,!0);u===s&&(u=""),u&&(s="(?:".concat(s,")(?:").concat(u,")*?"));let a="";return a=this.type==="!"&&I(this,qt)?(this.isStart()&&!n?Ae:"")+In:i+s+(this.type==="!"?"))"+(!this.isStart()||n||e?"":Ae)+Tn+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&u?")":this.type==="*"&&u?")?":")".concat(this.type)),[a,Vt(s),M(this,H,!!I(this,H)),I(this,yt)]}};G=new WeakMap,H=new WeakMap,yt=new WeakMap,F=new WeakMap,V=new WeakMap,Ot=new WeakMap,_t=new WeakMap,Tt=new WeakMap,mt=new WeakMap,St=new WeakMap,qt=new WeakMap,$t=new WeakSet,or=function(){if(this!==I(this,G))throw new Error("should only call on root");if(I(this,Tt))return this;let e;for(this.toString(),M(this,Tt,!0);e=I(this,_t).pop();){if(e.type!=="!")continue;let n=e,r=I(n,V);for(;r;){for(let i=I(n,Ot)+1;!r.type&&i<I(r,F).length;i++)for(const s of I(e,F)){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(I(r,F)[i])}n=r,r=I(n,V)}}return this},Pt=new WeakSet,te=function(e,n,r,i){var f,d;let s=!1,u=!1,a=-1,c=!1;if(n.type===null){let g=r,v="";for(;g<e.length;){const E=e.charAt(g++);if(s||E==="\\")s=!s,v+=E;else if(u)g===a+1?E!=="^"&&E!=="!"||(c=!0):E!=="]"||g===a+2&&c||(u=!1),v+=E;else if(E!=="[")if(i.noext||!On(E)||e.charAt(g)!=="(")v+=E;else{n.push(v),v="";const m=new et(E,n);g=xt(f=et,Pt,te).call(f,e,m,g,i),n.push(m)}else u=!0,a=g,c=!1,v+=E}return n.push(v),g}let o=r+1,l=new et(null,n);const p=[];let h="";for(;o<e.length;){const g=e.charAt(o++);if(s||g==="\\")s=!s,h+=g;else if(u)o===a+1?g!=="^"&&g!=="!"||(c=!0):g!=="]"||o===a+2&&c||(u=!1),h+=g;else if(g!=="[")if(On(g)&&e.charAt(o)==="("){l.push(h),h="";const v=new et(g,l);l.push(v),o=xt(d=et,Pt,te).call(d,e,v,o,i)}else if(g!=="|"){if(g===")")return h===""&&I(n,F).length===0&&M(n,qt,!0),l.push(h),h="",n.push(...p,l),o;h+=g}else l.push(h),h="",p.push(l),l=new et(null,n);else u=!0,a=o,c=!1,h+=g}return n.type=null,M(n,H,void 0),M(n,F,[e.substring(r-1)]),o},je=function(e){return I(this,F).map(n=>{if(typeof n=="string")throw new Error("string type in extglob ast??");const[r,i,s,u]=n.toRegExpSource(e);return M(this,yt,I(this,yt)||u),r}).filter(n=>!(this.isStart()&&this.isEnd()&&!n)).join("|")},ar=function(e,n){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=!1,s="",u=!1;for(let a=0;a<e.length;a++){const c=e.charAt(a);if(i)i=!1,s+=(Ai.has(c)?"\\":"")+c;else if(c!=="\\"){if(c==="["){const[o,l,p,h]=Ei(e,a);if(p){s+=o,u=u||l,a+=p-1,n=n||h;continue}}c!=="*"?c!=="?"?s+=c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):(s+=Xe,n=!0):(s+=r&&e==="*"?In:Tn,n=!0)}else a===e.length-1?s+="\\\\":i=!0}return[s,Vt(e),!!n,u]},ot(et,Pt);let ue=et;const J=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ae(e),!(!n.nocomment&&e.charAt(0)==="#")&&new le(e,n).match(t)},Oi=/^\*+([^+@!?\*\[\(]*)$/,Ti=t=>e=>!e.startsWith(".")&&e.endsWith(t),Ii=t=>e=>e.endsWith(t),Pi=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),Ri=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),Ci=/^\*+\.\*+$/,_i=t=>!t.startsWith(".")&&t.includes("."),Si=t=>t!=="."&&t!==".."&&t.includes("."),$i=/^\.\*+$/,Li=t=>t!=="."&&t!==".."&&t.startsWith("."),ji=/^\*+$/,Fi=t=>t.length!==0&&!t.startsWith("."),Di=t=>t.length!==0&&t!=="."&&t!=="..",ki=/^\?+([^+@!?\*\[\(]*)?$/,Mi=t=>{let[e,n=""]=t;const r=ur([e]);return n?(n=n.toLowerCase(),i=>r(i)&&i.toLowerCase().endsWith(n)):r},Ui=t=>{let[e,n=""]=t;const r=lr([e]);return n?(n=n.toLowerCase(),i=>r(i)&&i.toLowerCase().endsWith(n)):r},Bi=t=>{let[e,n=""]=t;const r=lr([e]);return n?i=>r(i)&&i.endsWith(n):r},Vi=t=>{let[e,n=""]=t;const r=ur([e]);return n?i=>r(i)&&i.endsWith(n):r},ur=t=>{let[e]=t;const n=e.length;return r=>r.length===n&&!r.startsWith(".")},lr=t=>{let[e]=t;const n=e.length;return r=>r.length===n&&r!=="."&&r!==".."},cr=typeof Gt=="object"&&Gt?typeof Ee=="object"&&Ee&&Ee.__MINIMATCH_TESTING_PLATFORM__||Gt.platform:"posix";J.sep=cr==="win32"?"\\":"/";const lt=Symbol("globstar **");J.GLOBSTAR=lt,J.filter=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=>J(n,t,e)};const ut=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.assign({},t,e)};J.defaults=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return J;const e=J;return Object.assign(function(n,r){return e(n,r,ut(t,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}))},{Minimatch:class extends e.Minimatch{constructor(n){super(n,ut(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}))}static defaults(n){return e.defaults(ut(t,n)).Minimatch}},AST:class extends e.AST{constructor(n,r){super(n,r,ut(t,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}))}static fromGlob(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.AST.fromGlob(n,ut(t,r))}},unescape:function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.unescape(n,ut(t,r))},escape:function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.escape(n,ut(t,r))},filter:function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.filter(n,ut(t,r))},defaults:n=>e.defaults(ut(t,n)),makeRe:function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.makeRe(n,ut(t,r))},braceExpand:function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.braceExpand(n,ut(t,r))},match:function(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e.match(n,r,ut(t,i))},sep:e.sep,GLOBSTAR:lt})};const hr=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ae(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:yi(t)};J.braceExpand=hr,J.makeRe=function(t){return new le(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).makeRe()},J.match=function(t,e){const n=new le(e,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{});return t=t.filter(r=>n.match(r)),n.options.nonull&&!t.length&&t.push(e),t};const Pn=/[?*]|[+@!]\(.*?\)|\[|\]/;class le{constructor(e){j(this,"options");j(this,"set");j(this,"pattern");j(this,"windowsPathsNoEscape");j(this,"nonegate");j(this,"negate");j(this,"comment");j(this,"empty");j(this,"preserveMultipleSlashes");j(this,"partial");j(this,"globSet");j(this,"globParts");j(this,"nocase");j(this,"isWindows");j(this,"platform");j(this,"windowsNoMagicRoot");j(this,"regexp");let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ae(e),n=n||{},this.options=n,this.pattern=e,this.platform=n.platform||cr,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!n.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!n.nonegate,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=n.windowsNoMagicRoot!==void 0?n.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const e of this.set)for(const n of e)if(typeof n!="string")return!0;return!1}debug(){}make(){const e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#")return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],n.debug&&(this.debug=function(){return console.error(...arguments)}),this.debug(this.pattern,this.globSet);const r=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map((s,u,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){const c=!(s[0]!==""||s[1]!==""||s[2]!=="?"&&Pn.test(s[2])||Pn.test(s[3])),o=/^[a-z]:/i.test(s[0]);if(c)return[...s.slice(0,4),...s.slice(4).map(l=>this.parse(l))];if(o)return[s[0],...s.slice(1).map(l=>this.parse(l))]}return s.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){const u=this.set[s];u[0]===""&&u[1]===""&&this.globParts[s][2]==="?"&&typeof u[3]=="string"&&/^[a-z]:$/i.test(u[3])&&(u[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");const{optimizationLevel:n=1}=this.options;return n>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):e=n>=1?this.levelOneOptimize(e):this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(n=>{let r=-1;for(;(r=n.indexOf("**",r+1))!==-1;){let i=r;for(;n[i+1]==="**";)i++;i!==r&&n.splice(r,i-r)}return n})}levelOneOptimize(e){return e.map(n=>(n=n.reduce((r,i)=>{const s=r[r.length-1];return i==="**"&&s==="**"?r:i===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(r.pop(),r):(r.push(i),r)},[])).length===0?[""]:n)}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let n=!1;do{if(n=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){const s=e[i];i===1&&s===""&&e[0]===""||s!=="."&&s!==""||(n=!0,e.splice(i,1),i--)}e[0]!=="."||e.length!==2||e[1]!=="."&&e[1]!==""||(n=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){const i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(n=!0,e.splice(r-1,2),r-=2)}}while(n);return e.length===0?[""]:e}firstPhasePreProcess(e){let n=!1;do{n=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let u=i;for(;r[u+1]==="**";)u++;u>i&&r.splice(i+1,u-i);let a=r[i+1];const c=r[i+2],o=r[i+3];if(a!==".."||!c||c==="."||c===".."||!o||o==="."||o==="..")continue;n=!0,r.splice(i,1);const l=r.slice(0);l[i]="**",e.push(l),i--}if(!this.preserveMultipleSlashes){for(let u=1;u<r.length-1;u++){const a=r[u];u===1&&a===""&&r[0]===""||a!=="."&&a!==""||(n=!0,r.splice(u,1),u--)}r[0]!=="."||r.length!==2||r[1]!=="."&&r[1]!==""||(n=!0,r.pop())}let s=0;for(;(s=r.indexOf("..",s+1))!==-1;){const u=r[s-1];if(u&&u!=="."&&u!==".."&&u!=="**"){n=!0;const a=s===1&&r[s+1]==="**"?["."]:[];r.splice(s-1,2,...a),r.length===0&&r.push(""),s-=2}}}}while(n);return e}secondPhasePreProcess(e){for(let n=0;n<e.length-1;n++)for(let r=n+1;r<e.length;r++){const i=this.partsMatch(e[n],e[r],!this.preserveMultipleSlashes);if(i){e[n]=[],e[r]=i;break}}return e.filter(n=>n.length)}partsMatch(e,n){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=0,s=0,u=[],a="";for(;i<e.length&&s<n.length;)if(e[i]===n[s])u.push(a==="b"?n[s]:e[i]),i++,s++;else if(r&&e[i]==="**"&&n[s]===e[i+1])u.push(e[i]),i++;else if(r&&n[s]==="**"&&e[i]===n[s+1])u.push(n[s]),s++;else if(e[i]!=="*"||!n[s]||!this.options.dot&&n[s].startsWith(".")||n[s]==="**"){if(n[s]!=="*"||!e[i]||!this.options.dot&&e[i].startsWith(".")||e[i]==="**"||a==="a")return!1;a="b",u.push(n[s]),i++,s++}else{if(a==="b")return!1;a="a",u.push(e[i]),i++,s++}return e.length===n.length&&u}parseNegate(){if(this.nonegate)return;const e=this.pattern;let n=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)n=!n,r++;r&&(this.pattern=e.slice(r)),this.negate=n}matchOne(e,n){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const i=this.options;if(this.isWindows){const g=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!g&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),E=typeof n[0]=="string"&&/^[a-z]:$/i.test(n[0]),m=v?3:g?0:void 0,y=!E&&n[0]===""&&n[1]===""&&n[2]==="?"&&typeof n[3]=="string"&&/^[a-z]:$/i.test(n[3])?3:E?0:void 0;if(typeof m=="number"&&typeof y=="number"){const[w,b]=[e[m],n[y]];w.toLowerCase()===b.toLowerCase()&&(n[y]=w,y>m?n=n.slice(y):m>y&&(e=e.slice(m)))}}const{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var u=0,a=0,c=e.length,o=n.length;u<c&&a<o;u++,a++){this.debug("matchOne loop");var l=n[a],p=e[u];if(this.debug(n,l,p),l===!1)return!1;if(l===lt){this.debug("GLOBSTAR",[n,l,p]);var h=u,f=a+1;if(f===o){for(this.debug("** at the end");u<c;u++)if(e[u]==="."||e[u]===".."||!i.dot&&e[u].charAt(0)===".")return!1;return!0}for(;h<c;){var d=e[h];if(this.debug("\nglobstar while",e,h,n,f,d),this.matchOne(e.slice(h),n.slice(f),r))return this.debug("globstar found match!",h,c,d),!0;if(d==="."||d===".."||!i.dot&&d.charAt(0)==="."){this.debug("dot detected!",e,h,n,f);break}this.debug("globstar swallow a segment, and continue"),h++}return!(!r||(this.debug("\n>>> no match, partial?",e,h,n,f),h!==c))}let g;if(typeof l=="string"?(g=p===l,this.debug("string match",l,p,g)):(g=l.test(p),this.debug("pattern match",l,p,g)),!g)return!1}if(u===c&&a===o)return!0;if(u===c)return r;if(a===o)return u===c-1&&e[u]==="";throw new Error("wtf?")}braceExpand(){return hr(this.pattern,this.options)}parse(e){ae(e);const n=this.options;if(e==="**")return lt;if(e==="")return"";let r,i=null;(r=e.match(ji))?i=n.dot?Di:Fi:(r=e.match(Oi))?i=(n.nocase?n.dot?Ri:Pi:n.dot?Ii:Ti)(r[1]):(r=e.match(ki))?i=(n.nocase?n.dot?Ui:Mi:n.dot?Bi:Vi)(r):(r=e.match(Ci))?i=n.dot?Si:_i:(r=e.match($i))&&(i=Li);const s=ue.fromGlob(e,this.options).toMMPattern();return i&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:i}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const n=this.options,r=n.noglobstar?"[^/]*?":n.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",i=new Set(n.nocase?["i"]:[]);let s=e.map(c=>{const o=c.map(l=>{if(l instanceof RegExp)for(const p of l.flags.split(""))i.add(p);return typeof l=="string"?l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):l===lt?lt:l._src});return o.forEach((l,p)=>{const h=o[p+1],f=o[p-1];l===lt&&f!==lt&&(f===void 0?h!==void 0&&h!==lt?o[p+1]="(?:\\/|"+r+"\\/)?"+h:o[p]=r:h===void 0?o[p-1]=f+"(?:\\/|"+r+")?":h!==lt&&(o[p-1]=f+"(?:\\/|\\/"+r+"\\/)"+h,o[p+1]=lt))}),o.filter(l=>l!==lt).join("/")}).join("|");const[u,a]=e.length>1?["(?:",")"]:["",""];s="^"+u+s+a+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...i].join(""))}catch(c){this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.partial;if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;const r=this.options;this.isWindows&&(e=e.split("\\").join("/"));const i=this.slashSplit(e);this.debug(this.pattern,"split",i);const s=this.set;this.debug(this.pattern,"set",s);let u=i[i.length-1];if(!u)for(let a=i.length-2;!u&&a>=0;a--)u=i[a];for(let a=0;a<s.length;a++){const c=s[a];let o=i;if(r.matchBase&&c.length===1&&(o=[u]),this.matchOne(o,c,n))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate}static defaults(e){return J.defaults(e).Minimatch}}function We(t){const e=new Error("".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"","Invalid response: ").concat(t.status," ").concat(t.statusText));return e.status=t.status,e.response=t,e}function W(t,e){const{status:n}=e;if(n===401&&t.digest)return e;if(n>=400)throw We(e);return e}function Lt(t,e){return arguments.length>2&&arguments[2]!==void 0&&arguments[2]?{data:e,headers:t.headers?di(t.headers):{},status:t.status,statusText:t.statusText}:e}J.AST=ue,J.Minimatch=le,J.escape=function(t){let{windowsPathsNoEscape:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&")},J.unescape=Vt;const Gi=(Rn=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=X({url:k(t.remoteURL,D(e)),method:"COPY",headers:{Destination:k(t.remoteURL,D(n)),Overwrite:r.overwrite===!1?"F":"T",Depth:r.shallow?"0":"infinity"}},t,r);return u=function(a){W(t,a)},(s=z(i,t))&&s.then||(s=Promise.resolve(s)),u?s.then(u):s;var s,u},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(Rn.apply(this,t))}catch(n){return Promise.reject(n)}});var Rn,qe=L(635),zi=L(829),vt=L.n(zi),jt=function(t){return t.Array="array",t.Object="object",t.Original="original",t}(jt||{});function Yt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jt.Original;const r=vt().get(t,e);return n==="array"&&Array.isArray(r)===!1?[r]:n==="object"&&Array.isArray(r)?r[0]:r}function Kt(t){return new Promise(e=>{e(function(n){const{multistatus:r}=n;if(r==="")return{multistatus:{response:[]}};if(!r)throw new Error("Invalid response: No root multistatus found");const i={multistatus:Array.isArray(r)?r[0]:r};return vt().set(i,"multistatus.response",Yt(i,"multistatus.response",jt.Array)),vt().set(i,"multistatus.response",vt().get(i,"multistatus.response").map(s=>function(u){const a=Object.assign({},u);return a.status?vt().set(a,"status",Yt(a,"status",jt.Object)):(vt().set(a,"propstat",Yt(a,"propstat",jt.Object)),vt().set(a,"propstat.prop",Yt(a,"propstat.prop",jt.Object))),a}(s))),i}(new qe.XMLParser({removeNSPrefix:!0,numberParseOptions:{hex:!0,leadingZeros:!1}}).parse(t)))})}function pe(t,e){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const{getlastmodified:r=null,getcontentlength:i="0",resourcetype:s=null,getcontenttype:u=null,getetag:a=null}=t,c=s&&typeof s=="object"&&s.collection!==void 0?"directory":"file",o={filename:e,basename:re().basename(e),lastmod:r,size:parseInt(i,10),type:c,etag:typeof a=="string"?a.replace(/"/g,""):null};return c==="file"&&(o.mime=u&&typeof u=="string"?u.split(";")[0]:""),n&&(t.displayname!==void 0&&(t.displayname=String(t.displayname)),o.props=t),o}function pr(t,e){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],r=null;try{t.multistatus.response[0].propstat&&(r=t.multistatus.response[0])}catch(l){}if(!r)throw new Error("Failed getting item stat: bad response");const{propstat:{prop:i,status:s}}=r,[u,a,c]=s.split(" ",3),o=parseInt(a,10);if(o>=400){const l=new Error("Invalid response: ".concat(o," ").concat(c));throw l.status=o,l}return pe(i,Xt(e),n)}function fr(t){switch(String(t)){case"-3":return"unlimited";case"-2":case"-1":return"unknown";default:return parseInt(String(t),10)}}function Oe(t,e,n){return t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t}const He=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{details:r=!1}=n,i=X({url:k(t.remoteURL,D(e)),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},t,n);return Oe(z(i,t),function(s){return W(t,s),Oe(s.text(),function(u){return Oe(Kt(u),function(a){const c=pr(a,e,r);return Lt(s,c,r)})})})});function dr(t,e,n){return t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t}const Xi=gr(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=function(s){if(!s||s==="/")return[];let u=s;const a=[];do a.push(u),u=re().dirname(u);while(u&&u!=="/");return a}(Xt(e));r.sort((s,u)=>s.length>u.length?1:u.length>s.length?-1:0);let i=!1;return function(s,u,a){if(typeof s[_n]=="function"){let g=function(v){try{for(;!(c=p.next()).done;)if((v=u(c.value))&&v.then){if(!Sn(v))return void v.then(g,l||(l=rt.bind(null,o=new Ft,2)));v=v.v}o?rt(o,1,v):o=v}catch(E){rt(o||(o=new Ft),2,E)}};var c,o,l,p=s[_n]();if(g(),p.return){var h=function(v){try{c.done||p.return()}catch(E){}return v};if(o&&o.then)return o.then(h,function(v){throw h(v)});h()}return o}if(!("length"in s))throw new TypeError("Object is not iterable");for(var f=[],d=0;d<s.length;d++)f.push(s[d]);return function(g,v,E){var m,y,w=-1;return function b(A){try{for(;++w<g.length&&(!E||!E());)if((A=v(w))&&A.then){if(!Sn(A))return void A.then(b,y||(y=rt.bind(null,m=new Ft,2)));A=A.v}m?rt(m,1,A):m=A}catch(x){rt(m||(m=new Ft),2,x)}}(),m}(f,function(g){return u(f[g])},a)}(r,function(s){return u=function(){return function(c,o){try{var l=dr(He(t,s),function(p){if(p.type!=="directory")throw new Error("Path includes a file: ".concat(e))})}catch(p){return o(p)}return l&&l.then?l.then(void 0,o):l}(0,function(c){const o=c;return function(){if(o.status===404)return i=!0,Cn(Fe(t,s,gt(st({},n),{recursive:!1})));throw c}()})},(a=function(){if(i)return Cn(Fe(t,s,gt(st({},n),{recursive:!1})))}())&&a.then?a.then(u):u();var u,a},function(){return!1})});function gr(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}function Wi(){}function Cn(t,e){return t&&t.then?t.then(Wi):Promise.resolve()}const _n=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function rt(t,e,n){if(!t.s){if(n instanceof Ft){if(!n.s)return void(n.o=rt.bind(null,t,e));1&e&&(e=n.s),n=n.v}if(n&&n.then)return void n.then(rt.bind(null,t,e),rt.bind(null,t,2));t.s=e,t.v=n;const r=t.o;r&&r(t)}}const Ft=function(){function t(){}return t.prototype.then=function(e,n){const r=new t,i=this.s;if(i){const s=1&i?e:n;if(s){try{rt(r,1,s(this.v))}catch(u){rt(r,2,u)}return r}return this}return this.o=function(s){try{const u=s.v;1&s.s?rt(r,1,e?e(u):u):n?rt(r,1,n(u)):rt(r,2,u)}catch(u){rt(r,2,u)}},r},t}();function Sn(t){return t instanceof Ft&&1&t.s}const Fe=gr(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.recursive===!0)return Xi(t,e,n);const r=X({url:k(t.remoteURL,(i=D(e),i.endsWith("/")?i:i+"/")),method:"MKCOL"},t,n);var i;return dr(z(r,t),function(s){W(t,s)})});var qi=L(388),$n=L.n(qi);const Hi=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r={};if(typeof n.range=="object"&&typeof n.range.start=="number"){let a="bytes=".concat(n.range.start,"-");typeof n.range.end=="number"&&(a="".concat(a).concat(n.range.end)),r.Range=a}const i=X({url:k(t.remoteURL,D(e)),method:"GET",headers:r},t,n);return u=function(a){if(W(t,a),r.Range&&a.status!==206){const c=new Error("Invalid response code for partial request: ".concat(a.status));throw c.status=a.status,c}return n.callback&&setTimeout(()=>{n.callback(a)},0),a.body},(s=z(i,t))&&s.then||(s=Promise.resolve(s)),u?s.then(u):s;var s,u}),Ki=()=>{},Zi=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}(function(t,e,n){n.url||(n.url=k(t.remoteURL,D(e)));const r=X(n,t,{});return s=function(u){return W(t,u),u},(i=z(r,t))&&i.then||(i=Promise.resolve(i)),s?i.then(s):i;var i,s}),Yi=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=X({url:k(t.remoteURL,D(e)),method:"DELETE"},t,n);return s=function(u){W(t,u)},(i=z(r,t))&&i.then||(i=Promise.resolve(i)),s?i.then(s):i;var i,s}),Ji=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function(r,i){try{var s=(u=He(t,e,n),a=function(){return!0},c?a?a(u):u:(u&&u.then||(u=Promise.resolve(u)),a?u.then(a):u))}catch(o){return i(o)}var u,a,c;return s&&s.then?s.then(void 0,i):s}(0,function(r){if(r.status===404)return!1;throw r})});function Te(t,e,n){return t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t}const Qi=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=X({url:k(t.remoteURL,D(e),"/"),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:n.deep?"infinity":"1"}},t,n);return Te(z(r,t),function(i){return W(t,i),Te(i.text(),function(s){if(!s)throw new Error("Failed parsing directory contents: Empty response");return Te(Kt(s),function(u){const a=yn(e);let c=function(o,l,p){let h=arguments.length>3&&arguments[3]!==void 0&&arguments[3],f=arguments.length>4&&arguments[4]!==void 0&&arguments[4];const d=re().join(l,"/"),{multistatus:{response:g}}=o,v=g.map(E=>{const m=function(w){try{return w.replace(/^https?:\/\/[^\/]+/,"")}catch(b){throw new it(b,"Failed normalising HREF")}}(E.href),{propstat:{prop:y}}=E;return pe(y,d==="/"?decodeURIComponent(Xt(m)):Xt(re().relative(decodeURIComponent(d),decodeURIComponent(m))),h)});return f?v:v.filter(E=>E.basename&&(E.type==="file"||E.filename!==p.replace(/\/$/,"")))}(u,yn(t.remoteBasePath||t.remotePath),a,n.details,n.includeSelf);return n.glob&&(c=function(o,l){return o.filter(p=>J(p.filename,l,{matchBase:!0}))}(c,n.glob)),Lt(i,c,n.details)})})})});function Ke(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}const ts=Ke(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=X({url:k(t.remoteURL,D(e)),method:"GET",headers:{Accept:"text/plain"},transformResponse:[rs]},t,n);return ce(z(r,t),function(i){return W(t,i),ce(i.text(),function(s){return Lt(i,s,n.details)})})});function ce(t,e,n){return t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t}const es=Ke(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=X({url:k(t.remoteURL,D(e)),method:"GET"},t,n);return ce(z(r,t),function(i){let s;return W(t,i),function(u,a){var c=u();return c&&c.then?c.then(a):a()}(function(){return ce(i.arrayBuffer(),function(u){s=u})},function(){return Lt(i,s,n.details)})})}),ns=Ke(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{format:r="binary"}=n;if(r!=="binary"&&r!=="text")throw new it({info:{code:Et.InvalidOutputFormat}},"Invalid output format: ".concat(r));return r==="text"?ts(t,e,n):es(t,e,n)}),rs=t=>t;function is(t){return new qe.XMLBuilder({attributeNamePrefix:"@_",format:!0,ignoreAttributes:!1,suppressEmptyNode:!0}).build(mr({lockinfo:{"@_xmlns:d":"DAV:",lockscope:{exclusive:{}},locktype:{write:{}},owner:{href:t}}},"d"))}function mr(t,e){const n=st({},t);for(const r in n)n.hasOwnProperty(r)&&(n[r]&&typeof n[r]=="object"&&r.indexOf(":")===-1?(n["".concat(e,":").concat(r)]=mr(n[r],e),delete n[r]):/^@_/.test(r)===!1&&(n["".concat(e,":").concat(r)]=n[r],delete n[r]));return n}function De(t,e,n){return t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t}function vr(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}const ss=vr(function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=X({url:k(t.remoteURL,D(e)),method:"UNLOCK",headers:{"Lock-Token":n}},t,r);return De(z(i,t),function(s){if(W(t,s),s.status!==204&&s.status!==200)throw We(s)})}),os=vr(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{refreshToken:r,timeout:i=as}=n,s={Accept:"text/plain,application/xml",Timeout:i};r&&(s.If=r);const u=X({url:k(t.remoteURL,D(e)),method:"LOCK",headers:s,data:is(t.contactHref)},t,n);return De(z(u,t),function(a){return W(t,a),De(a.text(),function(c){const o=(h=c,new qe.XMLParser({removeNSPrefix:!0,parseAttributeValue:!0,parseTagValue:!0}).parse(h)),l=vt().get(o,"prop.lockdiscovery.activelock.locktoken.href"),p=vt().get(o,"prop.lockdiscovery.activelock.timeout");var h;if(!l)throw We(a,"No lock token received: ");return{token:l,serverTimeout:p}})})}),as="Infinite, Second-4100000000";function Ie(t,e,n){return t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t}const us=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}(function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e.path||"/",r=X({url:k(t.remoteURL,n),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},t,e);return Ie(z(r,t),function(i){return W(t,i),Ie(i.text(),function(s){return Ie(Kt(s),function(u){const a=function(c){try{const[o]=c.multistatus.response,{propstat:{prop:{"quota-used-bytes":l,"quota-available-bytes":p}}}=o;return l!==void 0&&p!==void 0?{used:parseInt(String(l),10),available:fr(p)}:null}catch(o){}return null}(u);return Lt(i,a,e.details)})})})});function Pe(t,e,n){return t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t}const ls=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{details:r=!1}=n,i=X({url:k(t.remoteURL,D(e)),method:"SEARCH",headers:{Accept:"text/plain,application/xml","Content-Type":t.headers["Content-Type"]||"application/xml; charset=utf-8"}},t,n);return Pe(z(i,t),function(s){return W(t,s),Pe(s.text(),function(u){return Pe(Kt(u),function(a){const c=function(o,l,p){const h={truncated:!1,results:[]};return h.truncated=o.multistatus.response.some(f=>{var d,g;return((g=(f.status||((d=f.propstat)==null?void 0:d.status)).split(" ",3))==null?void 0:g[1])==="507"&&f.href.replace(/\/$/,"").endsWith(D(l).replace(/\/$/,""))}),o.multistatus.response.forEach(f=>{if(f.propstat===void 0)return;const d=f.href.split("/").map(decodeURIComponent).join("/");h.results.push(pe(f.propstat.prop,d,p))}),h}(a,e,r);return Lt(s,c,r)})})})}),cs=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}(function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=X({url:k(t.remoteURL,D(e)),method:"MOVE",headers:{Destination:k(t.remoteURL,D(n)),Overwrite:r.overwrite===!1?"F":"T"}},t,r);return u=function(a){W(t,a)},(s=z(i,t))&&s.then||(s=Promise.resolve(s)),u?s.then(u):s;var s,u});var hs=L(172);const ps=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}(function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const{contentLength:i=!0,overwrite:s=!0}=r,u={"Content-Type":"application/octet-stream"};i===!1||(u["Content-Length"]=typeof i=="number"?"".concat(i):"".concat(function(l){if(rr(l))return l.byteLength;if(ir(l))return l.length;if(typeof l=="string")return(0,hs.d)(l);throw new it({info:{code:Et.DataTypeNoLength}},"Cannot calculate data length: Invalid type")}(n))),s||(u["If-None-Match"]="*");const a=X({url:k(t.remoteURL,D(e)),method:"PUT",headers:u,data:n},t,r);return o=function(l){try{W(t,l)}catch(p){const h=p;if(h.status!==412||s)throw h;return!1}return!0},(c=z(a,t))&&c.then||(c=Promise.resolve(c)),o?c.then(o):c;var c,o}),yr=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=X({url:k(t.remoteURL,D(e)),method:"OPTIONS"},t,n);return s=function(u){var a,c;try{W(t,u)}catch(o){throw o}return{compliance:((a=u.headers.get("DAV"))!=null?a:"").split(",").map(o=>o.trim()),server:(c=u.headers.get("Server"))!=null?c:""}},(i=z(r,t))&&i.then||(i=Promise.resolve(i)),s?i.then(s):i;var i,s});function zt(t,e,n){return t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t}const fs=Ze(function(t,e,n,r,i){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(n>r||n<0)throw new it({info:{code:Et.InvalidUpdateRange}},"Invalid update range ".concat(n," for partial update"));const u={"Content-Type":"application/octet-stream","Content-Length":""+(r-n+1),"Content-Range":"bytes ".concat(n,"-").concat(r,"/*")},a=X({url:k(t.remoteURL,D(e)),method:"PUT",headers:u,data:i},t,s);return zt(z(a,t),function(c){W(t,c)})});function Ln(t,e){var n=t();return n&&n.then?n.then(e):e(n)}const ds=Ze(function(t,e,n,r,i){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(n>r||n<0)throw new it({info:{code:Et.InvalidUpdateRange}},"Invalid update range ".concat(n," for partial update"));const u={"Content-Type":"application/x-sabredav-partialupdate","Content-Length":""+(r-n+1),"X-Update-Range":"bytes=".concat(n,"-").concat(r)},a=X({url:k(t.remoteURL,D(e)),method:"PATCH",headers:u,data:i},t,s);return zt(z(a,t),function(c){W(t,c)})});function Ze(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(r){return Promise.reject(r)}}}const gs=Ze(function(t,e,n,r,i){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};return zt(yr(t,e,s),function(u){let a=!1;return Ln(function(){if(u.compliance.includes("sabredav-partialupdate"))return zt(ds(t,e,n,r,i,s),function(c){return a=!0,c})},function(c){let o=!1;return a?c:Ln(function(){if(u.server.includes("Apache")&&u.compliance.includes("<http://apache.org/dav/propset/fs/1>"))return zt(fs(t,e,n,r,i,s),function(l){return o=!0,l})},function(l){if(o)return l;throw new it({info:{code:Et.NotSupported}},"Not supported")})})})}),ms="https://github.com/perry-mitchell/webdav-client/blob/master/LOCK_CONTACT.md";function vs(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{authType:n=null,remoteBasePath:r,contactHref:i=ms,ha1:s,headers:u={},httpAgent:a,httpsAgent:c,password:o,token:l,username:p,withCredentials:h}=e;let f=n;f||(f=p||o?nt.Password:nt.None);const d={authType:f,remoteBasePath:r,contactHref:i,ha1:s,headers:Object.assign({},u),httpAgent:a,httpsAgent:c,password:o,remotePath:si(t),remoteURL:t,token:l,username:p,withCredentials:h};return tr(d,p,o,l,s),{copyFile:(g,v,E)=>Gi(d,g,v,E),createDirectory:(g,v)=>Fe(d,g,v),createReadStream:(g,v)=>function(E,m){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const w=new($n()).PassThrough;return Hi(E,m,y).then(b=>{b.pipe(w)}).catch(b=>{w.emit("error",b)}),w}(d,g,v),createWriteStream:(g,v,E)=>function(m,y){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ki;const A=new($n()).PassThrough,x={};w.overwrite===!1&&(x["If-None-Match"]="*");const N=X({url:k(m.remoteURL,D(y)),method:"PUT",headers:x,data:A,maxRedirects:0},m,w);return z(N,m).then(O=>W(m,O)).then(O=>{setTimeout(()=>{b(O)},0)}).catch(O=>{A.emit("error",O)}),A}(d,g,v,E),customRequest:(g,v)=>Zi(d,g,v),deleteFile:(g,v)=>Yi(d,g,v),exists:(g,v)=>Ji(d,g,v),getDirectoryContents:(g,v)=>Qi(d,g,v),getFileContents:(g,v)=>ns(d,g,v),getFileDownloadLink:g=>function(v,E){let m=k(v.remoteURL,D(E));const y=/^https:/i.test(m)?"https":"http";switch(v.authType){case nt.None:break;case nt.Password:{const w=En(v.headers.Authorization.replace(/^Basic /i,"").trim());m=m.replace(/^https?:\/\//,"".concat(y,"://").concat(w,"@"));break}default:throw new it({info:{code:Et.LinkUnsupportedAuthType}},"Unsupported auth type for file link: ".concat(v.authType))}return m}(d,g),getFileUploadLink:g=>function(v,E){let m="".concat(k(v.remoteURL,D(E)),"?Content-Type=application/octet-stream");const y=/^https:/i.test(m)?"https":"http";switch(v.authType){case nt.None:break;case nt.Password:{const w=En(v.headers.Authorization.replace(/^Basic /i,"").trim());m=m.replace(/^https?:\/\//,"".concat(y,"://").concat(w,"@"));break}default:throw new it({info:{code:Et.LinkUnsupportedAuthType}},"Unsupported auth type for file link: ".concat(v.authType))}return m}(d,g),getHeaders:()=>Object.assign({},d.headers),getQuota:g=>us(d,g),lock:(g,v)=>os(d,g,v),moveFile:(g,v,E)=>cs(d,g,v,E),putFileContents:(g,v,E)=>ps(d,g,v,E),partialUpdateFileContents:(g,v,E,m,y)=>gs(d,g,v,E,m,y),getDAVCompliance:g=>yr(d,g),search:(g,v)=>ls(d,g,v),setHeaders:g=>{d.headers=Object.assign({},g)},stat:(g,v)=>He(d,g,v),unlock:(g,v,E)=>ss(d,g,v,E)}}ht.hT,ht.O4,ht.Kd,ht.YK;var ys=ht.UU,bs=ht.Gu,Es=ht.ky,ws=ht.h4;ht.ch,ht.hq,ht.i5;var Ye={},fe={};(function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",r="["+e+"]["+n+"]*",i=new RegExp("^"+r+"$"),s=function(a,c){const o=[];let l=c.exec(a);for(;l;){const p=[];p.startIndex=c.lastIndex-l[0].length;const h=l.length;for(let f=0;f<h;f++)p.push(l[f]);o.push(p),l=c.exec(a)}return o},u=function(a){const c=i.exec(a);return!(c===null||typeof c>"u")};t.isExist=function(a){return typeof a<"u"},t.isEmptyObject=function(a){return Object.keys(a).length===0},t.merge=function(a,c,o){if(c){const l=Object.keys(c),p=l.length;for(let h=0;h<p;h++)o==="strict"?a[l[h]]=[c[l[h]]]:a[l[h]]=c[l[h]]}},t.getValue=function(a){return t.isExist(a)?a:""},t.isName=u,t.getAllMatches=s,t.nameRegexp=r})(fe);const Je=fe,xs={allowBooleanAttributes:!1,unpairedTags:[]};Ye.validate=function(t,e){e=Object.assign({},xs,e);const n=[];let r=!1,i=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let s=0;s<t.length;s++)if(t[s]==="<"&&t[s+1]==="?"){if(s+=2,s=Fn(t,s),s.err)return s}else if(t[s]==="<"){let u=s;if(s++,t[s]==="!"){s=Dn(t,s);continue}else{let a=!1;t[s]==="/"&&(a=!0,s++);let c="";for(;s<t.length&&t[s]!==">"&&t[s]!==" "&&t[s]!=="	"&&t[s]!=="\n"&&t[s]!=="\r";s++)c+=t[s];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),s--),!Cs(c)){let p;return c.trim().length===0?p="Invalid space after '<'.":p="Tag '"+c+"' is an invalid name.",U("InvalidTag",p,tt(t,s))}const o=Os(t,s);if(o===!1)return U("InvalidAttr","Attributes for '"+c+"' have open quote.",tt(t,s));let l=o.value;if(s=o.index,l[l.length-1]==="/"){const p=s-l.length;l=l.substring(0,l.length-1);const h=kn(l,e);if(h===!0)r=!0;else return U(h.err.code,h.err.msg,tt(t,p+h.err.line))}else if(a)if(o.tagClosed){if(l.trim().length>0)return U("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",tt(t,u));if(n.length===0)return U("InvalidTag","Closing tag '"+c+"' has not been opened.",tt(t,u));{const p=n.pop();if(c!==p.tagName){let h=tt(t,p.tagStartPos);return U("InvalidTag","Expected closing tag '"+p.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+c+"'.",tt(t,u))}n.length==0&&(i=!0)}}else return U("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",tt(t,s));else{const p=kn(l,e);if(p!==!0)return U(p.err.code,p.err.msg,tt(t,s-l.length+p.err.line));if(i===!0)return U("InvalidXml","Multiple possible root nodes found.",tt(t,s));e.unpairedTags.indexOf(c)!==-1||n.push({tagName:c,tagStartPos:u}),r=!0}for(s++;s<t.length;s++)if(t[s]==="<")if(t[s+1]==="!"){s++,s=Dn(t,s);continue}else if(t[s+1]==="?"){if(s=Fn(t,++s),s.err)return s}else break;else if(t[s]==="&"){const p=Ps(t,s);if(p==-1)return U("InvalidChar","char '&' is not expected.",tt(t,s));s=p}else if(i===!0&&!jn(t[s]))return U("InvalidXml","Extra text at the end",tt(t,s));t[s]==="<"&&s--}}else{if(jn(t[s]))continue;return U("InvalidChar","char '"+t[s]+"' is not expected.",tt(t,s))}if(r){if(n.length==1)return U("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",tt(t,n[0].tagStartPos));if(n.length>0)return U("InvalidXml","Invalid '"+JSON.stringify(n.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return U("InvalidXml","Start tag expected.",1);return!0};function jn(t){return t===" "||t==="	"||t==="\n"||t==="\r"}function Fn(t,e){const n=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const r=t.substr(n,e-n);if(e>5&&r==="xml")return U("InvalidXml","XML declaration allowed only at the start of the document.",tt(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function Dn(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let n=1;for(e+=8;e<t.length;e++)if(t[e]==="<")n++;else if(t[e]===">"&&(n--,n===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const Ns='"',As="'";function Os(t,e){let n="",r="",i=!1;for(;e<t.length;e++){if(t[e]===Ns||t[e]===As)r===""?r=t[e]:r!==t[e]||(r="");else if(t[e]===">"&&r===""){i=!0;break}n+=t[e]}return r!==""?!1:{value:n,index:e,tagClosed:i}}const Ts=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function kn(t,e){const n=Je.getAllMatches(t,Ts),r={};for(let i=0;i<n.length;i++){if(n[i][1].length===0)return U("InvalidAttr","Attribute '"+n[i][2]+"' has no space in starting.",Mt(n[i]));if(n[i][3]!==void 0&&n[i][4]===void 0)return U("InvalidAttr","Attribute '"+n[i][2]+"' is without value.",Mt(n[i]));if(n[i][3]===void 0&&!e.allowBooleanAttributes)return U("InvalidAttr","boolean attribute '"+n[i][2]+"' is not allowed.",Mt(n[i]));const s=n[i][2];if(!Rs(s))return U("InvalidAttr","Attribute '"+s+"' is an invalid name.",Mt(n[i]));if(!r.hasOwnProperty(s))r[s]=1;else return U("InvalidAttr","Attribute '"+s+"' is repeated.",Mt(n[i]))}return!0}function Is(t,e){let n=/\d/;for(t[e]==="x"&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(n))break}return-1}function Ps(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,Is(t,e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(t[e]===";")break;return-1}return e}function U(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function Rs(t){return Je.isName(t)}function Cs(t){return Je.isName(t)}function tt(t,e){const n=t.substring(0,e).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function Mt(t){return t.startIndex+t[1].length}var ke={};const br={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,n){return t}},_s=function(t){return Object.assign({},br,t)};ke.buildOptions=_s,ke.defaultOptions=br;class Ss{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,n){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:n})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}var $s=Ss;const Ls=fe;function js(t,e){const n={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let r=1,i=!1,s=!1,u="";for(;e<t.length;e++)if(t[e]==="<"&&!s){if(i&&ks(t,e))e+=7,[entityName,val,e]=Fs(t,e+1),val.indexOf("&")===-1&&(n[Vs(entityName)]={regx:RegExp("&".concat(entityName,";"),"g"),val});else if(i&&Ms(t,e))e+=8;else if(i&&Us(t,e))e+=8;else if(i&&Bs(t,e))e+=9;else if(Ds)s=!0;else throw new Error("Invalid DOCTYPE");r++,u=""}else if(t[e]===">"){if(s?t[e-1]==="-"&&t[e-2]==="-"&&(s=!1,r--):r--,r===0)break}else t[e]==="["?i=!0:u+=t[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:e}}function Fs(t,e){let n="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)n+=t[e];if(n=n.trim(),n.indexOf(" ")!==-1)throw new Error("External entites are not supported");const r=t[e++];let i="";for(;e<t.length&&t[e]!==r;e++)i+=t[e];return[n,i,e]}function Ds(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function ks(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function Ms(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function Us(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function Bs(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function Vs(t){if(Ls.isName(t))return t;throw new Error("Invalid entity name ".concat(t))}var Gs=js;const zs=/^[-+]?0x[a-fA-F0-9]+$/,Xs=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const Ws={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function qs(t,e={}){if(e=Object.assign({},Ws,e),!t||typeof t!="string")return t;let n=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(n))return t;if(e.hex&&zs.test(n))return Number.parseInt(n,16);{const r=Xs.exec(n);if(r){const i=r[1],s=r[2];let u=Hs(r[3]);const a=r[4]||r[6];if(!e.leadingZeros&&s.length>0&&i&&n[2]!=="."||!e.leadingZeros&&s.length>0&&!i&&n[1]!==".")return t;{const c=Number(n),o=""+c;return o.search(/[eE]/)!==-1||a?e.eNotation?c:t:n.indexOf(".")!==-1?o==="0"&&u===""||o===u||i&&o==="-"+u?c:t:s?u===o||i+u===o?c:t:n===o||n===i+o?c:t}}else return t}}function Hs(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}var Ks=qs;function Zs(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(const n of t)if(typeof n=="string"&&e===n||n instanceof RegExp&&n.test(e))return!0}:()=>!1}var Er=Zs;const wr=fe,Ut=$s,Ys=Gs,Js=Ks,Qs=Er;let to=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,n)=>String.fromCharCode(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,n)=>String.fromCharCode(Number.parseInt(n,16))}},this.addExternalEntities=eo,this.parseXml=oo,this.parseTextData=no,this.resolveNameSpace=ro,this.buildAttributesMap=so,this.isItStopNode=co,this.replaceEntitiesValue=uo,this.readStopNodeData=po,this.saveTextToParentTag=lo,this.addChild=ao,this.ignoreAttributesFn=Qs(this.options.ignoreAttributes)}};function eo(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:t[r]}}}function no(t,e,n,r,i,s,u){if(t!==void 0&&(this.options.trimValues&&!r&&(t=t.trim()),t.length>0)){u||(t=this.replaceEntitiesValue(t));const a=this.options.tagValueProcessor(e,t,n,i,s);return a==null?t:typeof a!=typeof t||a!==t?a:this.options.trimValues?Ue(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?Ue(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function ro(t){if(this.options.removeNSPrefix){const e=t.split(":"),n=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=n+e[1])}return t}const io=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function so(t,e,n){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const r=wr.getAllMatches(t,io),i=r.length,s={};for(let u=0;u<i;u++){const a=this.resolveNameSpace(r[u][1]);if(this.ignoreAttributesFn(a,e))continue;let c=r[u][4],o=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(o=this.options.transformAttributeName(o)),o==="__proto__"&&(o="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);const l=this.options.attributeValueProcessor(a,c,e);l==null?s[o]=c:typeof l!=typeof c||l!==c?s[o]=l:s[o]=Ue(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[o]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const u={};return u[this.options.attributesGroupName]=s,u}return s}}const oo=function(t){t=t.replace(/\r\n?/g,"\n");const e=new Ut("!xml");let n=e,r="",i="";for(let s=0;s<t.length;s++)if(t[s]==="<")if(t[s+1]==="/"){const u=Ct(t,">",s,"Closing Tag is not closed.");let a=t.substring(s+2,u).trim();if(this.options.removeNSPrefix){const l=a.indexOf(":");l!==-1&&(a=a.substr(l+1))}this.options.transformTagName&&(a=this.options.transformTagName(a)),n&&(r=this.saveTextToParentTag(r,n,i));const c=i.substring(i.lastIndexOf(".")+1);if(a&&this.options.unpairedTags.indexOf(a)!==-1)throw new Error("Unpaired tag can not be used as closing tag: </".concat(a,">"));let o=0;c&&this.options.unpairedTags.indexOf(c)!==-1?(o=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):o=i.lastIndexOf("."),i=i.substring(0,o),n=this.tagsNodeStack.pop(),r="",s=u}else if(t[s+1]==="?"){let u=Me(t,s,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,i),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){const a=new Ut(u.tagName);a.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(a[":@"]=this.buildAttributesMap(u.tagExp,i,u.tagName)),this.addChild(n,a,i)}s=u.closeIndex+1}else if(t.substr(s+1,3)==="!--"){const u=Ct(t,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){const a=t.substring(s+4,u-2);r=this.saveTextToParentTag(r,n,i),n.add(this.options.commentPropName,[{[this.options.textNodeName]:a}])}s=u}else if(t.substr(s+1,2)==="!D"){const u=Ys(t,s);this.docTypeEntities=u.entities,s=u.i}else if(t.substr(s+1,2)==="!["){const u=Ct(t,"]]>",s,"CDATA is not closed.")-2,a=t.substring(s+9,u);r=this.saveTextToParentTag(r,n,i);let c=this.parseTextData(a,n.tagname,i,!0,!1,!0,!0);c==null&&(c=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:a}]):n.add(this.options.textNodeName,c),s=u+2}else{let u=Me(t,s,this.options.removeNSPrefix),a=u.tagName;const c=u.rawTagName;let o=u.tagExp,l=u.attrExpPresent,p=u.closeIndex;this.options.transformTagName&&(a=this.options.transformTagName(a)),n&&r&&n.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,n,i,!1));const h=n;if(h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(n=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),a!==e.tagname&&(i+=i?"."+a:a),this.isItStopNode(this.options.stopNodes,i,a)){let f="";if(o.length>0&&o.lastIndexOf("/")===o.length-1)a[a.length-1]==="/"?(a=a.substr(0,a.length-1),i=i.substr(0,i.length-1),o=a):o=o.substr(0,o.length-1),s=u.closeIndex;else if(this.options.unpairedTags.indexOf(a)!==-1)s=u.closeIndex;else{const g=this.readStopNodeData(t,c,p+1);if(!g)throw new Error("Unexpected end of ".concat(c));s=g.i,f=g.tagContent}const d=new Ut(a);a!==o&&l&&(d[":@"]=this.buildAttributesMap(o,i,a)),f&&(f=this.parseTextData(f,a,i,!0,l,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),d.add(this.options.textNodeName,f),this.addChild(n,d,i)}else{if(o.length>0&&o.lastIndexOf("/")===o.length-1){a[a.length-1]==="/"?(a=a.substr(0,a.length-1),i=i.substr(0,i.length-1),o=a):o=o.substr(0,o.length-1),this.options.transformTagName&&(a=this.options.transformTagName(a));const f=new Ut(a);a!==o&&l&&(f[":@"]=this.buildAttributesMap(o,i,a)),this.addChild(n,f,i),i=i.substr(0,i.lastIndexOf("."))}else{const f=new Ut(a);this.tagsNodeStack.push(n),a!==o&&l&&(f[":@"]=this.buildAttributesMap(o,i,a)),this.addChild(n,f,i),n=f}r="",s=p}}else r+=t[s];return e.child};function ao(t,e,n){const r=this.options.updateTag(e.tagname,n,e[":@"]);r===!1||(typeof r=="string"&&(e.tagname=r),t.addChild(e))}const uo=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const n=this.docTypeEntities[e];t=t.replace(n.regx,n.val)}for(let e in this.lastEntities){const n=this.lastEntities[e];t=t.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const n=this.htmlEntities[e];t=t.replace(n.regex,n.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function lo(t,e,n,r){return t&&(r===void 0&&(r=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,n,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function co(t,e,n){const r="*."+n;for(const i in t){const s=t[i];if(r===s||e===s)return!0}return!1}function ho(t,e,n=">"){let r,i="";for(let s=e;s<t.length;s++){let u=t[s];if(r)u===r&&(r="");else if(u==='"'||u==="'")r=u;else if(u===n[0])if(n[1]){if(t[s+1]===n[1])return{data:i,index:s}}else return{data:i,index:s};else u==="	"&&(u=" ");i+=u}}function Ct(t,e,n,r){const i=t.indexOf(e,n);if(i===-1)throw new Error(r);return i+e.length-1}function Me(t,e,n,r=">"){const i=ho(t,e+1,r);if(!i)return;let s=i.data;const u=i.index,a=s.search(/\s/);let c=s,o=!0;a!==-1&&(c=s.substring(0,a),s=s.substring(a+1).trimStart());const l=c;if(n){const p=c.indexOf(":");p!==-1&&(c=c.substr(p+1),o=c!==i.data.substr(p+1))}return{tagName:c,tagExp:s,closeIndex:u,attrExpPresent:o,rawTagName:l}}function po(t,e,n){const r=n;let i=1;for(;n<t.length;n++)if(t[n]==="<")if(t[n+1]==="/"){const s=Ct(t,">",n,"".concat(e," is not closed"));if(t.substring(n+2,s).trim()===e&&(i--,i===0))return{tagContent:t.substring(r,n),i:s};n=s}else if(t[n+1]==="?")n=Ct(t,"?>",n+1,"StopNode is not closed.");else if(t.substr(n+1,3)==="!--")n=Ct(t,"-->",n+3,"StopNode is not closed.");else if(t.substr(n+1,2)==="![")n=Ct(t,"]]>",n,"StopNode is not closed.")-2;else{const s=Me(t,n,">");s&&((s&&s.tagName)===e&&s.tagExp[s.tagExp.length-1]!=="/"&&i++,n=s.closeIndex)}}function Ue(t,e,n){if(e&&typeof t=="string"){const r=t.trim();return r==="true"?!0:r==="false"?!1:Js(t,n)}else return wr.isExist(t)?t:""}var fo=to,xr={};function go(t,e){return Nr(t,e)}function Nr(t,e,n){let r;const i={};for(let s=0;s<t.length;s++){const u=t[s],a=mo(u);let c="";if(n===void 0?c=a:c=n+"."+a,a===e.textNodeName)r===void 0?r=u[a]:r+=""+u[a];else{if(a===void 0)continue;if(u[a]){let o=Nr(u[a],e,c);const l=yo(o,e);u[":@"]?vo(o,u[":@"],c,e):Object.keys(o).length===1&&o[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?o=o[e.textNodeName]:Object.keys(o).length===0&&(e.alwaysCreateTextNode?o[e.textNodeName]="":o=""),i[a]!==void 0&&i.hasOwnProperty(a)?(Array.isArray(i[a])||(i[a]=[i[a]]),i[a].push(o)):e.isArray(a,c,l)?i[a]=[o]:i[a]=o}}}return typeof r=="string"?r.length>0&&(i[e.textNodeName]=r):r!==void 0&&(i[e.textNodeName]=r),i}function mo(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];if(r!==":@")return r}}function vo(t,e,n,r){if(e){const i=Object.keys(e),s=i.length;for(let u=0;u<s;u++){const a=i[u];r.isArray(a,n+"."+a,!0,!0)?t[a]=[e[a]]:t[a]=e[a]}}}function yo(t,e){const{textNodeName:n}=e,r=Object.keys(t).length;return!!(r===0||r===1&&(t[n]||typeof t[n]=="boolean"||t[n]===0))}xr.prettify=go;const{buildOptions:bo}=ke,Eo=fo,{prettify:wo}=xr,xo=Ye;let No=class{constructor(t){this.externalEntities={},this.options=bo(t)}parse(t,e){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(e){e===!0&&(e={});const i=xo.validate(t,e);if(i!==!0)throw Error("".concat(i.err.msg,":").concat(i.err.line,":").concat(i.err.col))}const n=new Eo(this.options);n.addExternalEntities(this.externalEntities);const r=n.parseXml(t);return this.options.preserveOrder||r===void 0?r:wo(r,this.options)}addEntity(t,e){if(e.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(e==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=e}};var Ao=No;const Oo="\n";function To(t,e){let n="";return e.format&&e.indentBy.length>0&&(n=Oo),Ar(t,e,"",n)}function Ar(t,e,n,r){let i="",s=!1;for(let u=0;u<t.length;u++){const a=t[u],c=Io(a);if(c===void 0)continue;let o="";if(n.length===0?o=c:o="".concat(n,".").concat(c),c===e.textNodeName){let d=a[c];Po(o,e)||(d=e.tagValueProcessor(c,d),d=Or(d,e)),s&&(i+=r),i+=d,s=!1;continue}else if(c===e.cdataPropName){s&&(i+=r),i+="<![CDATA[".concat(a[c][0][e.textNodeName],"]]>"),s=!1;continue}else if(c===e.commentPropName){i+=r+"<!--".concat(a[c][0][e.textNodeName],"-->"),s=!0;continue}else if(c[0]==="?"){const d=Mn(a[":@"],e),g=c==="?xml"?"":r;let v=a[c][0][e.textNodeName];v=v.length!==0?" "+v:"",i+=g+"<".concat(c).concat(v).concat(d,"?>"),s=!0;continue}let l=r;l!==""&&(l+=e.indentBy);const p=Mn(a[":@"],e),h=r+"<".concat(c).concat(p),f=Ar(a[c],e,o,l);e.unpairedTags.indexOf(c)!==-1?e.suppressUnpairedNode?i+=h+">":i+=h+"/>":(!f||f.length===0)&&e.suppressEmptyNode?i+=h+"/>":f&&f.endsWith(">")?i+=h+">".concat(f).concat(r,"</").concat(c,">"):(i+=h+">",f&&r!==""&&(f.includes("/>")||f.includes("</"))?i+=r+e.indentBy+f+r:i+=f,i+="</".concat(c,">")),s=!0}return i}function Io(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];if(t.hasOwnProperty(r)&&r!==":@")return r}}function Mn(t,e){let n="";if(t&&!e.ignoreAttributes)for(let r in t){if(!t.hasOwnProperty(r))continue;let i=e.attributeValueProcessor(r,t[r]);i=Or(i,e),i===!0&&e.suppressBooleanAttributes?n+=" ".concat(r.substr(e.attributeNamePrefix.length)):n+=" ".concat(r.substr(e.attributeNamePrefix.length),'="').concat(i,'"')}return n}function Po(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let n=t.substr(t.lastIndexOf(".")+1);for(let r in e.stopNodes)if(e.stopNodes[r]===t||e.stopNodes[r]==="*."+n)return!0;return!1}function Or(t,e){if(t&&t.length>0&&e.processEntities)for(let n=0;n<e.entities.length;n++){const r=e.entities[n];t=t.replace(r.regex,r.val)}return t}var Ro=To;const Co=Ro,_o=Er,So={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function It(t){this.options=Object.assign({},So,t),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=_o(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=jo),this.processTextOrObjNode=$o,this.options.format?(this.indentate=Lo,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}It.prototype.build=function(t){return this.options.preserveOrder?Co(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0,[]).val)},It.prototype.j2x=function(t,e,n){let r="",i="";const s=n.join(".");for(let u in t)if(Object.prototype.hasOwnProperty.call(t,u))if(typeof t[u]>"u")this.isAttribute(u)&&(i+="");else if(t[u]===null)this.isAttribute(u)?i+="":u[0]==="?"?i+=this.indentate(e)+"<"+u+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+u+"/"+this.tagEndChar;else if(t[u]instanceof Date)i+=this.buildTextValNode(t[u],u,"",e);else if(typeof t[u]!="object"){const a=this.isAttribute(u);if(a&&!this.ignoreAttributesFn(a,s))r+=this.buildAttrPairStr(a,""+t[u]);else if(!a)if(u===this.options.textNodeName){let c=this.options.tagValueProcessor(u,""+t[u]);i+=this.replaceEntitiesValue(c)}else i+=this.buildTextValNode(t[u],u,"",e)}else if(Array.isArray(t[u])){const a=t[u].length;let c="",o="";for(let l=0;l<a;l++){const p=t[u][l];if(!(typeof p>"u"))if(p===null)u[0]==="?"?i+=this.indentate(e)+"<"+u+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+u+"/"+this.tagEndChar;else if(typeof p=="object")if(this.options.oneListGroup){const h=this.j2x(p,e+1,n.concat(u));c+=h.val,this.options.attributesGroupName&&p.hasOwnProperty(this.options.attributesGroupName)&&(o+=h.attrStr)}else c+=this.processTextOrObjNode(p,u,e,n);else if(this.options.oneListGroup){let h=this.options.tagValueProcessor(u,p);h=this.replaceEntitiesValue(h),c+=h}else c+=this.buildTextValNode(p,u,"",e)}this.options.oneListGroup&&(c=this.buildObjectNode(c,u,o,e)),i+=c}else if(this.options.attributesGroupName&&u===this.options.attributesGroupName){const a=Object.keys(t[u]),c=a.length;for(let o=0;o<c;o++)r+=this.buildAttrPairStr(a[o],""+t[u][a[o]])}else i+=this.processTextOrObjNode(t[u],u,e,n);return{attrStr:r,val:i}},It.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function $o(t,e,n,r){const i=this.j2x(t,n+1,r.concat(e));return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,i.attrStr,n):this.buildObjectNode(i.val,e,i.attrStr,n)}It.prototype.buildObjectNode=function(t,e,n,r){if(t==="")return e[0]==="?"?this.indentate(r)+"<"+e+n+"?"+this.tagEndChar:this.indentate(r)+"<"+e+n+this.closeTag(e)+this.tagEndChar;{let i="</"+e+this.tagEndChar,s="";return e[0]==="?"&&(s="?",i=""),(n||n==="")&&t.indexOf("<")===-1?this.indentate(r)+"<"+e+n+s+">"+t+i:this.options.commentPropName!==!1&&e===this.options.commentPropName&&s.length===0?this.indentate(r)+"<!--".concat(t,"-->")+this.newLine:this.indentate(r)+"<"+e+n+s+this.tagEndChar+t+this.indentate(r)+i}},It.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e="></".concat(t),e},It.prototype.buildTextValNode=function(t,e,n,r){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(r)+"<![CDATA[".concat(t,"]]>")+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(r)+"<!--".concat(t,"-->")+this.newLine;if(e[0]==="?")return this.indentate(r)+"<"+e+n+"?"+this.tagEndChar;{let i=this.options.tagValueProcessor(e,t);return i=this.replaceEntitiesValue(i),i===""?this.indentate(r)+"<"+e+n+this.closeTag(e)+this.tagEndChar:this.indentate(r)+"<"+e+n+">"+i+"</"+e+this.tagEndChar}},It.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const n=this.options.entities[e];t=t.replace(n.regex,n.val)}return t};function Lo(t){return this.options.indentBy.repeat(t)}function jo(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}var Fo=It;const Do=Ye,ko=Ao,Mo=Fo;var Uo={XMLParser:ko,XMLValidator:Do,XMLBuilder:Mo};function Bo(t){return t&&t.split("/").map(encodeURIComponent).join("/")}function Nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Un(t,e,n){Vo(t,e),e.set(t,n)}function Vo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Z(t,e){var n=Tr(t,e,"get");return Go(t,n)}function Go(t,e){return e.get?e.get.call(t):e.value}function Bn(t,e,n){var r=Tr(t,e,"set");return zo(t,r,n),n}function Tr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function zo(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}var Xo=typeof Symbol<"u"?Symbol.toStringTag:"@@toStringTag",Y=new WeakMap,Bt=new WeakMap;class de{constructor(e){var{executor:n=()=>{},internals:r=tn(),promise:i=new Promise((s,u)=>n(s,u,a=>{r.onCancelList.push(a)}))}=e;Un(this,Y,{writable:!0,value:void 0}),Un(this,Bt,{writable:!0,value:void 0}),Nt(this,Xo,"CancelablePromise"),this.cancel=this.cancel.bind(this),Bn(this,Y,r),Bn(this,Bt,i||new Promise((s,u)=>n(s,u,a=>{r.onCancelList.push(a)})))}then(e,n){return ee(Z(this,Bt).then(Jt(e,Z(this,Y)),Jt(n,Z(this,Y))),Z(this,Y))}catch(e){return ee(Z(this,Bt).catch(Jt(e,Z(this,Y))),Z(this,Y))}finally(e,n){return n&&Z(this,Y).onCancelList.push(e),ee(Z(this,Bt).finally(Jt(()=>{if(e)return n&&(Z(this,Y).onCancelList=Z(this,Y).onCancelList.filter(r=>r!==e)),e()},Z(this,Y))),Z(this,Y))}cancel(){Z(this,Y).isCanceled=!0;var e=Z(this,Y).onCancelList;Z(this,Y).onCancelList=[];for(var n of e)if(typeof n=="function")try{n()}catch(r){console.error(r)}}isCanceled(){return Z(this,Y).isCanceled===!0}}class At extends de{constructor(e){super({executor:e})}}Nt(At,"all",function(t){return Qt(t,Promise.all(t))}),Nt(At,"allSettled",function(t){return Qt(t,Promise.allSettled(t))}),Nt(At,"any",function(t){return Qt(t,Promise.any(t))}),Nt(At,"race",function(t){return Qt(t,Promise.race(t))}),Nt(At,"resolve",function(t){return Vn(Promise.resolve(t))}),Nt(At,"reject",function(t){return Vn(Promise.reject(t))}),Nt(At,"isCancelable",Qe);function Vn(t){return ee(t,tn())}function Qe(t){return t instanceof At||t instanceof de}function Jt(t,e){if(t)return n=>{if(!e.isCanceled){var r=t(n);return Qe(r)&&e.onCancelList.push(r.cancel),r}return n}}function ee(t,e){return new de({internals:e,promise:t})}function Qt(t,e){var n=tn();return n.onCancelList.push(()=>{for(var r of t)Qe(r)&&r.cancel()}),new de({internals:n,promise:e})}function tn(){return{isCanceled:!1,onCancelList:[]}}function en(){var t;return(t=Ge("files_sharing","isPublic",null))!=null?t:document.querySelector('input#isPublic[type="hidden"][name="isPublic"][value="1"]')!==null}function Wo(){var t,e,n;return(n=(e=Ge("files_sharing","sharingToken",null))!=null?e:(t=document.querySelector('input#sharingToken[type="hidden"]'))==null?void 0:t.value)!=null?n:null}const qo=_e().setApp("@nextcloud/files").detectUser().build();var pt=(t=>(t[t.NONE=0]="NONE",t[t.CREATE=4]="CREATE",t[t.READ=1]="READ",t[t.UPDATE=2]="UPDATE",t[t.DELETE=8]="DELETE",t[t.SHARE=16]="SHARE",t[t.ALL=31]="ALL",t))(pt||{}),nn=(t=>(t.Folder="folder",t.File="file",t))(nn||{});const Ir=function(t,e){return t.match(e)!==null},Gn=(t,e)=>{if(t.id&&typeof t.id!="number")throw new Error("Invalid id type of value");if(!t.source)throw new Error("Missing mandatory source");try{new URL(t.source)}catch(n){throw new Error("Invalid source format, source must be a valid URL")}if(!t.source.startsWith("http"))throw new Error("Invalid source format, only http(s) is supported");if(t.displayname&&typeof t.displayname!="string")throw new Error("Invalid displayname type");if(t.mtime&&!(t.mtime instanceof Date))throw new Error("Invalid mtime type");if(t.crtime&&!(t.crtime instanceof Date))throw new Error("Invalid crtime type");if(!t.mime||typeof t.mime!="string"||!t.mime.match(/^[-\w.]+\/[-+\w.]+$/gi))throw new Error("Missing or invalid mandatory mime");if("size"in t&&typeof t.size!="number"&&t.size!==void 0)throw new Error("Invalid size type");if("permissions"in t&&t.permissions!==void 0&&!(typeof t.permissions=="number"&&t.permissions>=pt.NONE&&t.permissions<=pt.ALL))throw new Error("Invalid permissions");if(t.owner&&t.owner!==null&&typeof t.owner!="string")throw new Error("Invalid owner type");if(t.attributes&&typeof t.attributes!="object")throw new Error("Invalid attributes type");if(t.root&&typeof t.root!="string")throw new Error("Invalid root type");if(t.root&&!t.root.startsWith("/"))throw new Error("Root must start with a leading slash");if(t.root&&!t.source.includes(t.root))throw new Error("Root must be part of the source");if(t.root&&Ir(t.source,e)){const n=t.source.match(e)[0];if(!t.source.includes(ct.join(n,t.root)))throw new Error("The root must be relative to the service. e.g /files/emma")}if(t.status&&!Object.values(rn).includes(t.status))throw new Error("Status must be a valid NodeStatus")};var rn=(t=>(t.NEW="new",t.FAILED="failed",t.LOADING="loading",t.LOCKED="locked",t))(rn||{});class ge{constructor(e,n){j(this,"_data");j(this,"_attributes");j(this,"_knownDavService",/(remote|public)\.php\/(web)?dav/i);j(this,"readonlyAttributes",Object.entries(Object.getOwnPropertyDescriptors(ge.prototype)).filter(e=>typeof e[1].get=="function"&&e[0]!=="__proto__").map(e=>e[0]));j(this,"handler",{set:(e,n,r)=>this.readonlyAttributes.includes(n)?!1:Reflect.set(e,n,r),deleteProperty:(e,n)=>this.readonlyAttributes.includes(n)?!1:Reflect.deleteProperty(e,n),get:(e,n,r)=>this.readonlyAttributes.includes(n)?(qo.warn('Accessing "Node.attributes.'.concat(n,'" is deprecated, access it directly on the Node instance.')),Reflect.get(this,n)):Reflect.get(e,n,r)});var r,i;Gn(e,n||this._knownDavService),this._data=gt(st({displayname:(r=e.attributes)==null?void 0:r.displayname},e),{attributes:{}}),this._attributes=new Proxy(this._data.attributes,this.handler),this.update((i=e.attributes)!=null?i:{}),n&&(this._knownDavService=n)}get source(){return this._data.source.replace(/\/$/i,"")}get encodedSource(){const{origin:e}=new URL(this.source);return e+Bo(this.source.slice(e.length))}get basename(){return ct.basename(this.source)}get displayname(){return this._data.displayname||this.basename}set displayname(e){this._data.displayname=e}get extension(){return ct.extname(this.source)}get dirname(){if(this.root){let n=this.source;this.isDavResource&&(n=n.split(this._knownDavService).pop());const r=n.indexOf(this.root),i=this.root.replace(/\/$/,"");return ct.dirname(n.slice(r+i.length)||"/")}const e=new URL(this.source);return ct.dirname(e.pathname)}get mime(){return this._data.mime}get mtime(){return this._data.mtime}set mtime(e){this._data.mtime=e}get crtime(){return this._data.crtime}get size(){return this._data.size}set size(e){this.updateMtime(),this._data.size=e}get attributes(){return this._attributes}get permissions(){return this.owner===null&&!this.isDavResource?pt.READ:this._data.permissions!==void 0?this._data.permissions:pt.NONE}set permissions(e){this.updateMtime(),this._data.permissions=e}get owner(){return this.isDavResource?this._data.owner:null}get isDavResource(){return Ir(this.source,this._knownDavService)}get isDavRessource(){return this.isDavResource}get root(){return this._data.root?this._data.root.replace(/^(.+)\/$/,"$1"):this.isDavResource&&ct.dirname(this.source).split(this._knownDavService).pop()||null}get path(){if(this.root){let e=this.source;this.isDavResource&&(e=e.split(this._knownDavService).pop());const n=e.indexOf(this.root),r=this.root.replace(/\/$/,"");return e.slice(n+r.length)||"/"}return(this.dirname+"/"+this.basename).replace(/\/\//g,"/")}get fileid(){var e;return(e=this._data)==null?void 0:e.id}get status(){var e;return(e=this._data)==null?void 0:e.status}set status(e){this._data.status=e}get data(){return structuredClone(this._data)}move(e){Gn(gt(st({},this._data),{source:e}),this._knownDavService);const n=this.basename;this._data.source=e,this.displayname===n&&this.basename!==n&&(this.displayname=this.basename),this.updateMtime()}rename(e){if(e.includes("/"))throw new Error("Invalid basename");this.move(ct.dirname(this.source)+"/"+e)}updateMtime(){this._data.mtime&&(this._data.mtime=new Date)}update(e){for(const[n,r]of Object.entries(e))try{r===void 0?delete this.attributes[n]:this.attributes[n]=r}catch(i){if(i instanceof TypeError)continue;throw i}}}class sn extends ge{get type(){return nn.File}clone(){return new sn(this.data)}}class on extends ge{constructor(e){super(gt(st({},e),{mime:"httpd/unix-directory"}))}get type(){return nn.Folder}get extension(){return null}get mime(){return"httpd/unix-directory"}clone(){return new on(this.data)}}const Ho=function(t=""){let e=pt.NONE;return t&&((t.includes("C")||t.includes("K"))&&(e|=pt.CREATE),t.includes("G")&&(e|=pt.READ),(t.includes("W")||t.includes("N")||t.includes("V"))&&(e|=pt.UPDATE),t.includes("D")&&(e|=pt.DELETE),t.includes("R")&&(e|=pt.SHARE)),e},Ko=["d:getcontentlength","d:getcontenttype","d:getetag","d:getlastmodified","d:creationdate","d:displayname","d:quota-available-bytes","d:resourcetype","nc:has-preview","nc:is-encrypted","nc:mount-type","oc:comments-unread","oc:favorite","oc:fileid","oc:owner-display-name","oc:owner-id","oc:permissions","oc:size"],Zo={d:"DAV:",nc:"http://nextcloud.org/ns",oc:"http://owncloud.org/ns",ocs:"http://open-collaboration-services.org/ns"},Yo=function(){return typeof window._nc_dav_properties>"u"&&(window._nc_dav_properties=[...Ko]),window._nc_dav_properties.map(t=>"<".concat(t," />")).join(" ")},Jo=function(){return typeof window._nc_dav_namespaces>"u"&&(window._nc_dav_namespaces=st({},Zo)),Object.keys(window._nc_dav_namespaces).map(t=>{var e;return"xmlns:".concat(t,'="').concat((e=window._nc_dav_namespaces)==null?void 0:e[t],'"')}).join(" ")},Qo=function(){return'<?xml version="1.0"?>\n		<d:propfind '.concat(Jo(),">\n			<d:prop>\n				").concat(Yo(),"\n			</d:prop>\n		</d:propfind>")};function ta(){var t;return en()?"/files/".concat(Wo()):"/files/".concat((t=he())==null?void 0:t.uid)}const ea=ta();function na(){const t=Mr("dav");return en()?t.replace("remote.php","public.php"):t}const Pr=na(),ra=function(t=Pr,e={}){const n=ys(t,{headers:e});function r(i){n.setHeaders(gt(st({},e),{"X-Requested-With":"XMLHttpRequest",requesttoken:i!=null?i:""}))}return Ur(r),r(Br()),bs().patch("fetch",(i,s)=>{const u=s.headers;return u!=null&&u.method&&(s.method=u.method,delete u.method),fetch(i,s)}),n},ia=function(t,e=ea,n=Pr){var p,h;let r=(p=he())==null?void 0:p.uid;if(en())r=r!=null?r:"anonymous";else if(!r)throw new Error("No user id found");const i=t.props,s=Ho(i==null?void 0:i.permissions),u=String((i==null?void 0:i["owner-id"])||r),a=i.fileid||0,c=new Date(Date.parse(t.lastmod)),o=new Date(Date.parse(i.creationdate)),l={id:a,source:"".concat(n).concat(t.filename),mtime:!isNaN(c.getTime())&&c.getTime()!==0?c:void 0,crtime:!isNaN(o.getTime())&&o.getTime()!==0?o:void 0,mime:t.mime||"application/octet-stream",displayname:i.displayname!==void 0?String(i.displayname):void 0,size:(i==null?void 0:i.size)||Number.parseInt(i.getcontentlength||"0"),status:a<0?rn.FAILED:void 0,permissions:s,owner:u,root:e,attributes:gt(st(st({},t),i),{hasPreview:i==null?void 0:i["has-preview"]})};return(h=l.attributes)==null||delete h.props,t.type==="file"?new sn(l):new on(l)};var Re={},sa={};(function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",r="["+e+"]["+n+"]*",i=new RegExp("^"+r+"$"),s=function(a,c){const o=[];let l=c.exec(a);for(;l;){const p=[];p.startIndex=c.lastIndex-l[0].length;const h=l.length;for(let f=0;f<h;f++)p.push(l[f]);o.push(p),l=c.exec(a)}return o},u=function(a){const c=i.exec(a);return!(c===null||typeof c>"u")};t.isExist=function(a){return typeof a<"u"},t.isEmptyObject=function(a){return Object.keys(a).length===0},t.merge=function(a,c,o){if(c){const l=Object.keys(c),p=l.length;for(let h=0;h<p;h++)o==="strict"?a[l[h]]=[c[l[h]]]:a[l[h]]=c[l[h]]}},t.getValue=function(a){return t.isExist(a)?a:""},t.isName=u,t.getAllMatches=s,t.nameRegexp=r})(sa),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const oa=typeof Gt=="object"&&Re&&Re.NODE_DEBUG&&/\bsemver\b/i.test(Re.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var aa=oa;const ua="2.0.0",Rr=256,la=Number.MAX_SAFE_INTEGER||9007199254740991,ca=16,ha=Rr-6,pa=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var fa={MAX_LENGTH:Rr,MAX_SAFE_COMPONENT_LENGTH:ca,MAX_SAFE_BUILD_LENGTH:ha,MAX_SAFE_INTEGER:la,RELEASE_TYPES:pa,SEMVER_SPEC_VERSION:ua,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},zn={exports:{}};(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=fa,s=aa;e=t.exports={};const u=e.re=[],a=e.safeRe=[],c=e.src=[],o=e.t={};let l=0;const p="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[p,r]],f=g=>{for(const[v,E]of h)g=g.split("".concat(v,"*")).join("".concat(v,"{0,").concat(E,"}")).split("".concat(v,"+")).join("".concat(v,"{1,").concat(E,"}"));return g},d=(g,v,E)=>{const m=f(v),y=l++;s(g,y,v),o[g]=y,c[y]=v,u[y]=new RegExp(v,E?"g":void 0),a[y]=new RegExp(m,E?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(p,"*")),d("MAINVERSION","(".concat(c[o.NUMERICIDENTIFIER],")\\.(").concat(c[o.NUMERICIDENTIFIER],")\\.(").concat(c[o.NUMERICIDENTIFIER],")")),d("MAINVERSIONLOOSE","(".concat(c[o.NUMERICIDENTIFIERLOOSE],")\\.(").concat(c[o.NUMERICIDENTIFIERLOOSE],")\\.(").concat(c[o.NUMERICIDENTIFIERLOOSE],")")),d("PRERELEASEIDENTIFIER","(?:".concat(c[o.NUMERICIDENTIFIER],"|").concat(c[o.NONNUMERICIDENTIFIER],")")),d("PRERELEASEIDENTIFIERLOOSE","(?:".concat(c[o.NUMERICIDENTIFIERLOOSE],"|").concat(c[o.NONNUMERICIDENTIFIER],")")),d("PRERELEASE","(?:-(".concat(c[o.PRERELEASEIDENTIFIER],"(?:\\.").concat(c[o.PRERELEASEIDENTIFIER],")*))")),d("PRERELEASELOOSE","(?:-?(".concat(c[o.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(c[o.PRERELEASEIDENTIFIERLOOSE],")*))")),d("BUILDIDENTIFIER","".concat(p,"+")),d("BUILD","(?:\\+(".concat(c[o.BUILDIDENTIFIER],"(?:\\.").concat(c[o.BUILDIDENTIFIER],")*))")),d("FULLPLAIN","v?".concat(c[o.MAINVERSION]).concat(c[o.PRERELEASE],"?").concat(c[o.BUILD],"?")),d("FULL","^".concat(c[o.FULLPLAIN],"$")),d("LOOSEPLAIN","[v=\\s]*".concat(c[o.MAINVERSIONLOOSE]).concat(c[o.PRERELEASELOOSE],"?").concat(c[o.BUILD],"?")),d("LOOSE","^".concat(c[o.LOOSEPLAIN],"$")),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE","".concat(c[o.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),d("XRANGEIDENTIFIER","".concat(c[o.NUMERICIDENTIFIER],"|x|X|\\*")),d("XRANGEPLAIN","[v=\\s]*(".concat(c[o.XRANGEIDENTIFIER],")(?:\\.(").concat(c[o.XRANGEIDENTIFIER],")(?:\\.(").concat(c[o.XRANGEIDENTIFIER],")(?:").concat(c[o.PRERELEASE],")?").concat(c[o.BUILD],"?)?)?")),d("XRANGEPLAINLOOSE","[v=\\s]*(".concat(c[o.XRANGEIDENTIFIERLOOSE],")(?:\\.(").concat(c[o.XRANGEIDENTIFIERLOOSE],")(?:\\.(").concat(c[o.XRANGEIDENTIFIERLOOSE],")(?:").concat(c[o.PRERELEASELOOSE],")?").concat(c[o.BUILD],"?)?)?")),d("XRANGE","^".concat(c[o.GTLT],"\\s*").concat(c[o.XRANGEPLAIN],"$")),d("XRANGELOOSE","^".concat(c[o.GTLT],"\\s*").concat(c[o.XRANGEPLAINLOOSE],"$")),d("COERCEPLAIN","(^|[^\\d])(\\d{1,".concat(n,"})(?:\\.(\\d{1,").concat(n,"}))?(?:\\.(\\d{1,").concat(n,"}))?")),d("COERCE","".concat(c[o.COERCEPLAIN],"(?:$|[^\\d])")),d("COERCEFULL",c[o.COERCEPLAIN]+"(?:".concat(c[o.PRERELEASE],")?(?:").concat(c[o.BUILD],")?(?:$|[^\\d])")),d("COERCERTL",c[o.COERCE],!0),d("COERCERTLFULL",c[o.COERCEFULL],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM","(\\s*)".concat(c[o.LONETILDE],"\\s+"),!0),e.tildeTrimReplace="$1~",d("TILDE","^".concat(c[o.LONETILDE]).concat(c[o.XRANGEPLAIN],"$")),d("TILDELOOSE","^".concat(c[o.LONETILDE]).concat(c[o.XRANGEPLAINLOOSE],"$")),d("LONECARET","(?:\\^)"),d("CARETTRIM","(\\s*)".concat(c[o.LONECARET],"\\s+"),!0),e.caretTrimReplace="$1^",d("CARET","^".concat(c[o.LONECARET]).concat(c[o.XRANGEPLAIN],"$")),d("CARETLOOSE","^".concat(c[o.LONECARET]).concat(c[o.XRANGEPLAINLOOSE],"$")),d("COMPARATORLOOSE","^".concat(c[o.GTLT],"\\s*(").concat(c[o.LOOSEPLAIN],")$|^$")),d("COMPARATOR","^".concat(c[o.GTLT],"\\s*(").concat(c[o.FULLPLAIN],")$|^$")),d("COMPARATORTRIM","(\\s*)".concat(c[o.GTLT],"\\s*(").concat(c[o.LOOSEPLAIN],"|").concat(c[o.XRANGEPLAIN],")"),!0),e.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE","^\\s*(".concat(c[o.XRANGEPLAIN],")\\s+-\\s+(").concat(c[o.XRANGEPLAIN],")\\s*$")),d("HYPHENRANGELOOSE","^\\s*(".concat(c[o.XRANGEPLAINLOOSE],")\\s+-\\s+(").concat(c[o.XRANGEPLAINLOOSE],")\\s*$")),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(zn,zn.exports);const da=t=>t===null?_e().setApp("end_to_end_encryption").build():_e().setApp("end_to_end_encryption").setUid(t.uid).build(),K=da(he());function ga(t){return String.fromCharCode(...t)}function ma(t){return Uint8Array.from(t,e=>e.charCodeAt(0))}function bt(t){return ma(atob(t))}const Xn="apps/end_to_end_encryption/api/v2",Cr={PrivateKey:Xn+"/private-key",Metadata:Xn+"/meta-data/{fileId}"};async function va(){const t=(await Kn.get(Zn(Cr.PrivateKey),{headers:{"X-E2EE-SUPPORTED":"true"}})).data.ocs.data["private-key"],[e,n,r]=t.split("|");return{encryptedPrivateKey:bt(e),iv:bt(n),salt:bt(r)}}async function an(t){const e=await Kn.get(Zn(Cr.Metadata,{fileId:t}),{headers:{"X-E2EE-SUPPORTED":"true"}});return JSON.parse(e.data.ocs.data["meta-data"])}var ya=Object.defineProperty,Wn=Object.getOwnPropertySymbols,ba=Object.prototype.hasOwnProperty,Ea=Object.prototype.propertyIsEnumerable,qn=(t,e,n)=>e in t?ya(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wa=(t,e)=>{for(var n in e||(e={}))ba.call(e,n)&&qn(t,n,e[n]);if(Wn)for(var n of Wn(e))Ea.call(e,n)&&qn(t,n,e[n]);return t};async function un(t,e,n={}){return await self.crypto.subtle.decrypt(wa({name:"AES-GCM"},n),e,t)}async function xa(t,e){return await self.crypto.subtle.decrypt({name:"RSA-OAEP"},e,t)}async function _r(t){return await self.crypto.subtle.importKey("raw",t,{name:"AES-GCM",length:128},!0,["decrypt","encrypt"])}async function Na(t){return await self.crypto.subtle.importKey("pkcs8",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["decrypt"])}async function Aa(t,e){K.debug("Decrypting metadata info",{metadata:t});const[n,r]=t.metadata.ciphertext.split("|"),i=await un(bt(n),e,{iv:bt(r)});return JSON.parse(await Oa(i))}async function Oa(t){const e=new ReadableStream({start(n){n.enqueue(new Uint8Array(t)),n.close()}}).pipeThrough(new DecompressionStream("gzip"));return await new Response(e).text()}async function Ta(t,e,n){var r;K.debug("Getting metadata private key",{metadata:t,userId:e});const i=(r=t.users)==null?void 0:r.find(a=>a.userId===e);if(!i)throw new Error("User not found in metadata");const s=bt(i.encryptedMetadataKey),u=await xa(s,n);return await _r(u)}const Ia="-----BEGIN PRIVATE KEY-----",Pa="-----END PRIVATE KEY-----";async function Ra(t,e){K.debug("Decrypting private key",{privateKeyInfo:t,mnemonic:e});const n=await Ca(e,t.salt),r=await un(t.encryptedPrivateKey,n,{iv:t.iv,tagLength:128});return _a(atob(ga(new Uint8Array(r))))}async function Ca(t,e){const n=await crypto.subtle.importKey("raw",new TextEncoder().encode(t.replaceAll(" ","")),{name:"PBKDF2"},!1,["deriveKey"]);return await crypto.subtle.deriveKey({name:"PBKDF2",salt:e,hash:"SHA-1",iterations:1024},n,{name:"AES-GCM",length:256},!0,["decrypt","encrypt"])}async function _a(t){K.debug("Loading PEM key",{pem:t});const e=t.substring(Ia.length,t.length-Pa.length-1).replace(/\n/g,"");return Na(bt(e))}const Sa={name:"AlertCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var $a=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon alert-circle-outline-icon",attrs:{"aria-hidden":t.title?null:"true","aria-label":t.title,role:"img"},on:{click:function(n){return t.$emit("click",n)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},La=[],ja=Ht(Sa,$a,La,!1,null,null);const Fa=ja.exports,Da={name:"CheckIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ka=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon check-icon",attrs:{"aria-hidden":t.title?null:"true","aria-label":t.title,role:"img"},on:{click:function(n){return t.$emit("click",n)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},Ma=[],Ua=Ht(Da,ka,Ma,!1,null,null);const Ba=Ua.exports,Va={name:"NcInputField",components:{NcButton:Vr,AlertCircle:Fa,Check:Ba},inheritAttrs:!1,model:{prop:"modelValue",event:"update:modelValue"},props:{value:{type:[String,Number],default:void 0},modelValue:{type:[String,Number],default:void 0},type:{type:String,default:"text",validator:t=>["text","password","email","tel","url","search","number"].includes(t)},label:{type:String,default:void 0},labelOutside:{type:Boolean,default:!1},placeholder:{type:String,default:void 0},showTrailingButton:{type:Boolean,default:!1},trailingButtonLabel:{type:String,default:""},success:{type:Boolean,default:!1},error:{type:Boolean,default:!1},helperText:{type:String,default:""},disabled:{type:Boolean,default:!1},pill:{type:Boolean,default:!1},inputClass:{type:[Object,String],default:""}},emits:["update:value","update:modelValue","update:model-value","trailing-button-click"],setup(){return{model:Yn("value","update:value",!0)}},computed:{computedId(){return this.$attrs.id&&this.$attrs.id!==""?this.$attrs.id:this.inputName},inputName(){return"input"+Gr()},hasLeadingIcon(){return this.$slots.default},hasTrailingIcon(){return this.success},hasPlaceholder(){return this.placeholder!==""&&this.placeholder!==void 0},computedPlaceholder(){return this.hasPlaceholder?this.placeholder:this.label},isValidLabel(){const t=this.label||this.labelOutside;return t||console.warn("You need to add a label to the NcInputField component. Either use the prop label or use an external one, as per the example in the documentation."),t},ariaDescribedby(){const t=[];return this.helperText.length>0&&t.push("".concat(this.inputName,"-helper-text")),this.$attrs["aria-describedby"]&&t.push(this.$attrs["aria-describedby"]),t.join(" ")||null}},methods:{focus(){this.$refs.input.focus()},select(){this.$refs.input.select()},handleInput(t){const e=this.type==="number"&&typeof this.model=="number"?parseFloat(t.target.value,10):t.target.value;this.model=e},handleTrailingButtonClick(t){this.$emit("trailing-button-click",t)}}};var Ga=function(){var n;var t=this,e=t._self._c;return e("div",{staticClass:"input-field",class:{"input-field--disabled":t.disabled,"input-field--label-outside":t.labelOutside||!t.isValidLabel,"input-field--leading-icon":t.hasLeadingIcon,"input-field--trailing-icon":t.showTrailingButton||t.hasTrailingIcon,"input-field--pill":t.pill}},[e("div",{staticClass:"input-field__main-wrapper"},[e("input",t._g(t._b({ref:"input",staticClass:"input-field__input",class:[t.inputClass,{"input-field__input--success":t.success,"input-field__input--error":t.error}],attrs:{id:t.computedId,type:t.type,disabled:t.disabled,placeholder:t.computedPlaceholder,"aria-describedby":t.ariaDescribedby,"aria-live":"polite"},domProps:{value:(n=t.model)==null?void 0:n.toString()},on:{input:t.handleInput}},"input",t.$attrs,!1),t.$listeners)),!t.labelOutside&&t.isValidLabel?e("label",{staticClass:"input-field__label",attrs:{for:t.computedId}},[t._v(" "+t._s(t.label)+" ")]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.hasLeadingIcon,expression:"hasLeadingIcon"}],staticClass:"input-field__icon input-field__icon--leading"},[t._t("default")],2),t.showTrailingButton?e("NcButton",{staticClass:"input-field__trailing-button",attrs:{type:"tertiary-no-background","aria-label":t.trailingButtonLabel,disabled:t.disabled},on:{click:t.handleTrailingButtonClick},scopedSlots:t._u([{key:"icon",fn:function(){return[t._t("trailing-button-icon")]},proxy:!0}],null,!0)}):t.success||t.error?e("div",{staticClass:"input-field__icon input-field__icon--trailing"},[t.success?e("Check",{staticStyle:{color:"var(--color-success-text)"},attrs:{size:20}}):t.error?e("AlertCircle",{staticStyle:{color:"var(--color-error-text)"},attrs:{size:20}}):t._e()],1):t._e()],1),t.helperText.length>0?e("p",{staticClass:"input-field__helper-text-message",class:{"input-field__helper-text-message--error":t.error,"input-field__helper-text-message--success":t.success},attrs:{id:"".concat(t.inputName,"-helper-text")}},[t.success?e("Check",{staticClass:"input-field__helper-text-message__icon",attrs:{size:18}}):t.error?e("AlertCircle",{staticClass:"input-field__helper-text-message__icon",attrs:{size:18}}):t._e(),t._v(" "+t._s(t.helperText)+" ")],1):t._e()])},za=[],Xa=Ht(Va,Ga,za,!1,null,"e4fac465");const Be=Xa.exports,Wa={name:"UndoVariantIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var qa=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon undo-variant-icon",attrs:{"aria-hidden":t.title?null:"true","aria-label":t.title,role:"img"},on:{click:function(n){return t.$emit("click",n)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M13.5,7A6.5,6.5 0 0,1 20,13.5A6.5,6.5 0 0,1 13.5,20H10V18H13.5C16,18 18,16 18,13.5C18,11 16,9 13.5,9H7.83L10.91,12.09L9.5,13.5L4,8L9.5,2.5L10.92,3.91L7.83,7H13.5M6,18H8V20H6V18Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},Ha=[],Ka=Ht(Wa,qa,Ha,!1,null,null);const Za=Ka.exports;zr(qr,Wr);const Ya=new Set(Object.keys(Be.props)),Ja={name:"NcTextField",components:{NcInputField:Be,Close:Xr,ArrowRight:Qr,Undo:Za},inheritAttrs:!1,model:{prop:"modelValue",event:"update:modelValue"},props:gt(st({" ":{}},Be.props),{trailingButtonLabel:{type:String,default:""},trailingButtonIcon:{type:String,default:"close",validator:t=>["close","arrowRight","undo"].includes(t)}}),emits:["update:value","update:modelValue","update:model-value"],setup(){return{model:Yn("value","update:value")}},computed:{propsAndAttrsToForward(){const t={undo:ye("Undo changes"),close:ye("Clear text"),arrowRight:ye("Save changes")};return gt(st(st({},this.$attrs),Object.fromEntries(Object.entries(this.$props).filter(([e])=>Ya.has(e)))),{trailingButtonLabel:this.trailingButtonLabel||t[this.trailingButtonIcon]})}},methods:{focus(){this.$refs.inputField.focus()},select(){this.$refs.inputField.select()}}};var Qa=function(){var t=this,e=t._self._c;return e("NcInputField",t._g(t._b({ref:"inputField",scopedSlots:t._u([t.type!=="search"?{key:"trailing-button-icon",fn:function(){return[t.trailingButtonIcon==="close"?e("Close",{attrs:{size:20}}):t.trailingButtonIcon==="arrowRight"?e("ArrowRight",{attrs:{size:20}}):t.trailingButtonIcon==="undo"?e("Undo",{attrs:{size:20}}):t._e()]},proxy:!0}:null],null,!0)},"NcInputField",t.propsAndAttrsToForward,!1),t.$listeners),[t._t("default")],2)},tu=[],eu=Ht(Ja,Qa,tu,!1,null,null);const nu=eu.exports,ru=Hr({__name:"MnemonicPromptDialog",emits:["close"],setup(t,{emit:e}){const n=be(),r=be(""),i=be(!1),s=fn(()=>i.value===!0&&r.value.trim().split(/\s+/g).length===12);function u(){e("close",r.value)}const a=fn(()=>[{label:dn("end_to_en_encryption","Submit"),nativeType:"submit",type:"primary",disabled:!s.value,callback:u}]);return{__sfc:!0,emit:e,dialogRef:n,mnemonic:r,confirmToggle:i,isFormValid:s,submit:u,buttons:a,t:dn,NcDialog:Kr,NcTextField:nu,NcNoteCard:Zr,NcCheckboxRadioSwitch:ti}}});var iu=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcDialog,{ref:"dialogRef",attrs:{name:n.t("end_to_end_encryption","Enter your 12 words mnemonic"),buttons:n.buttons,"is-form":!0},on:{submit:n.submit}},[e(n.NcNoteCard,{attrs:{type:"warning","show-alert":!0,heading:n.t("end_to_end_encryption","Decrypting your files in the browser can weaken security")}},[t._v(" "+t._s(n.t("end_to_end_encryption","The server could serve malicious source code to extract the secret that protects your files."))+" "),e(n.NcCheckboxRadioSwitch,{attrs:{required:"true","data-cy-e2ee-mnemonic-prompt":"i_understand_the_risks",type:"switch"},model:{value:n.confirmToggle,callback:function(r){n.confirmToggle=r},expression:"confirmToggle"}},[t._v(" "+t._s(n.t("end_to_end_encryption","I understand the risks"))+" ")])],1),e(n.NcTextField,{attrs:{value:n.mnemonic,required:"true",pattern:"^(\\w+\\s+){11}\\w+$",label:n.t("end_to_end_encryption","Mnemonic"),autofocus:!0},on:{"update:value":function(r){n.mnemonic=r}}})],1)},su=[],ou=Yr(ru,iu,su,!1,null,null);const au=ou.exports;async function uu(){const t=Promise.withResolvers();return Jr(au,void 0,e=>{e!==void 0?t.resolve(e):t.reject()}),t.promise}let Wt;const lu=ra();let Ce;const ft={};function cu(){Wt=window.fetch,K.debug("Setting up WebDAV decryption proxy"),window.fetch=async(t,e={})=>{let n=new Request(t,e);if(!(n.url.includes("/remote.php/")&&(n.method==="GET"||n.method==="PROPFIND")))return Wt(n);K.debug("Proxying ".concat(n.method," ").concat(n.url),{request:n});const r=new Headers(n.headers);switch(r.set("X-E2EE-SUPPORTED","true"),n=new Request(n,{headers:r}),n.method){case"PROPFIND":return pu(n);case"GET":default:return hu(n)}}}async function hu(t){const e=new URL(t.url).pathname,n=await Ve(e);if(n===void 0)return K.debug("File is not part of e2ee folder",{path:e}),Wt(t);const r=await ne(ct.dirname(e),n),i=r.files[ct.basename(t.url)];if(i===void 0)throw K.debug("Could not find metadata info",{path:e,metadataInfo:r}),new Error("Could not find file in metadata");return K.debug("Fetching encrypted file",{request:t}),await fu(await Wt(t),i)}async function pu(t){var e,n;K.debug("Fetching raw PROPFIND",{request:t});const r=await Wt(t),i=new URL(t.url).pathname,s=await r.text(),u=await ws(s),a=Es(u,i,!0);let c=i;if(a.type==="directory"){if(((e=a.props)==null?void 0:e["is-encrypted"])!==1)return K.debug("Folder is not e2ee",{xml:u}),new Response(s,r);ft[i]=await an((n=a.props)==null?void 0:n.fileid);const o=await Ve(c);if(o===void 0)return K.debug("Cannot find root E2EE folder",{path:i}),new Response(s,r);const l=await ne(c,o);let p;try{p=await ne(ct.dirname(c),o)}catch(h){}Hn(u,i,l,p)}if(a.type==="file"){c=ct.dirname(i);const o=await Ve(c);if(o===void 0)return K.debug("Cannot find root E2EE folder",{path:i}),new Response(s,r);Hn(u,i,void 0,await ne(c,o))}return new Response(new Uo.XMLBuilder().build(u),r)}function Hn(t,e,n,r){K.debug("Updating PROPFIND info",{folderPath:e,metadataInfo:n,parentMetadataInfo:r,xml:t}),t.multistatus.response.forEach(i=>{if(i.propstat===void 0)return;let s=n;if(i.href===e&&r&&(s=r),s===void 0)return;const u=i.propstat.prop.displayname;let a=u;s.files[u]?(a=s.files[u].filename,i.propstat.prop.getcontenttype=s.files[u].mimetype):s.folders[u]&&(a=s.folders[u],i.propstat.prop.getcontenttype="httpd/unix-directory"),i.propstat.prop.displayname=a,i.propstat.prop.permissions=i.propstat.prop.permissions.replace(/(R)|(D)|(N)|(V)|(W)|(CK)/g,"")})}async function fu(t,e){const n=await un(new Uint8Array(await t.arrayBuffer()),await _r(bt(e.key)),{iv:bt(e.nonce)});return new Response(n,t)}async function ne(t,e){K.debug("Getting metadata info",{path:t});const n=he();if(!n)throw new Error("No user logged in");return Ce===void 0&&(Ce=await Ra(await va(),await uu())),await Aa(await du(t),await Ta(e,n.uid,Ce))}async function Sr(t){K.debug("Getting file id",{path:t});const e=await lu.stat(decodeURI(t).replace("remote.php/dav/",""),{details:!0,data:Qo()}),n=ia(e.data);if(!n.fileid)throw new Error("File ID not found");return String(n.fileid)}async function du(t){return K.debug("Getting metadata",{path:t,metadataCache:ft}),ft[t]||(ft[t]=await an(await Sr(t))),ft[t]}async function Ve(t){var e;K.debug("Getting root metadata",{path:t,metadataCache:ft});const n=Object.entries(ft).filter(([,r])=>r.users!==void 0).find(([r])=>t.startsWith(r));if(n)return n[1];for(;t!=="/";){if((e=ft[t])!=null||(ft[t]=await an(await Sr(t))),ft[t].users!==void 0)return ft[t];t=ct.dirname(t)}}const gu=Ge("end_to_end_encryption","userConfig",{e2eeInBrowserEnabled:!1});gu.e2eeInBrowserEnabled&&cu();
